(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1387:function(e,t,a){"use strict";a(113),a(1508)},1508:function(e,t,a){},1953:function(e,t,a){"use strict";a.r(t),a.d(t,"Logins",function(){return x});a(570);var n,o=a(377),s=(a(374),a(115)),r=(a(1461),a(1455)),i=(a(572),a(380)),l=(a(1387),a(36)),p=a(165),c=a.n(p),m=a(235),u=a(33),g=a(69),d=a(71),f=a(70),h=a(72),y=(a(1462),a(1499)),v=a(0),b=a.n(v),S=a(1463),w=a.n(S),E=a(163),I=a(60);a.e(40).then(a.t.bind(null,1948,7));var N=y.a.Item,k=Object(I.b)("UserStore","homeStore","routerStore")(n=Object(I.c)(n=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={backgrounds:{background:null,text:null},URL:"",modalVisible:!1,pingtaivalue:null,pingtaiArr:[],userData:null},a.appInput=function(e){""!==e.target.value&&a.setState({text:null})},a.onPingtaiChange=function(e){window.sessionStorage.setItem("platformType",e.target.itemtype||""),window.sessionStorage.setItem("platformName",e.target.itemLabel||""),window.sessionStorage.setItem("loginPlatformType",e.target.itemtype||""),window.sessionStorage.setItem("loginPlatformName",e.target.itemLabel||""),a.props.UserStore.headerTitle=window.sessionStorage.getItem("loginPlatformName"),a.setState({pingtaivalue:e.target.value})},a.hideModal=function(){a.setState({modalVisible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=Object.assign({},a.state.backgrounds,{background:"#fda029"});a.setState({backgrounds:t}),a.props.form.validateFields(function(e,t){e?a.setState({text:null}):a.login(t)})},a.login=function(){var e=Object(m.a)(c.a.mark(function e(t){var n,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(E.a)(t.Username,w.a.hash(t.password),t.Verification,t.loginType);case 3:0===(n=e.sent).code?(o=n.platform.map(function(e){return{label:e.name,value:e.id,type:e.code}})||[],a.setState({pingtaiArr:o,userData:n}),"student"===t.loginType?(window.sessionStorage.setItem("platformType","student"),window.sessionStorage.setItem("loginPlatformType","student"),window.sessionStorage.setItem("platformName","\u5f08\u7b80\u4e92\u52a8\u6559\u5b66\u8d44\u6e90\u5e73\u53f0"),window.sessionStorage.setItem("loginPlatformName","\u5f08\u7b80\u4e92\u52a8\u6559\u5b66\u8d44\u6e90\u5e73\u53f0"),a.props.UserStore.headerTitle=window.sessionStorage.getItem("loginPlatformName"),a.setState({pingtaivalue:""},function(){a.loginSuccess()})):n.platform.length>1?a.setState({modalVisible:!0}):1===n.platform.length&&(window.sessionStorage.setItem("platformType",n.platform[0].code||""),window.sessionStorage.setItem("loginPlatformType",n.platform[0].code||""),window.sessionStorage.setItem("platformName",n.platform[0].name||""),window.sessionStorage.setItem("loginPlatformName",n.platform[0].name||""),a.props.UserStore.headerTitle=window.sessionStorage.getItem("loginPlatformName"),a.setState({pingtaivalue:n.platform[0].id},function(){a.loginSuccess()}))):a.setState({text:n.msg}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a.loginSuccess=function(){a.setState({modalVisible:!1});var e=a.state.userData;if(console.log(e),a.props.userStore.updateStatus(!0,e.token,e.name,e.userType,e.userId,a.state.pingtaivalue,JSON.stringify(a.state.pingtaiArr),e.openPlatform),!1===a.props.location.isLoig)a.props.history.push({pathname:"/index"});else if(a.props.location.isLoig){var t=a.props.location.state;a.props.userStore.updateStatus(!0,e.token,e.name,e.userType,e.userId,a.state.pingtaivalue,JSON.stringify(a.state.pingtaiArr),e.openPlatform),a.props.history.push({pathname:"/video",state:t})}else"undefined"===typeof a.props.location.state?(a.props.userStore.updateStatus(!0,e.token,e.name,e.userType,e.userId,a.state.pingtaivalue,JSON.stringify(a.state.pingtaiArr),e.openPlatform),a.props.history.push({pathname:"/index"})):0===a.props.location.isLoig&&(a.props.userStore.updateStatus(!0,e.token,e.name,e.userType,e.userId,a.state.pingtaivalue,JSON.stringify(a.state.pingtaiArr),e.openPlatform),console.log(a.props.location),a.props.history.push({pathname:a.props.location.state}))},a.validation=Object(m.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Math.floor(10*Math.random()),e.next=4,Object(E.d)();case 4:n=e.sent,a.setState({URL:n+"?"+parseInt(t)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),a}return Object(h.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.validation()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return b.a.createElement("div",{className:"login"},b.a.createElement("div",{className:"login-body"},b.a.createElement("div",{className:"login-body-window"},b.a.createElement("div",{className:"login-body-window-title"},b.a.createElement("p",{className:"login-body-window-p"},"\u767b\u5f55")),b.a.createElement(y.a,{className:"login-form",onSubmit:this.handleSubmit},b.a.createElement(N,{style:{marginBottom:"1rem"}},e("Username",{rules:[{required:!0,message:b.a.createElement("div",{style:{marginTop:"10px"}},b.a.createElement(l.a,{type:"exclamation-circle"})," \u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801!")}]})(b.a.createElement(i.a,{onBlur:this.appInput,onFocus:this.appInput,onChange:this.appInput,className:"login-form-input",prefix:b.a.createElement(l.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\u7801"}))),b.a.createElement(N,{style:{marginBottom:"1rem"}},e("password",{rules:[{required:!0,message:b.a.createElement("div",{style:{marginTop:"10px"}},b.a.createElement(l.a,{type:"exclamation-circle"}),"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801!")}]})(b.a.createElement(i.a,{onBlur:this.appInput,onFocus:this.appInput,onChange:this.appInput,className:"login-form-input",type:"password",prefix:b.a.createElement(l.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),b.a.createElement(N,{style:{marginBottom:"1rem"}},e("Verification",{rules:[{required:!0,message:b.a.createElement("div",{style:{marginTop:"10px"}},b.a.createElement(l.a,{type:"exclamation-circle"}),"\u8bf7\u8f93\u5165\u60a8\u7684\u9a8c\u8bc1\u7801!")}]})(b.a.createElement(i.a,{onBlur:this.appInput,onFocus:this.appInput,onChange:this.appInput,className:"login-form-Verif",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"})),b.a.createElement("img",{className:"login-form-Verif-imgs",src:this.state.URL,onClick:this.validation})),b.a.createElement(N,{style:{marginBottom:"1rem"}},e("loginType",{rules:[{required:!0,message:b.a.createElement("div",{style:{marginTop:"10px"}},b.a.createElement(l.a,{type:"exclamation-circle"}),"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u7c7b\u578b!")}],initialValue:"checker"})(b.a.createElement(r.a.Group,null,b.a.createElement(r.a,{value:"checker"},"\u5ba1\u6838\u5458"),b.a.createElement(r.a,{value:"student"},"\u5b66\u751f")))),b.a.createElement(N,{className:"login-form-item"},b.a.createElement(s.a,{style:this.state.backgrounds,htmlType:"submit",className:"login-form-button"},"\u767b\u5f55"),b.a.createElement("br",null),b.a.createElement("span",{style:{color:"red"}},this.state.text))))),b.a.createElement(o.a,{className:"pingtai-choice",title:"\u9009\u62e9\u9700\u8981\u767b\u9646\u7684\u5e73\u53f0",maskClosable:!1,visible:this.state.modalVisible,onCancel:this.hideModal,footer:null},b.a.createElement(r.a.Group,{onChange:this.onPingtaiChange.bind(this),value:this.state.pingtaivalue},this.state.pingtaiArr.map(function(e){return b.a.createElement(r.a,{itemLabel:e.label,itemtype:e.type,key:e.value,value:e.value},e.label)})),b.a.createElement("div",{className:"pingtai-choice_button"},b.a.createElement(s.a,{onClick:this.loginSuccess,disabled:null===this.state.pingtaivalue,style:{width:"200px"},type:"primary",size:"default"},"\u786e\u5b9a"))))}}]),t}(v.Component))||n)||n,x=y.a.create()(k);t.default=x}}]);
//# sourceMappingURL=7.4b305fc1.chunk.js.map