(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1376:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},1377:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},1378:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},1380:function(e,t,n){var r=n(1539),i=n(1381);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},1381:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},1382:function(e,t,n){var r=n(1503);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},1444:function(e,t,n){"use strict";n(113),n(1445)},1445:function(e,t,n){},1456:function(e,t,n){"use strict";var r=n(0),i=n(1),a=n(6),o=n.n(a),s=n(34);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,f(t).apply(this,arguments))).renderBreadcrumbItem=function(t){var n,i=t.getPrefixCls,a=e.props,o=a.prefixCls,s=a.separator,l=a.children,d=h(a,["prefixCls","separator","children"]),c=i("breadcrumb",o);return n="href"in e.props?r.createElement("a",u({className:"".concat(c,"-link")},d),l):r.createElement("span",u({className:"".concat(c,"-link")},d),l),l?r.createElement("span",null,n,r.createElement("span",{className:"".concat(c,"-separator")},s)):null},e}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(s.a,null,this.renderBreadcrumbItem)}}])&&d(n.prototype,i),a&&d(n,a),t}();g.__ANT_BREADCRUMB_ITEM=!0,g.defaultProps={separator:"/"},g.propTypes={prefixCls:i.string,separator:i.oneOfType([i.string,i.element]),href:i.string};var y=n(66);function v(e){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n,i){var a=n.indexOf(e)===n.length-1,o=function(e,t){if(!e.breadcrumbName)return null;var n=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(":(".concat(n,")"),"g"),function(e,n){return t[n]||e})}(e,t);return a?r.createElement("span",null,o):r.createElement("a",{href:"#/".concat(i.join("/"))},o)}var w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=x(this,b(t).apply(this,arguments))).renderBreadcrumb=function(t){var n,i=t.getPrefixCls,a=e.props,s=a.prefixCls,l=a.separator,u=a.style,d=a.className,c=a.routes,f=a.params,p=void 0===f?{}:f,h=a.children,v=a.itemRender,m=void 0===v?k:v,x=i("breadcrumb",s);if(c&&c.length>0){var b=[];n=c.map(function(e){e.path=e.path||"";var t=e.path.replace(/^\//,"");return Object.keys(p).forEach(function(e){t=t.replace(":".concat(e),p[e])}),t&&b.push(t),r.createElement(g,{separator:l,key:e.breadcrumbName||t},m(e,p,c,b))})}else h&&(n=r.Children.map(h,function(e,t){return e?(Object(y.a)(e.type&&e.type.__ANT_BREADCRUMB_ITEM,"Breadcrumb","Only accepts Breadcrumb.Item as it's children"),Object(r.cloneElement)(e,{separator:l,key:t})):e}));return r.createElement("div",{className:o()(d,x),style:u},n)},e}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this.props;Object(y.a)(!("linkRender"in e||"nameRender"in e),"Breadcrumb","`linkRender` and `nameRender` are removed, please use `itemRender` instead, see: https://u.ant.design/item-render.")}},{key:"render",value:function(){return r.createElement(s.a,null,this.renderBreadcrumb)}}])&&m(n.prototype,i),a&&m(n,a),t}();w.defaultProps={separator:"/"},w.propTypes={prefixCls:i.string,separator:i.node,routes:i.array,params:i.object,linkRender:i.func,nameRender:i.func},w.Item=g;t.a=w},1503:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},1539:function(e,t){function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},1898:function(module,exports,__webpack_require__){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n(10)),a=p(n(3)),o=p(n(30)),s=p(n(6)),l=p(n(4)),u=p(n(31)),d=n(36),c=p(n(37)),f=n(5);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.config=a.default.deepCopy({width:600,height:337.5,ignores:[],whitelist:[],lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),inactive:3e3,volume:.6,controls:!0,controlsList:["nodownload"]},e),n.version=f.version,n.userTimer=null,n.waitTimer=null,n.database=new o.default,n.history=[],n.isProgressMoving=!1,n.root=a.default.findDom(document,"#"+n.config.id),n.controls=a.default.createDom("xg-controls","",{unselectable:"on",onselectstart:"return false"},"xgplayer-controls"),!n.root){var r=n.config.el;if(!r||1!==r.nodeType)return n.emit("error",new l.default("use",n.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),h(n,!1);n.root=r}if(a.default.addClass(n.root,"xgplayer xgplayer-"+s.default.device+" xgplayer-nostart "+(n.config.controls?"":"no-controls")),n.root.appendChild(n.controls),n.config.fluid?(n.root.style["max-width"]="100%",n.root.style.width="100%",n.root.style.height="0",n.root.style["padding-top"]=100*n.config.height/n.config.width+"%",n.video.style.position="absolute",n.video.style.top="0",n.video.style.left="0"):(n.config.width&&("number"!=typeof n.config.width?n.root.style.width=n.config.width:n.root.style.width=n.config.width+"px"),n.config.height&&("number"!=typeof n.config.height?n.root.style.height=n.config.height:n.root.style.height=n.config.height+"px")),n.config.execBeforePluginsCall&&n.config.execBeforePluginsCall.forEach(function(e){e.call(n,n)}),n.config.controlStyle&&"String"===a.default.typeOf(n.config.controlStyle)){var i=n;fetch(i.config.controlStyle,{method:"GET",headers:{Accept:"application/json"}}).then(function(e){e.ok&&e.json().then(function(e){for(var t in e)e.hasOwnProperty(t)&&(i.config[t]=e[t]);i.pluginsCall()})}).catch(function(e){console.log("Fetch\u9519\u8bef:"+e)})}else n.pluginsCall();n.ev.forEach(function(e){var t=Object.keys(e)[0],r=n[e[t]];r&&n.on(t,r)}),["focus","blur"].forEach(function(e){n.on(e,n["on"+e.charAt(0).toUpperCase()+e.slice(1)])});var u=n;return n.mousemoveFunc=function(){u.emit("focus"),u.config.closeFocusVideoFocus||u.video.focus()},n.root.addEventListener("mousemove",n.mousemoveFunc),n.playFunc=function(){u.emit("focus"),u.config.closePlayVideoFocus||u.video.focus()},u.once("play",n.playFunc),n.getVideoSize=function(){if(this.video.videoWidth&&this.video.videoHeight){var e=u.root.getBoundingClientRect();"auto"===u.config.fitVideoSize?e.width/e.height>this.video.videoWidth/this.video.videoHeight?u.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":u.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px":"fixWidth"===u.config.fitVideoSize?u.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":"fixHeight"===u.config.fitVideoSize&&(u.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px")}},u.once("loadeddata",n.getVideoSize),setTimeout(function(){n.emit("ready")},0),n.config.keyShortcut&&"on"!==n.config.keyShortcut||["video","controls"].forEach(function(e){u[e].addEventListener("keydown",function(e){u.onKeydown(e,u)})}),n.config.videoInit&&a.default.hasClass(n.root,"xgplayer-nostart")&&n.start(),u.config.rotate&&(u.on("requestFullscreen",n.updateRotateDeg),u.on("exitFullscreen",n.updateRotateDeg)),u.once("destroy",function e(){u.root.removeEventListener("mousemove",u.mousemoveFunc),u.off("destroy",e)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"start",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.url,r=this.root,i=this;n&&""!==n||this.emit("urlNull"),this.logParams.playSrc=n,this.canPlayFunc=function(){var e=i.video.play();void 0!==e&&e&&e.then(function(){i.emit("autoplay started")}).catch(function(){i.emit("autoplay was prevented"),t.util.addClass(i.root,"xgplayer-is-autoplay")}),i.off("canplay",i.canPlayFunc)},"String"===a.default.typeOf(n)?this.video.src=n:n.forEach(function(t){e.video.appendChild(a.default.createDom("source","",{src:""+t.src,type:""+(t.type||"")}))}),this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.loadeddataFunc=function(){i.logParams.vt=(new Date).getTime(),i.logParams.pt>i.logParams.vt&&(i.logParams.pt=i.logParams.vt),i.logParams.vd=i.video.duration},this.once("loadeddata",this.loadeddataFunc),this.config.autoplay&&this.on("canplay",this.canPlayFunc),r.insertBefore(this.video,r.firstChild),setTimeout(function(){e.emit("complete")},1)}},{key:"reload",value:function(){this.video.load(),this.reloadFunc=function(){this.play().catch(function(e){})},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this;for(var i in this.root.parentNode,clearInterval(this.bulletResizeTimer),this._interval)clearInterval(this._interval[i]),this._interval[i]=null;function a(){if(this.emit("destroy"),this.video.removeAttribute("src"),this.video.load(),n){this.root.innerHTML="";var e=this.root.className.split(" ");e.length>0?this.root.className=e.filter(function(e){return e.indexOf("xgplayer")<0}).join(" "):this.root.className=""}for(var t in this)delete this[t];this.off("pause",a)}this.ev.forEach(function(t){var n=Object.keys(t)[0],r=e[t[n]];r&&e.off(n,r)}),this.loadeddataFunc&&this.off("loadeddata",this.loadeddataFunc),this.reloadFunc&&this.off("loadeddata",this.reloadFunc),this.replayFunc&&this.off("play",this.replayFunc),this.playFunc&&this.off("play",this.playFunc),this.getVideoSize&&this.off("loadeddata",this.getVideoSize),["focus","blur"].forEach(function(t){e.off(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])}),this.config.keyShortcut&&"on"!==this.config.keyShortcut||["video","controls"].forEach(function(t){e[t]&&e[t].removeEventListener("keydown",function(e){r.onKeydown(e,r)})}),this.paused?a.call(this):(this.pause(),this.once("pause",a)),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"replay",value:function(){var e=this,t=this._replay;a.default.removeClass(this.root,"xgplayer-ended"),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.replayFunc=function(){e.logParams.vt=(new Date).getTime(),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt),e.logParams.vd=e.video.duration},this.once("play",this.replayFunc),this.logParams.playSrc=this.video.currentSrc,t&&t instanceof Function?t():(this.currentTime=0,this.play().catch(function(e){}))}},{key:"getFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):this.video.webkitSupportsFullscreen?this.video.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():a.default.addClass(e,"xgplayer-is-cssfullscreen")}},{key:"exitFullscreen",value:function(e){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),a.default.removeClass(e,"xgplayer-is-cssfullscreen")}},{key:"getCssFullscreen",value:function(){a.default.addClass(this.root,"xgplayer-is-cssfullscreen"),this.emit("requestCssFullscreen")}},{key:"exitCssFullscreen",value:function(){a.default.removeClass(this.root,"xgplayer-is-cssfullscreen"),this.emit("exitCssFullscreen")}},{key:"download",value:function(){var e=(0,d.getAbsoluteURL)(this.config.url);(0,c.default)(e)}},{key:"pluginsCall",value:function(){var e=this,n=this;if(t.plugins){var r=this.config.ignores;Object.keys(t.plugins).forEach(function(i){var a=t.plugins[i];r.some(function(e){return i===e||i==="s_"+e})||(["pc","tablet","mobile"].some(function(e){return e===i})?i===s.default.device&&setTimeout(function(){a.call(n,n)},0):a.call(e,e))})}}},{key:"getPIP",value:function(){var e=a.default.createDom("xg-pip-lay","<div></div>",{},"xgplayer-pip-lay");this.root.appendChild(e);var t=a.default.createDom("xg-pip-drag",'<div class="drag-handle"><span>\u70b9\u51fb\u6309\u4f4f\u53ef\u62d6\u52a8\u89c6\u9891</span></div>',{tabindex:9},"xgplayer-pip-drag");this.root.appendChild(t),new u.default(".xgplayer",{handle:".drag-handle"}),a.default.addClass(this.root,"xgplayer-pip-active"),this.root.style.right=0,this.root.style.bottom="200px",this.root.style.top="",this.root.style.left="",this.root.style.width="320px",this.root.style.height="180px",this.config.pipConfig&&(void 0!==this.config.pipConfig.top&&(this.root.style.top=this.config.pipConfig.top+"px",this.root.style.bottom=""),void 0!==this.config.pipConfig.bottom&&(this.root.style.bottom=this.config.pipConfig.bottom+"px"),void 0!==this.config.pipConfig.left&&(this.root.style.left=this.config.pipConfig.left+"px",this.root.style.right=""),void 0!==this.config.pipConfig.right&&(this.root.style.right=this.config.pipConfig.right+"px"),void 0!==this.config.pipConfig.width&&(this.root.style.width=this.config.pipConfig.width+"px"),void 0!==this.config.pipConfig.height&&(this.root.style.height=this.config.pipConfig.height+"px")),this.config.fluid&&(this.root.style["padding-top"]="");var n=this;["click","touchend"].forEach(function(t){e.addEventListener(t,function(e){e.preventDefault(),e.stopPropagation(),n.exitPIP()})})}},{key:"exitPIP",value:function(){a.default.removeClass(this.root,"xgplayer-pip-active"),this.root.style.right="",this.root.style.bottom="",this.root.style.top="",this.root.style.left="",this.config.fluid?(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"):(this.config.width&&("number"!=typeof this.config.width?this.root.style.width=this.config.width:this.root.style.width=this.config.width+"px"),this.config.height&&("number"!=typeof this.config.height?this.root.style.height=this.config.height:this.root.style.height=this.config.height+"px"));var e=a.default.findDom(this.root,".xgplayer-pip-lay");e&&e.parentNode&&e.parentNode.removeChild(e);var t=a.default.findDom(this.root,".xgplayer-pip-drag");t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"updateRotateDeg",value:function(){this.rotateDeg||(this.rotateDeg=0);var e=this.root.offsetWidth,t=this.root.offsetHeight,n=this.video.videoWidth,r=this.video.videoHeight;this.config.rotate.innerRotate;var i=void 0;.25===this.rotateDeg||.75===this.rotateDeg?(i=this.config.rotate.innerRotate?n/r>t/e?t/(r/n>t/e?t*n/r:e):e/(r/n>t/e?t:e*r/n):e>=t?e/t:t/e,i=parseFloat(i.toFixed(5))):i=1,this.config.rotate.innerRotate?(this.video.style.transformOrigin="center center",this.video.style.transform="rotate("+this.rotateDeg+"turn) scale("+i+")",this.video.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale("+i+")"):(this.root.style.transformOrigin="center center",this.root.style.transform="rotate("+this.rotateDeg+"turn) scale(1)",this.root.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale(1)")}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),n=this;n.rotateDeg||(n.rotateDeg=0);var r=e?1:-1;n.rotateDeg=(n.rotateDeg+1+.25*r*t)%1,this.updateRotateDeg(),n.emit("rotate",360*n.rotateDeg)}},{key:"onFocus",value:function(){var e=this;a.default.removeClass(this.root,"xgplayer-inactive"),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout(function(){e.emit("blur")},e.config.inactive)}},{key:"onBlur",value:function(){this.paused||this.ended||a.default.addClass(this.root,"xgplayer-inactive")}},{key:"onPlay",value:function(){a.default.addClass(this.root,"xgplayer-playing"),a.default.removeClass(this.root,"xgplayer-pause")}},{key:"onPause",value:function(){a.default.addClass(this.root,"xgplayer-pause"),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function(){a.default.addClass(this.root,"xgplayer-ended"),a.default.removeClass(this.root,"xgplayer-playing")}},{key:"onSeeking",value:function(){}},{key:"onSeeked",value:function(){this.waitTimer&&clearTimeout(this.waitTimer),a.default.removeClass(this.root,"xgplayer-isloading")}},{key:"onWaiting",value:function(){var e=this;e.waitTimer&&clearTimeout(e.waitTimer),e.waitTimer=setTimeout(function(){a.default.addClass(e.root,"xgplayer-isloading")},500)}},{key:"onPlaying",value:function(){this.waitTimer&&clearTimeout(this.waitTimer),a.default.removeClass(this.root,"xgplayer-isloading xgplayer-nostart xgplayer-pause xgplayer-ended xgplayer-is-error xgplayer-replay"),a.default.addClass(this.root,"xgplayer-playing")}},{key:"onKeydown",value:function(e,t){var n=e||window.event;if(!n||37!==n.keyCode&&38!==n.keyCode&&39!==n.keyCode&&40!==n.keyCode&&32!==n.keyCode||t.emit("focus"),!n||40!==n.keyCode&&38!==n.keyCode)n&&39===n.keyCode?t.currentTime+10<=t.duration?t.currentTime+=10:t.currentTime=t.duration-1:n&&37===n.keyCode?t.currentTime-10>=0?t.currentTime-=10:t.currentTime=0:n&&32===n.keyCode&&(t.paused?t.play().catch(function(e){}):t.pause());else{if(t.controls){var r=t.controls.querySelector(".xgplayer-slider");r&&(a.default.hasClass(r,"xgplayer-none")&&a.default.removeClass(r,"xgplayer-none"),t.sliderTimer&&clearTimeout(t.sliderTimer),t.sliderTimer=setTimeout(function(){a.default.addClass(r,"xgplayer-none")},t.config.inactive))}n&&40===n.keyCode?t.volume-.1>=0?t.volume=parseFloat((t.volume-.1).toFixed(1)):t.volume=0:n&&38===n.keyCode&&(t.volume+.1<=1?t.volume=parseFloat((t.volume+.1).toFixed(1)):t.volume=1)}}}],[{key:"install",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=n)}},{key:"use",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]=n}}]),t}();g.util=a.default,g.sniffer=s.default,g.Errors=l.default,t.default=g,e.exports=t.default},function(e,t,n){"use strict";var r=n(23)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){"use strict";e.exports=function(e){return null!=e}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var util={createDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach(function(t){var r=t,a=n[t];"video"===e||"audio"===e?a&&i.setAttribute(r,a):i.setAttribute(r,a)}),i},hasClass:function(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},addClass:function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.add(t)}):util.hasClass(e,t)||(e.className+=" "+t))},removeClass:function(e,t){e&&(e.classList?t.split(/\s+/g).forEach(function(t){e.classList.remove(t)}):util.hasClass(e,t)&&t.split(/\s+/g).forEach(function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}))},toggleClass:function(e,t){e&&t.split(/\s+/g).forEach(function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)})},findDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(r){0===t.indexOf("#")&&(n=e.getElementById(t.slice(1)))}return n},padStart:function(e,t,n){for(var r=String(n),i=t>>0,a=Math.ceil(i/r.length),o=[],s=String(e);a--;)o.push(r);return o.join("").substring(0,i-s.length)+s},format:function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),r=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,r]:[t,n,r]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach(function(n){"Object"!==util.typeOf(t[n])||t[n]instanceof Node?"Array"===util.typeOf(t[n])?e[n]="Array"===util.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:e[n]?util.deepCopy(e[n],t[n]):e[n]=t[n]}),e},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e){function t(t,n,r,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,r){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),r))}),clearInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){clearInterval(e._interval[t]),e._interval[t]=null}),createImgBtn:function(e,t,n,r){var i=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(i.style.backgroundImage='url("'+t+'")',n&&r){var a=void 0,o=void 0,s=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(n.indexOf(e)>-1&&r.indexOf(e)>-1)||(a=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(r.slice(0,r.indexOf(e)).trim()),s=e,!1)}),i.style.width=""+a+s,i.style.height=""+o+s,i.style.backgroundSize=""+a+s+" "+o+s,i.style.margin="start"===e?"-"+o/2+s+" auto auto -"+a/2+s:"auto 5px auto 5px"}return i},Hex2RGBA:function Hex2RGBA(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"}};exports.default=util,module.exports=exports.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);var i={network:{code:1,msg:"\u89c6\u9891\u4e0b\u8f7d\u9519\u8bef",remark:"\u53ea\u8981\u89c6\u9891\u4e0b\u8f7d\u9519\u8bef\u5c31\u4f7f\u7528\u6b64\u7c7b\u578b\uff0c\u65e0\u8bba\u662fvideo\u672c\u8eab\u7684\u8d85\u65f6\u8fd8\u662fxhr\u7684\u5206\u6bb5\u8bf7\u6c42\u8d85\u65f6\u6216\u8005\u8d44\u6e90\u4e0d\u5b58\u5728"},mse:{code:2,msg:"\u6d41\u8ffd\u52a0\u9519\u8bef",remark:"\u8ffd\u52a0\u6d41\u7684\u65f6\u5019\u5982\u679c\u7c7b\u578b\u4e0d\u5bf9\u3001\u65e0\u6cd5\u88ab\u6b63\u786e\u89e3\u7801\u5219\u4f1a\u89e6\u53d1\u6b64\u7c7b\u9519\u8bef"},parse:{code:3,msg:"\u89e3\u6790\u9519\u8bef",remark:"mp4\u3001hls\u3001flv\u6211\u4eec\u90fd\u662f\u4f7f\u7528js\u8fdb\u884c\u683c\u5f0f\u89e3\u6790\uff0c\u5982\u679c\u89e3\u6790\u5931\u8d25\u5219\u4f1a\u89e6\u53d1\u6b64\u7c7b\u9519\u8bef"},format:{code:4,msg:"\u683c\u5f0f\u9519\u8bef",remark:"\u5982\u679c\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u7684\u683c\u5f0f\u5bfc\u81f4\u64ad\u653e\u9519\u8bef"},decoder:{code:5,msg:"\u89e3\u7801\u9519\u8bef",remark:"\u6d4f\u89c8\u5668\u89e3\u7801\u5f02\u5e38\u4f1a\u629b\u51fa\u6b64\u7c7b\u578b\u9519\u8bef"},runtime:{code:6,msg:"\u8bed\u6cd5\u9519\u8bef",remark:"\u64ad\u653e\u5668\u8bed\u6cd5\u9519\u8bef"},timeout:{code:7,msg:"\u64ad\u653e\u8d85\u65f6",remark:"\u64ad\u653e\u8fc7\u7a0b\u4e2d\u65e0\u6cd5\u6b63\u5e38\u8bf7\u6c42\u4e0b\u4e00\u4e2a\u5206\u6bb5\u5bfc\u81f4\u64ad\u653e\u4e2d\u65ad"},other:{code:8,msg:"\u5176\u4ed6\u9519\u8bef",remark:"\u4e0d\u53ef\u77e5\u7684\u9519\u8bef\u6216\u88ab\u5ffd\u7565\u7684\u9519\u8bef\u7c7b\u578b"}};t.default=function e(t,n,a,o,s,l,u,d){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var f={};return f.playerVersion=r.version,f.errorType=t,f.domain=document.domain,f.duration=a,f.currentTime=n,f.networkState=o,f.readyState=s,f.currentSrc=u,f.src=l,f.ended=d,f.errd=c,f.ex=(i[t]||{}).msg,f},e.exports=t.default},function(e){e.exports=JSON.parse('{"name":"xgplayer","version":"2.3.0","description":"video player","main":"./dist/index.js","typings":"./types/index.d.ts","bin":{"xgplayer":"bin/xgplayer.js"},"scripts":{"prepare":"npm run build","build":"webpack --progress --display-chunks -p","watch":"webpack --progress --display-chunks -p --watch --mode development"},"keywords":["video","player"],"babel":{"presets":["es2015"],"plugins":["add-module-exports","babel-plugin-bulk-import"]},"repository":{"type":"git","url":"git+https://github.com/bytedance/xgplayer.git"},"author":"yinguohui@bytedance.com","license":"MIT","dependencies":{"chalk":"^2.3.2","commander":"^2.15.1","danmu.js":"0.1.0","deepmerge":"^1.5.0","downloadjs":"1.4.7","draggabilly":"^2.2.0","event-emitter":"^0.3.5","fs-extra":"^5.0.0","pasition":"^1.0.1","request-frame":"^1.5.3"},"browserslist":["> 5%","IE 9","iOS 7","Firefox > 20"],"devDependencies":{"@types/events":"^3.0.0","autoprefixer":"^9.1.5","babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-bulk-import":"^1.0.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","chai":"^4.1.2","core-js":"^2.5.4","css-loader":"^0.28.11","json-loader":"^0.5.7","node-sass":"^4.8.3","postcss-cssnext":"^3.1.0","postcss-loader":"^2.1.5","raw-loader":"^2.0.0","sass-loader":"^6.0.7","style-loader":"^0.20.3","sugarss":"^1.0.1","webpack":"^4.11.0","webpack-cli":"^3.0.2","zlib":"^1.0.5"}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={get device(){return r.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(function(n){return t[n].test(e)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:o,isAndroid:r,isPc:!(o||r||n||a),isSymbian:n,isWindowsPhone:t,isFireFox:i}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=void 0,o=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set=function(e,n){var r=e,i=n;if(null===i)return!1;var a="";if(r.indexOf(".")>-1){var o=r.split(".");a=o[0],r=o[1]}"os_version"===r&&(i=""+i),a?"user"===a||"header"===a?t.envInfo[a][r]=i:"headers"===a?t.envInfo.header.headers[r]=i:t.envInfo.header.headers.custom[r]=i:t.envInfo.user.hasOwnProperty(r)?["user_type","device_id","ip_addr_id"].indexOf(r)>-1?t.envInfo.user[r]=Number(i):["user_id","web_id","user_unique_id","ssid"].indexOf(r)>-1?t.envInfo.user[r]=String(i):["user_is_auth","user_is_login"].indexOf(r)>-1&&(t.envInfo.user[r]=Boolean(i)):t.envInfo.header.hasOwnProperty(r)?t.envInfo.header[r]=i:t.envInfo.header.headers.hasOwnProperty(r)?t.envInfo.header.headers[r]=i:t.envInfo.header.headers.custom[r]=i},this.get=function(){var e={user:{},header:{headers:{custom:{}}}},n=t.envInfo,r=n.user,o=Object.keys(r),s=Array.isArray(o),l=0;for(o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{if((l=o.next()).done)break;u=l.value}var d=u;r[d]!==a&&(e.user[d]=r[d])}var c=n.header,f=Object.keys(c),p=Array.isArray(f),h=0;for(f=p?f:f[Symbol.iterator]();;){var g;if(p){if(h>=f.length)break;g=f[h++]}else{if((h=f.next()).done)break;g=h.value}var y=g;c[y]!==a&&"headers"!==y&&(e.header[y]=c[y])}var v=n.header.headers,m=Object.keys(v),x=Array.isArray(m),b=0;for(m=x?m:m[Symbol.iterator]();;){var _;if(x){if(b>=m.length)break;_=m[b++]}else{if((b=m.next()).done)break;_=b.value}var k=_;"custom"!==k&&v[k]!==a&&(e.header.headers[k]=v[k])}var w=n.header.headers.custom,E=Object.keys(w);if(E.length){var S=E,T=Array.isArray(S),A=0;for(S=T?S:S[Symbol.iterator]();;){var O;if(T){if(A>=S.length)break;O=S[A++]}else{if((A=S.next()).done)break;O=A.value}var D=O;e.header.headers.custom[D]=w[D]}}return{user:e.user,header:i({},e.header,{headers:e.header.headers})}},this.envInfo={user:{user_unique_id:a,user_type:a,user_id:a,user_is_auth:a,user_is_login:a,device_id:a,web_id:a,ip_addr_id:a,ssid:a},header:{app_id:a,app_name:a,app_install_id:a,app_package:a,app_channel:a,app_version:a,os_name:a,os_version:a,device_model:a,ab_client:a,ab_version:a,traffic_type:a,utm_source:a,utm_medium:a,utm_campaign:a,client_ip:a,device_brand:a,os_api:a,access:a,language:a,region:a,app_language:a,app_region:a,creative_id:a,ad_id:a,campaign_id:a,log_type:a,rnd:a,platform:a,sdk_version:a,province:a,city:a,timezone:a,tz_offset:a,tz_name:a,sim_region:a,carrier:a,resolution:a,browser:a,browser_version:a,referrer:a,referrer_host:a,headers:{utm_term:a,utm_content:a,custom:{}}}}},s=function(e){var t=document.createElement("a");return t.href=e,t},l=screen.width||0,u=screen.height||0,d=l+" x "+u,c=navigator.appVersion,f=navigator.userAgent,p=navigator.language,h=document.referrer,g=s(h).hostname,y=function(e){var t=s(e).search;t=t.slice(1);var n={};return t.split("&").forEach(function(e){var t=e.split("="),r=t[0],i=t[1];n[r]=decodeURIComponent(void 0===i?"":i)}),n}(location.href),v="",m="",x="",b=""+parseFloat(c),_=void 0,k=void 0;-1!==(_=f.indexOf("Opera"))&&(x="Opera",b=f.substring(_+6),-1!==(_=f.indexOf("Version"))&&(b=f.substring(_+8))),-1!==(_=f.indexOf("Edge"))?(x="Microsoft Edge",b=f.substring(_+5)):-1!==(_=f.indexOf("MSIE"))?(x="Microsoft Internet Explorer",b=f.substring(_+5)):-1!==(_=f.indexOf("Chrome"))?(x="Chrome",b=f.substring(_+7)):-1!==(_=f.indexOf("Safari"))?(x="Safari",b=f.substring(_+7),-1!==(_=f.indexOf("Version"))&&(b=f.substring(_+8))):-1!==(_=f.indexOf("Firefox"))&&(x="Firefox",b=f.substring(_+8)),-1!==(k=b.indexOf(";"))&&(b=b.substring(0,k)),-1!==(k=b.indexOf(" "))&&(b=b.substring(0,k)),-1!==(k=b.indexOf(")"))&&(b=b.substring(0,k));for(var w,E,S=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(c)?"wap":"web",T=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],A=0;A<T.length;A++){var O=T[A];if(O.r.test(f)){v=O.s;break}}function D(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""}switch(/Windows/.test(v)&&(m=D(/Windows (.*)/,v),v="windows"),v){case"Mac OS X":m=D(/Mac OS X (10[\.\_\d]+)/,f),v="mac";break;case"Android":(E=D(/Android ([\.\_\d]+)/,w=f))||(E=D(/Android\/([\.\_\d]+)/,w)),m=E,v="android";break;case"iOS":m=(m=/OS (\d+)_(\d+)_?(\d+)?/.exec(c))?m[1]+"."+m[2]+"."+(0|m[3]):"",v="ios"}var R={screen_size:d,browser:x,browser_version:b,platform:S,os_name:v,os_version:m,userAgent:f,screen_width:l,screen_height:u,device_model:v,language:p,referrer:h,referrer_host:g,utm_source:y.utm_source,utm_medium:y.utm_medium,utm_campaign:y.utm_campaign,utm_term:y.utm_term,utm_content:y.utm_content},C={get:function(e){var t="no localStorage";localStorage&&localStorage.getItem&&(t=localStorage.getItem(e));var n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n},set:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage&&localStorage.setItem&&localStorage.setItem(e,n)}catch(e){}}},L="__tea_cache_",M="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)};var P=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init=function(e){t.isLog=e},this.info=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;t.isLog&&(a=console).log.apply(a,[t.prefix+e].concat(r))},this.warn=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;t.isLog&&(a=console).warn.apply(a,[t.prefix+e].concat(r))},this.error=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;t.isLog&&(a=console).error.apply(a,[t.prefix+e].concat(r))},this.dir=function(){var e;t.isLog&&(e=console).dir.apply(e,arguments)},this.table=function(e){t.isLog&&console.table(e)},this.logJSON=function(e){"object"===(void 0===e?"undefined":M(e))&&t.isLog&&t.info("",JSON.stringify(e,null,2))},this.deprecated=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.warn.apply(t,["[DEPRECATED]"+e].concat(r))},this.throw=function(e){throw t.error(t.prefix),new Error(e)};var r=n?"["+n+"]":"";this.prefix="[tea-sdk]"+r},B=new P,U=function(e,t,n,r){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=function(){try{var e=JSON.parse(i.responseText);n&&n(e)}catch(e){r&&r()}},i.onerror=function(){r&&r()},i.send(JSON.stringify(t))},I=(new Date).getTimezoneOffset(),j=parseInt(-I/60,10),z=60*I,N=void 0;try{N="3.2.7"}catch(w){N="2.x"}var F=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,e.call(this));return n.initClientEnv=function(){n.set("os_name",R.os_name),n.set("os_version",R.os_version),n.set("device_model",R.device_model),n.set("platform",R.platform),n.set("sdk_version",N),n.set("browser",R.browser),n.set("browser_version",R.browser_version),n.set("language",R.language),n.set("timezone",j),n.set("tz_offset",z),n.set("resolution",R.screen_width+"x"+R.screen_height),n.set("screen_width",R.screen_width),n.set("screen_height",R.screen_height),n.set("referrer",R.referrer),n.set("referrer_host",R.referrer_host),n.set("utm_source",R.utm_source),n.set("utm_medium",R.utm_medium),n.set("utm_campaign",R.utm_campaign),n.set("utm_term",R.utm_term),n.set("utm_content",R.utm_content)},n.initClientEnv(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o)),V=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.isString=function(e){return"String"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isNumber=function(e){return"Number"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isBoolean=function(e){return"Boolean"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isFunction=function(e){return"Function"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isNull=function(e){return"Null"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isUndefined=function(e){return"Undefined"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isObj=function(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isArray=function(e){return"Array"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isFalse=function(e){return""===e||null==e||"null"===e||"undefined"===e||0===e||!1===e||NaN===e},e.prototype.isTrue=function(e){return!this.isFalse(e)},e.prototype.isLowIE=function(){return window.XDomainRequest},e}()),q=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var a=String.fromCharCode(n+97);r=e.split(a);for(var o=0;o<r.length;o++){var s=parseInt(r[o],n);s=1*s^64;var l=String.fromCharCode(s);i.push(l)}return i.join("")}}(e,0,25)};function H(e){return e?(e^16*Math.random()>>e/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,H)}var W=function(){return H().replace(/-/g,"").slice(0,19)},X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},Y=function(e){try{var t=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]+)"));return decodeURIComponent(t?t[1]:"")}catch(e){return""}},K=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,e.call(this));return n.init=function(e){var t=e.app_id,r=e.channel,i=e.log,a=e.channel_domain,o=e.name;if("number"!=typeof t)throw new Error("app_id \u5fc5\u987b\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u6ce8\u610f\u68c0\u67e5\u662f\u5426\u662f\u4ee5`string`\u7684\u65b9\u5f0f\u4f20\u5165\u7684\uff1f");n.logger=new P(o),n.logger.init(i),n.initConfigs(e),n.initUrls(r,a),n.setEnv("app_id",t)},n.initConfigs=function(e){var t=e.app_id,r=e.disable_ssid,i=e.disable_webid,a=e.disable_sdk_monitor;n.app_id=t,n.evtDataCacheKey=L+"events_"+t,r&&(n.logger.info("ssid\u5df2\u7981\u7528\uff0c\u8bbe\u7f6euser_unique_id\u4e0d\u4f1a\u8bf7\u6c42ssid\u63a5\u53e3\u3002"),n.isSsidDisabled=!0),i&&(n.logger.info("webid\u670d\u52a1\u5df2\u7981\u7528\uff0cssid\u540c\u65f6\u88ab\u7981\u7528\u3002\u5c06\u672c\u5730\u751f\u6210webid\u3002"),n.isWebidDisabled=!0,n.isSsidDisabled=!0),a&&(n.logger.info("SDK\u76d1\u63a7\u5df2\u7981\u7528\u3002"),n.isSdkMonitorDisabled=!0)},n.initUrls=function(e,t){if("internal"===e&&(n.logger.warn("channel \u7684\u503c internal \u5df2\u88ab\u5e9f\u5f03\uff0c\u5df2\u81ea\u52a8\u6539\u4e3a cn\u3002"),e="cn"),!t&&!G[e])throw new Error("channel \u53d8\u91cf\u53ea\u80fd\u662f `cn`, `sg`,`va`");var r=t||q(G[e]);r=r.replace(/\/+$/,""),n.reportUrl=r+"/v1/list",n.userTokensPrefix=""+r},n.setEnv=function(e,t){if("app_id"===e&&n.checkUserToken(t),"user_unique_id"===e){if(n.blackUuid.some(function(e){return e===String(t)}))return void n.logger.warn('\u8bbe\u7f6e\u4e86\u65e0\u6548\u7684\u503c {user_unique_id\uff1a"%s"}\u3002\u8be5\u64cd\u4f5c\u5df2\u5ffd\u7565\u3002',t);n.verifyTokens(t)}if("web_id"===e){if(!t)return;(!n.envInfo.user.user_unique_id||n.envInfo.user.user_unique_id&&n.envInfo.user.user_unique_id===n.envInfo.user.web_id)&&n.set("user_unique_id",t)}n.set(e,t)},n.transferFromCookie=function(){var e=n.tokensCacheKey,t=Y("tt_webid"),r=Y("__tea_sdk__ssid"),i=Y("__tea_sdk__user_unique_id");if(V.isLowIE()){if(t){var a={web_id:t,ssid:t,user_unique_id:t};C.set(e,JSON.stringify(a))}return!1}if(t&&r&&i){var o={web_id:t,ssid:r,user_unique_id:i};C.set(e,JSON.stringify(o))}},n.purifyBlackUuid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.blackUuid.some(function(t){return t===e.user_unique_id})){var t={};return n.setUserTokens(t),n.logger.warn('\u68c0\u6d4b\u5230\u65e0\u6548\u7684\u7528\u6237\u6807\u8bc6\uff0c\u5df2\u91cd\u7f6e\u7528\u6237\u72b6\u6001\u3002{user_unique_id: "%s"}',e.user_unique_id),t}return e},n.getUserTokens=function(){return C.get(n.tokensCacheKey)||{}},n.setUserTokens=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C.set(n.tokensCacheKey,e)},n.checkUserToken=function(e){var t=L+"tokens_"+e;n.tokensCacheKey=t,n.transferFromCookie();var r=n.purifyBlackUuid(n.getUserTokens());r.user_unique_id&&r.web_id?(n.envInfo.user.user_unique_id=r.user_unique_id,n.envInfo.user.web_id=r.web_id,n.envInfo.user.ssid=r.ssid||"",n.logger.info("\u521d\u59cb\u5316\u5df2\u7ecf\u68c0\u6d4b\u5230\u4e86 webid user_unique_id\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u9700\u8981\u518d\u6b21\u9a8c\u8bc1 id \u4e86"),n.unlock()):n.requestWebId(e)},n.saveTokenToStorage=function(e){var t=e.web_id,r=e.ssid,i=e.user_unique_id;n.setUserTokens({web_id:t,ssid:r,user_unique_id:i})},n.requestWebId=function(){n.isRequestWebId=!0;var e=function(e){var t=n.envInfo.user.web_id||e.web_id,r=e.ssid;n.isRequestWebId=!1,n.envInfo.user.ssid=r,n.envInfo.user.web_id=t,n.envInfo.user.user_unique_id=t,n.saveTokenToStorage({web_id:t,ssid:r,user_unique_id:t}),n.waitForVerifyTokens?(n.lock(),n.verifyTokens(n.realUuid)):(n.unlock(),n.callback&&n.callback())};n.isWebidDisabled?e({web_id:W(),ssid:""}):function(){var t=n.userTokensPrefix+"/v1/user/webid";U(t,{app_id:n.app_id,url:location.href,user_agent:R.userAgent,referer:R.referrer,user_unique_id:""},function(t){0!==t.e?n.logger.error("\u8bf7\u6c42 webid \u5931\u8d25\u3002\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u3002"):e(t)},function(){n.isRequestWebId=!1,n.logger.error("\u83b7\u53d6 webid \u5931\u8d25\uff0c\u6570\u636e\u5c06\u4e0d\u4f1a\u88ab\u4e0a\u62a5")})}()},n.verifyTokens=function(e){var t=n.tokensCacheKey;if(n.waitForVerifyTokens=!1,n.realUuid=""+e,n.isRequestWebId)return n.waitForVerifyTokens=!0,n.logger.info("\u6b63\u5728\u8bf7\u6c42 webid\uff0crequestSsid \u5c06\u4f1a\u5728\u524d\u8005\u8bf7\u6c42\u5b8c\u6bd5\u4e4b\u540e\u88ab\u8c03\u7528"),!1;var r=n.getUserTokens();if(r.user_unique_id===n.realUuid&&r.ssid&&r.web_id)n.logger.info("\u4f20\u5165\u7684 user_id/user_unique_id \u4e0e \u7f13\u5b58\u4e2d\u7684\u5b8c\u5168\u4e00\u81f4\uff0c\u65e0\u9700\u518d\u6b21\u8bf7\u6c42"),n.unlock();else{n.lock(),n.envInfo.user.user_unique_id=n.realUuid;var i=X({},n.getUserTokens(),{user_unique_id:n.realUuid});if(C.set(t,JSON.stringify(i)),V.isLowIE())return n.unlock(),!1;n.isSsidDisabled?(n.unlock(),n.callback&&n.callback()):n.requestSsid()}},n.requestSsid=function(){var e=n.getUserTokens(),t=n.userTokensPrefix+"/v1/user/ssid";U(t,{app_id:n.app_id,web_id:e.web_id,user_unique_id:""+e.user_unique_id},function(t){if(n.unlock(),0!==t.e)n.logger.error("\u8bf7\u6c42 ssid \u5931\u8d25~");else{n.envInfo.user.ssid=t.ssid;var r=X({},e,{ssid:t.ssid});n.setUserTokens(r),n.logger.info("\u6839\u636e user_unique_id \u66f4\u65b0 ssid \u6210\u529f\uff01\u6ce8\u610f\uff1a\u5728\u8fd9\u4e4b\u524d\u4e0d\u5e94\u8be5\u6709\u6570\u636e\u88ab\u53d1\u51fa\u53bb"),n.callback&&n.callback()}},function(){n.unlock(),n.logger.error("\u6839\u636e user_unique_id \u83b7\u53d6\u65b0 ssid \u5931\u8d25")})},n.setEvtParams=function(e){var t=X({},e);Object.keys(t).forEach(function(e){n.evtParams[e]=t[e]})},n.mergeEnvToEvents=function(e){var t=n.mergeEnv(),r=[],i=0,a=void 0;return e.forEach(function(e){var t=!!e.params.__disable_storage__;void 0===a?a=t:(t!==a||r[i].length>=5)&&(i+=1,a=!a),r[i]=r[i]||[],r[i].push(e)}),r.map(function(e){return{events:e.map(function(e){var t=X({},n.evtParams,e.params);return delete t.__disable_storage__,X({},e,{params:JSON.stringify(t)})}),user:t.user,header:t.header,verbose:n.debugMode?1:void 0,__disable_storage__:e[0].params.__disable_storage__}})},n.mergeEnv=function(){var e=n.get(),t=F.get(),r=X({},e.user),i=X({},t.header.headers.custom,e.header.headers.custom),a=X({},t.header.headers,e.header.headers,{custom:i}),o=X({},t.header,e.header);return{user:r,header:X({},o,{headers:JSON.stringify(a)})}},n.evtParams={},n.reportUrl="",n.userTokensPrefix="",n.isSsidDisabled=!1,n.isWebidDisabled=!1,n.isSdkMonitorDisabled=!1,n.debugMode=!1,n.blackUuid=["null","undefined","0","","None"],n.logger=function(){},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.lock=function(){this.isUserTokensReady=!1},t.prototype.unlock=function(){this.isUserTokensReady=!0},t.prototype.enableDebugMode=function(e){this.debugMode=e},t}(o),J=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set=function(e,n){t.cache[e]=n},this.get=function(e){return t.cache[e]},this.clean=function(e){t.cache[e]=void 0},this.cache={}},$=new J,Q=function(){function e(t){var n=t.disable_storage,r=void 0!==n&&n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isPersistent=!r,this._storage=this._isPersistent?C:new J,this._storageKey="",this._data=void 0}return e.prototype.setStorageKey=function(e){this._storageKey=e},e.prototype.getAllEvents=function(){var e=this.getData();Object.keys(e).reduce(function(t,n){return t.concat(e[n]||[])},[])},e.prototype.getData=function(){return this._checkIsDataInit(),this._data},e.prototype.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._checkIsDataInit(),0!==t.length&&(this._data[e]=t,this._save())},e.prototype.delete=function(e){this._checkIsDataInit(),this._data[e]&&(delete this._data[e],this._save())},e.prototype._checkIsDataInit=function(){if(void 0===this._data)try{var e,t=this._getDataFromStorage();V.isArray(t)?(this._data=((e={})[W()]=t,e),this._save()):this._data=t}catch(e){this._data={}}},e.prototype._checkStorageKey=function(){if(!this._storageKey)throw new Error("must call setStorageKey('xxx') first")},e.prototype._getDataFromStorage=function(){return this._checkStorageKey(),this._storage.get(this._storageKey)||{}},e.prototype._save=function(){this._checkStorageKey(),this._storage.set(this._storageKey,this._data)},e}(),Z=function(e,t){if(window.XDomainRequest)return function(e,t){try{var n=e.split("v1")[0];t.forEach(function(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return"&"===t[0]?t.slice(1):t}(e),r=new Image(1,1);r.onload=function(){r=null},r.onerror=function(){r=null},r.src=n+"/v1/gif?"+t})}catch(e){}}(e,t);var n=new XMLHttpRequest;n.open("POST",e+"?rdn="+Math.random(),!0),n.onload=function(){},n.onerror=function(){n.abort()},n.send(JSON.stringify(t))},ee=function e(t,n,r,i){try{var a=t.split("v1")[0];if(!a)return void i(t,n,4001);n.forEach(function(e){var o=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return"&"===t[0]?t.slice(1):t}(e),s=new Image(1,1);s.onload=function(){s=null,r()},s.onerror=function(){s=null,i(t,n,4e3)},s.src=a+"/v1/gif?"+o})}catch(e){i(t,n,4002,e.message)}},te=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.send=function(e){var t=e.url,r=e.data,i=e.success,a=e.fail,o=e.eventError;if(function(e){var t=e.url,n=e.data,r=e.success,i=e.fail,a=e.notSure,o=e.isUnload,s=n;if(window.XDomainRequest)ee(t,s,r,i);else{if(o)return window.navigator&&window.navigator.sendBeacon?(a(),void(window.navigator.sendBeacon(t,JSON.stringify(s))?r():i(t,n,4003))):void ee(t,s,r,i);var l=new XMLHttpRequest;l.open("POST",t+"?rdn="+Math.random(),!0),l.onload=function(){r(t,s,l.responseText)},l.onerror=function(){l.abort(),i(t,s,500)},l.send(JSON.stringify(s))}}({url:t,data:r,success:function(e,t,r){i();try{var a=JSON.parse(r).e;if(0!==a){var s="\u672a\u77e5\u9519\u8bef";-2===a&&(s="\u4e8b\u4ef6\u683c\u5f0f\u9519\u8bef\uff01\u8bf7\u68c0\u67e5\u5b57\u6bb5\u7c7b\u578b\u662f\u5426\u6b63\u786e\u3002"),n.logger.error("\u6570\u636e\u4e0a\u62a5\u5931\u8d25\uff01","\u9519\u8bef\u7801\uff1a"+a+"\u3002\u9519\u8bef\u4fe1\u606f\uff1a"+s),o(t,a),re(e,t,a)}}catch(n){re(e,t,5001)}},fail:function(e,t,r){n.logger.error("\u6570\u636e\u4e0a\u62a5\u5931\u8d25\uff01","\u9519\u8bef\u7801\uff1a"+r),a(t,r),re(e,t,r)},notSure:e.notSure,isUnload:e.isUnload}),!n.isSdkMonitorDisabled&&!n.isSdkOnLoadEventReady){n.isSdkOnLoadEventReady=!0;try{var s=r[0].header,l=r[0].user;ne(t,{app_id:s.app_id,app_name:s.app_name,sdk_version:s.sdk_version,web_id:l.web_id})}catch(e){}}},this.logger=t.logger||B,this.isSdkOnLoadEventReady=!1,this.isSdkMonitorDisabled=!1},ne=function(e,t){try{var n={events:[{event:"onload",params:JSON.stringify({app_id:t.app_id,app_name:t.app_name||"",sdk_version:t.sdk_version}),local_time_ms:Date.now()}],user:{user_unique_id:t.web_id},header:{app_id:1338}};setTimeout(function(){Z(e,[n])},16)}catch(e){}},re=function(e,t,n){try{var r=t[0].user,i=t[0].header,a=[];t.forEach(function(e){e.events.forEach(function(e){a.push(e)})});var o={events:a.map(function(e){return{event:"on_error",params:JSON.stringify({error_code:n,app_id:i.app_id,app_name:i.app_name||"",error_event:e.event,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(i),user:JSON.stringify(r)}),local_time_ms:Date.now()}}),user:{user_unique_id:r.user_unique_id},header:{app_id:1338}};setTimeout(function(){Z(e,[o])},16)}catch(e){}},ie=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,e.call(this));i.addListener=function(){window.addEventListener("unload",function(){i.report(!0)},!1),window.addEventListener("beforeunload",function(){i.report(!0)},!1),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&i.report(!0)},!1)},i.setReady=function(e){i.isReady=e,i.eventSender.isSdkMonitorDisabled=i.isSdkMonitorDisabled,i.checkAndSendCachedStorageEvents(),i.report()},i.eventReportTimer=null,i.event=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.get(i.evtDataCacheKey)||[],r=t?[].concat(e,n):[].concat(n,e);$.set(i.evtDataCacheKey,r),r.length>=5?i.report():(i.eventReportTimer&&clearTimeout(i.eventReportTimer),i.eventReportTimer=setTimeout(function(){i.report(),i.eventReportTimer=null},i.waitForBatchTime))},i.report=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!i.isUserTokensReady)return!1;if(!i.isReady)return!1;var t=$.get(i.evtDataCacheKey)||[];$.clean(i.evtDataCacheKey);var n=i.mergeEnvToEvents(t);i.sendData(n,e)},i.sendData=function(e,t){var n=[],r=0,a=void 0;e.forEach(function(e){var t=!!e.__disable_storage__;void 0===a?a=t:(t!==a||n[r].length>=5)&&(r+=1,a=!a),n[r]=n[r]||[],n[r].push(e)}),n.forEach(function(e){var n=W();e[0].__disable_storage__||i.eventStorage.add(n,e),i._sendData(n,e,t)})},i.checkAndSendCachedStorageEvents=function(){var e=i.eventStorage.getData(),t=Object.keys(e);t.length>0&&t.forEach(function(t){i._sendData(t,e[t])})},i._sendData=function(e,t,n){i.isReporting=!0;var r=function(){i.isReporting=!1};i.eventSender.send({url:i.reportUrl,data:t,success:function(){r(),i.sendDataSuccess(e)},fail:function(e,t){r(),i.reportErrorCallback(e,t),setTimeout(function(){i.report()},3e3)},eventError:function(e,t){i.reportErrorCallback(e,t)},notSure:r,isUnload:n})},i.sendDataSuccess=function(e){i.eventStorage.delete(e),i.report()};var a=n.log,o=n.disable_storage,s=n.max_batch_num,l=void 0===s?5:s,u=n.batch_time,d=void 0===u?30:u;return i.init(n),i.maxBatchNum=l,i.waitForBatchTime=d,i.isReady=!1,i.addListener(),i.enableDebugMode(!!a),i.eventStorage=new Q({disable_storage:o}),i.eventStorage.setStorageKey(i.evtDataCacheKey),i.eventSender=new te({logger:i.logger}),i.reportErrorCallback=function(){},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(K),ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe=function(){var e=+Date.now()+Number((""+Math.random()).slice(2,8));return function(){return e+=1}}(),se=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e){if(!V.isObj(e))throw new Error("init \u7684\u53c2\u6570\u5fc5\u987b\u662fObject\u7c7b\u578b");n.logger.init(e.log),n.channel=new ie(ae({},e,{name:n.name})),n.channel.callback=function(){n.callbackSend&&n.start()}},this.config=function(e){V.isObj(e)||n.logger.throw("config \u53c2\u6570\u5fc5\u987b\u662f {} \u7684\u683c\u5f0f"),e.log&&(n.logger.init(!0),n.channel.enableDebugMode(!0),e.log=null);var t=Object.keys(e);if(!t.length)return!1;var r=t,i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(a>=r.length)break;o=r[a++]}else{if((a=r.next()).done)break;o=a.value}var s=o,l=e[s];switch(s){case"evtParams":n.channel.setEvtParams(l);break;case"disable_ssid":n.logger.deprecated("(disable_ssid)\u8bf7\u901a\u8fc7init\u51fd\u6570\u6765\u8bbe\u7f6e\u3002"),l&&(n.logger.info("ssid\u5df2\u7981\u7528\uff0c\u8bbe\u7f6euser_unique_id\u4e0d\u4f1a\u8bf7\u6c42ssid\u63a5\u53e3\u3002"),n.channel.isSsidDisabled=l);break;case"disable_auto_pv":l&&(n.logger.info("\u5df2\u7981\u6b62\u9ed8\u8ba4\u4e0a\u62a5predefine_pageview\u4e8b\u4ef6\uff0c\u9700\u624b\u52a8\u4e0a\u62a5\u3002"),n._autoSendPV=!1);break;case"_staging_flag":""+l=="1"&&n.logger.info("\u6839\u636e_staging_flag\u8bbe\u7f6e\uff0c\u6570\u636e\u5c06\u4f1a\u4e0a\u62a5\u5230stag \u8868\u3002"),n.channel.setEvtParams({_staging_flag:Number(l)});break;case"reportErrorCallback":"function"==typeof l&&(n.channel.reportErrorCallback=l);break;default:n.channel.setEnv(s,l)}}},this.send=function(){n.start()},this.start=function(){if(n.channel.isUserTokensReady){if(n._isSendFuncCalled)return;n._isSendFuncCalled=!0,n.logger.info("\u770b\u5230\u672c\u63d0\u793a\uff0c\u610f\u5473\u7740\u7528\u6237\u4fe1\u606f\u5df2\u5b8c\u5168\u5c31\u7eea\uff0c\u4e0a\u62a5\u901a\u9053\u6253\u5f00\u3002\u7528\u6237\u6807\u8bc6\u5982\u4e0b\uff1a"),n.logger.logJSON(n.channel.get().user),n._autoSendPV&&n.predefinePageView(),n.channel.setReady(!0)}else n.callbackSend=!0},this.predefinePageView=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:document.title||location.pathname,url:location.href,url_path:location.pathname},r=ae({},t,e);n.event("predefine_pageview",r,!0)},this.event=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=V.isBoolean(t[t.length-1]),a=!!i&&t[t.length-1],o=i?t.slice(0,t.length-1):t,s=o[0],l=[];V.isArray(s)?l=o:l[0]=o,l=l.map(function(e){return function(e,t){var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;return V.isObj(r)||(r={}),r.event_index=oe(),{event:n,params:r,local_time_ms:+new Date}}.apply(void 0,e)}),n.channel.event(l,a)},this._isSendFuncCalled=!1,this._autoSendPV=!0,this.name=t,this.logger=new P(t)};se.exportMethods=["init","config","send","start","predefinePageView"],t.default=function e(t){var n=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._exportCollect=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n._isQueueProcessed?n._executeCmd.apply(n,t):(n.cmdQueue.push(t),n._processCmdQueue())},this._processCmdQueue=function(){if(0!==n.cmdQueue.length){var e=function(e,t,n){var r=-1;return e.forEach(function(e,t){"init"===e[0]&&(r=t)}),r}(n.cmdQueue);-1!==e&&(n._isQueueProcessed=!0,n._executeCmd.apply(n,n.cmdQueue[e]),n.cmdQueue.forEach(function(t,r){r!==e&&n._executeCmd.apply(n,t)}),n.cmdQueue=[])}},this._executeCmd=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,a,o=t[0];se.exportMethods.indexOf(o)>-1?(i=n.colloctor)[o].apply(i,t.slice(1)):(a=n.colloctor).event.apply(a,t)},this.name=t||"Collector"+ +new Date,this.cmdQueue=[],this.colloctor=new se(this.name),this._isQueueProcessed=!1,this._processCmdQueue(),this._exportCollect.init=this._exportCollect.bind(this,"init"),this._exportCollect.config=this._exportCollect.bind(this,"config"),this._exportCollect.send=this._exportCollect.bind(this,"send"),this._exportCollect.start=this._exportCollect.bind(this,"start"),this._exportCollect.predefinePageView=this._exportCollect.bind(this,"predefinePageView"),this._exportCollect},e.exports=t.default},function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=E(n(0)),i=E(n(38)),a=E(n(39)),o=E(n(40)),s=E(n(41)),l=E(n(42)),u=E(n(43)),d=E(n(44)),c=E(n(45)),f=E(n(46)),p=E(n(47)),h=E(n(48)),g=E(n(49)),y=E(n(50)),v=E(n(51)),m=E(n(52)),x=E(n(53)),b=E(n(54)),_=E(n(55)),k=E(n(56)),w=E(n(7));function E(e){return e&&e.__esModule?e:{default:e}}E(n(57));var S={};function T(e,t,n){var r=e;t.map(function(e,i){r[e]=i==t.length-1?n:r[e]||{},r=r[e]})}T(S,["controls","collect"],w.default),T(S,["controls","cssFullscreen"],k.default),T(S,["controls","danmu"],_.default),T(S,["controls","definition"],b.default),T(S,["controls","download"],x.default),T(S,["controls","fullscreen"],m.default),T(S,["controls","i18n"],v.default),T(S,["controls","localPreview"],y.default),T(S,["controls","logger"],g.default),T(S,["controls","memoryPlay"],h.default),T(S,["controls","mobile"],p.default),T(S,["controls","pc"],f.default),T(S,["controls","pip"],c.default),T(S,["controls","play"],d.default),T(S,["controls","playNext"],u.default),T(S,["controls","replay"],l.default),T(S,["controls","rotate"],s.default),T(S,["controls","screenShot"],o.default),T(S,["controls","start"],a.default),T(S,["controls","volume"],i.default),t.default=r.default,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(11)),a=s(n(3)),o=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logParams={bc:0,bu_acu_t:0,played:[]},this._hasStart=!1,this.videoConfig={controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"webkit-playsinline":t.playsinline,"x5-playsinline":t.playsinline,"x5-video-player-type":t["x5-video-player-type"],"x5-video-player-fullscreen":t["x5-video-player-fullscreen"],"x5-video-orientation":t["x5-video-orientation"],airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.loop&&(this.videoConfig.loop="loop");var n="";if(t.textTrack&&Array.isArray(t.textTrack)&&(navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Firefox")>-1)&&(t.textTrack.some(function(e){if(e.src&&e.label&&e.default)return n+='<track src="'+e.src+'" ',e.kind&&(n+='kind="'+e.kind+'" '),n+='label="'+e.label+'" ',e.srclang&&(n+='srclang="'+e.srclang+'" '),n+=(e.default?"default":"")+">",!0}),this.videoConfig.crossorigin="anonymous"),t.textTrackStyle){var r=document.createElement("style");this.textTrackStyle=r,document.head.appendChild(r);var s="";for(var l in t.textTrackStyle)s+=l+": "+t.textTrackStyle[l]+";";var u=t.id?"#"+t.id:t.el.id?"#"+t.el.id:"."+t.el.className;r.sheet.insertRule?r.sheet.insertRule(u+" video::cue { "+s+" }",0):r.sheet.addRule&&r.sheet.addRule(u+" video::cue",s)}this.video=a.default.createDom(this.videoConfig.mediaType,n,this.videoConfig,""),t.autoplay&&(this.video.autoplay=!0,t.autoplayMuted&&(this.video.muted=!0)),this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata"].map(function(e){return t={},n=e,r="on"+e.charAt(0).toUpperCase()+e.slice(1),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t;var t,n,r}),(0,i.default)(this),this._interval={};var d="0,0",c=this;this.ev.forEach(function(e){c.evItem=Object.keys(e)[0];var t=Object.keys(e)[0];c.video.addEventListener(Object.keys(e)[0],function(){c.logParams&&("play"===t?c.hasStart=!0:"waiting"===t?(c.logParams.bc++,c.inWaitingStart=(new Date).getTime()):"playing"===t?c.inWaitingStart&&(c.logParams.bu_acu_t+=(new Date).getTime()-c.inWaitingStart,c.inWaitingStart=void 0):"loadeddata"===t?c.logParams.played.push({begin:0,end:-1}):"seeking"===t?c.logParams.played.push({begin:c.video.currentTime,end:-1}):c&&c.logParams&&c.logParams.played&&"timeupdate"===t&&(c.logParams.played.length<1&&c.logParams.played.push({begin:c.video.currentTime,end:-1}),c.logParams.played[c.logParams.played.length-1].end=c.video.currentTime),"error"===t?c.video.error&&c.emit(t,new o.default("other",c.currentTime,c.duration,c.networkState,c.readyState,c.currentSrc,c.src,c.ended,{line:41,msg:c.error,handle:"Constructor"})):c.emit(t,c),c.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(t)<0?(clearInterval(c._interval.bufferedChange),a.default.setInterval(c,"bufferedChange",function(){for(var e=[],t=0,n=c.video.buffered.length;t<n;t++)e.push([c.video.buffered.start(t),c.video.buffered.end(t)]);e.toString()!==d&&(d=e.toString(),c.emit("bufferedChange",e))},200)):"timeupdate"!==t&&a.default.clearInterval(c,"bufferedChange")))},!1)})}return r(e,[{key:"destroy",value:function(){this.textTrackStyle&&this.textTrackStyle.parentNode.removeChild(this.textTrackStyle)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"canPlayType",value:function(){this.video.canPlayType()}},{key:"getBufferedRange",value:function(){var e=[0,0],t=this.video,n=t.buffered,r=t.currentTime;if(n)for(var i=0,a=n.length;i<a&&(e[0]=n.start(i),e[1]=n.end(i),!(e[0]<=r&&r<=e[1]));i++);return e[0]-r<=0&&r-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"!=typeof e||!0!==e||this._hasStart||(this._hasStart=!0,this.emit("hasstart"))}},{key:"autoplay",set:function(e){this.video.autoplay=e},get:function(){return this.video.autoplay}},{key:"buffered",get:function(){return this.video.buffered}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return this.video.currentTime},set:function(e){this.video.currentTime=e}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this.video.duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"\u53d6\u56de\u8fc7\u7a0b\u88ab\u7528\u6237\u4e2d\u6b62"},{en:"MEDIA_ERR_NETWORK",cn:"\u5f53\u4e0b\u8f7d\u65f6\u53d1\u751f\u9519\u8bef"},{en:"MEDIA_ERR_DECODE",cn:"\u5f53\u89e3\u7801\u65f6\u53d1\u751f\u9519\u8bef"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"\u4e0d\u652f\u6301\u97f3\u9891/\u89c6\u9891"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){var e=[{en:"NETWORK_EMPTY",cn:"\u97f3\u9891/\u89c6\u9891\u5c1a\u672a\u521d\u59cb\u5316"},{en:"NETWORK_IDLE",cn:"\u97f3\u9891/\u89c6\u9891\u662f\u6d3b\u52a8\u7684\u4e14\u5df2\u9009\u53d6\u8d44\u6e90\uff0c\u4f46\u5e76\u672a\u4f7f\u7528\u7f51\u7edc"},{en:"NETWORK_LOADING",cn:"\u6d4f\u89c8\u5668\u6b63\u5728\u4e0b\u8f7d\u6570\u636e"},{en:"NETWORK_NO_SOURCE",cn:"\u672a\u627e\u5230\u97f3\u9891/\u89c6\u9891\u6765\u6e90"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){var e=[{en:"HAVE_NOTHING",cn:"\u6ca1\u6709\u5173\u4e8e\u97f3\u9891/\u89c6\u9891\u662f\u5426\u5c31\u7eea\u7684\u4fe1\u606f"},{en:"HAVE_METADATA",cn:"\u5173\u4e8e\u97f3\u9891/\u89c6\u9891\u5c31\u7eea\u7684\u5143\u6570\u636e"},{en:"HAVE_CURRENT_DATA",cn:"\u5173\u4e8e\u5f53\u524d\u64ad\u653e\u4f4d\u7f6e\u7684\u6570\u636e\u662f\u53ef\u7528\u7684\uff0c\u4f46\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u64ad\u653e\u4e0b\u4e00\u5e27/\u6beb\u79d2"},{en:"HAVE_FUTURE_DATA",cn:"\u5f53\u524d\u53ca\u81f3\u5c11\u4e0b\u4e00\u5e27\u7684\u6570\u636e\u662f\u53ef\u7528\u7684"},{en:"HAVE_ENOUGH_DATA",cn:"\u53ef\u7528\u6570\u636e\u8db3\u4ee5\u5f00\u59cb\u64ad\u653e"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){var t=this;a.default.hasClass(this.root,"xgplayer-ended")||this.emit("urlchange",JSON.parse(JSON.stringify(t.logParams))),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.video.pause(),this.video.src=e,this.logParams.playSrc=e,this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.once("loadeddata",function e(){t.logParams.vt=(new Date).getTime(),t.logParams.pt>t.logParams.vt&&(t.logParams.pt=t.logParams.vt),t.logParams.vd=t.video.duration,t.off("loadeddata",e)})}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"fullscreen",get:function(){return a.default.hasClass(this.root,"xgplayer-is-fullscreen")||a.default.hasClass(this.root,"xgplayer-fullscreen-active")}},{key:"bullet",get:function(){return!!a.default.findDom(this.root,"xg-bullet")&&a.default.hasClass(a.default.findDom(this.root,"xg-bullet"),"xgplayer-has-bullet")}},{key:"textTrack",get:function(){return a.default.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function(){return a.default.hasClass(this.root,"xgplayer-pip-active")}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r,i,a,o,s,l,u,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(12),f=n(29),p=Function.prototype.apply,h=Function.prototype.call,g=Object.create,y=Object.defineProperty,v=Object.defineProperties,m=Object.prototype.hasOwnProperty,x={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){a.call(i,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},s={on:r=function(e,t){var n;return f(t),m.call(this,"__ee__")?n=this.__ee__:(n=x.value=g(null),y(this,"__ee__",x),x.value=null),n[e]?"object"===d(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i,off:a=function(e,t){var n,r,i,a;if(f(t),!m.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"===(void 0===(r=n[e])?"undefined":d(r)))for(a=0;i=r[a];++a)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[a?0:1]:r.splice(a,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,r,i,a;if(m.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"===(void 0===i?"undefined":d(i))){for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)p.call(r,this,a)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];p.call(i,this,a)}}},l={on:c(r),once:c(i),off:c(a),emit:c(o)},u=v({},l),e.exports=t=function(e){return null==e?g(u):v(Object(e),l)},t.methods=s},function(e,t,n){"use strict";var r=n(2),i=n(13),a=n(17),o=n(25),s=n(26);(e.exports=function(e,t){var n,i,l,u,d;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],r(e)?(n=s.call(e,"c"),i=s.call(e,"e"),l=s.call(e,"w")):(n=l=!0,i=!1),d={value:t,configurable:n,enumerable:i,writable:l},u?a(o(u),d):d}).gs=function(e,t,n){var l,u,d,c;return"string"!=typeof e?(d=n,n=t,t=e,e=null):d=arguments[3],r(t)?i(t)?r(n)?i(n)||(d=n,n=void 0):n=void 0:(d=t,t=n=void 0):t=void 0,r(e)?(l=s.call(e,"c"),u=s.call(e,"e")):(l=!0,u=!1),c={get:t,set:n,configurable:l,enumerable:u},d?a(o(d),c):c}},function(e,t,n){"use strict";var r=n(14),i=/^\s*class[\s{\/}]/,a=Function.prototype.toString;e.exports=function(e){return!!r(e)&&!i.test(a.call(e))}},function(e,t,n){"use strict";var r=n(15);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},function(e,t,n){"use strict";var r=n(16);e.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!i(e)&&hasOwnProperty.call(a,void 0===e?"undefined":r(e))}},function(e,t,n){"use strict";e.exports=n(18)()?Object.assign:n(19)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(20),i=n(24),a=Math.max;e.exports=function(e,t){var n,o,s,l=a(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},o=1;o<l;++o)t=arguments[o],r(t).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(21)()?Object.keys:n(22)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(1),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var r=n(1),i=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return i.call(arguments,function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=n(27)()?String.prototype.contains:n(28)},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return r(e,[{key:"openDB",value:function(e){var t=this,n=this,r=this.myDB.version||1,i=n.indexedDB.open(n.myDB.name,r);i.onerror=function(e){},i.onsuccess=function(r){t.myDB.db=r.target.result,e.call(n)},i.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=void 0,i=0;i<t.length;i++)(r=n.add(t[i])).onerror=function(){},r.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=void 0,i=0;i<t.length;i++)(r=n.put(t[i])).onerror=function(){},r.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var r=this,i=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);i.onerror=function(){n.call(r,null)},i.onsuccess=function(e){var t=e.target.result;n.call(r,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";var r,i,a;"function"==typeof Symbol&&Symbol.iterator,a=window,r=[n(32),n(33)],void 0===(i=function(e,t){return function(e,t,n){function r(e,t){for(var n in t)e[n]=t[n];return e}var i=e.jQuery;function a(e,t){this.element="string"==typeof e?document.querySelector(e):e,i&&(this.$element=i(this.element)),this.options=r({},this.constructor.defaults),this.option(t),this._create()}var o=a.prototype=Object.create(n.prototype);a.defaults={},o.option=function(e){r(this.options,e)};var s={relative:!0,absolute:!0,fixed:!0};function l(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}return o._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=r({},this.position);var e=getComputedStyle(this.element);s[e.position]||(this.element.style.position="relative"),this.on("pointerDown",this.onPointerDown),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},o.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},o.dispatchEvent=function(e,t,n){var r=[t].concat(n);this.emitEvent(e,r),this.dispatchJQueryEvent(e,t,n)},o.dispatchJQueryEvent=function(t,n,r){var i=e.jQuery;if(i&&this.$element){var a=i.Event(n);a.type=t,this.$element.trigger(a,r)}},o._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},o._getPositionCoord=function(e,n){if(-1!=e.indexOf("%")){var r=t(this.element.parentNode);return r?parseFloat(e)/100*r[n]:0}return parseInt(e,10)},o._addTransformPosition=function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),r=0===t.indexOf("matrix3d")?12:4,i=parseInt(n[r],10),a=parseInt(n[r+1],10);this.position.x+=i,this.position.y+=a}},o.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",e,[t])},o.dragStart=function(e,t){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate())},o.measureContainment=function(){var e=this.getContainer();if(e){var n=t(this.element),r=t(e),i=this.element.getBoundingClientRect(),a=e.getBoundingClientRect(),o=r.borderLeftWidth+r.borderRightWidth,s=r.borderTopWidth+r.borderBottomWidth,l=this.relativeStartPosition={x:i.left-(a.left+r.borderLeftWidth),y:i.top-(a.top+r.borderTopWidth)};this.containSize={width:r.width-o-l.x-n.width,height:r.height-s-l.y-n.height}}},o.getContainer=function(){var e=this.options.containment;if(e)return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):this.element.parentNode},o.onPointerMove=function(e,t,n){this.dispatchJQueryEvent("pointerMove",e,[t,n])},o.dragMove=function(e,t,n){if(this.isEnabled){var r=n.x,i=n.y,a=this.options.grid,o=a&&a[0],s=a&&a[1];r=l(r,o),i=l(i,s),r=this.containDrag("x",r,o),i=this.containDrag("y",i,s),r="y"==this.options.axis?0:r,i="x"==this.options.axis?0:i,this.position.x=this.startPosition.x+r,this.position.y=this.startPosition.y+i,this.dragPoint.x=r,this.dragPoint.y=i,this.dispatchEvent("dragMove",e,[t,n])}},o.containDrag=function(e,t,n){if(!this.options.containment)return t;var r="x"==e?"width":"height",i=l(-this.relativeStartPosition[e],n,"ceil"),a=this.containSize[r];return a=l(a,n,"floor"),Math.max(i,Math.min(a,t))},o.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",e,[t])},o.dragEnd=function(e,t){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t]))},o.animate=function(){if(this.isDragging){this.positionDrag();var e=this;requestAnimationFrame(function(){e.animate()})}},o.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},o.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},o.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},o.setPosition=function(e,t){this.position.x=e,this.position.y=t,this.setLeftTop()},o.enable=function(){this.isEnabled=!0},o.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},o.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},o._init=function(){},i&&i.bridget&&i.bridget("draggabilly",a),a}(a,e,t)}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";var r,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,void 0===(i="function"==typeof(r=function(){function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=n.length;function i(e){var n=getComputedStyle(e);return n||t("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),n}var o,s=!1;return function t(l){if(function(){if(!s){s=!0;var n=document.createElement("div");n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style.boxSizing="border-box";var r=document.body||document.documentElement;r.appendChild(n);var a=i(n);o=200==Math.round(e(a.width)),t.isBoxSizeOuter=o,r.removeChild(n)}}(),"string"==typeof l&&(l=document.querySelector(l)),l&&"object"==(void 0===l?"undefined":a(l))&&l.nodeType){var u=i(l);if("none"==u.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<r;t++)e[n[t]]=0;return e}();var d={};d.width=l.offsetWidth,d.height=l.offsetHeight;for(var c=d.isBorderBox="border-box"==u.boxSizing,f=0;f<r;f++){var p=n[f],h=u[p],g=parseFloat(h);d[p]=isNaN(g)?0:g}var y=d.paddingLeft+d.paddingRight,v=d.paddingTop+d.paddingBottom,m=d.marginLeft+d.marginRight,x=d.marginTop+d.marginBottom,b=d.borderLeftWidth+d.borderRightWidth,_=d.borderTopWidth+d.borderBottomWidth,k=c&&o,w=e(u.width);!1!==w&&(d.width=w+(k?0:y+b));var E=e(u.height);return!1!==E&&(d.height=E+(k?0:v+_)),d.innerWidth=d.width-(y+b),d.innerHeight=d.height-(v+_),d.outerWidth=d.width+m,d.outerHeight=d.height+x,d}}})?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){"use strict";var r,i,a;"function"==typeof Symbol&&Symbol.iterator,a=window,r=[n(34)],void 0===(i=function(e){return function(e,t){function n(){}var r=n.prototype=Object.create(t.prototype);r.bindHandles=function(){this._bindHandles(!0)},r.unbindHandles=function(){this._bindHandles(!1)},r._bindHandles=function(t){for(var n=(t=void 0===t||t)?"addEventListener":"removeEventListener",r=t?this._touchActionValue:"",i=0;i<this.handles.length;i++){var a=this.handles[i];this._bindStartEvent(a,t),a[n]("click",this),e.PointerEvent&&(a.style.touchAction=r)}},r._touchActionValue="none",r.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer=t,e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},a={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return r.okayPointerDown=function(e){var t=i[e.target.nodeName],n=a[e.target.type],r=!t||n;return r||this._pointerReset(),r},r.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},r.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},r._dragPointerMove=function(e,t){var n={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(e,t),n},r.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},r._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},r._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},r.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},r._dragMove=function(e,t,n){this.isDragging&&this.dragMove(e,t,n)},r.dragMove=function(e,t,n){e.preventDefault(),this.emitEvent("dragMove",[e,t,n])},r._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},r.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},r.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},r._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},r.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},n.getPointerPoint=t.getPointerPoint,n}(a,e)}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";var r,i,a;"function"==typeof Symbol&&Symbol.iterator,a=window,r=[n(35)],void 0===(i=function(e){return function(e,t){function n(){}var r=n.prototype=Object.create(t.prototype);r.bindStartEvent=function(e){this._bindStartEvent(e,!0)},r.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},r._bindStartEvent=function(t,n){var r=(n=void 0===n||n)?"addEventListener":"removeEventListener",i="mousedown";e.PointerEvent?i="pointerdown":"ontouchstart"in e&&(i="touchstart"),t[r](i,this)},r.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.getTouch=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.identifier==this.pointerIdentifier)return n}},r.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},r.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},r.onpointerdown=function(e){this._pointerDown(e,e)},r._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},r.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var i={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return r._bindPostStartEvents=function(t){if(t){var n=i[t.type];n.forEach(function(t){e.addEventListener(t,this)},this),this._boundPointerEvents=n}},r._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){e.removeEventListener(t,this)},this),delete this._boundPointerEvents)},r.onmousemove=function(e){this._pointerMove(e,e)},r.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},r.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},r._pointerMove=function(e,t){this.pointerMove(e,t)},r.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},r.onmouseup=function(e){this._pointerUp(e,e)},r.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},r.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},r._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},r._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},r._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},r.pointerDone=function(){},r.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},r.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},r._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},r.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},n.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},n}(a,e)}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";var r,i;"function"==typeof Symbol&&Symbol.iterator,"undefined"!=typeof window&&window,void 0===(i="function"==typeof(r=function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},r=n[e]=n[e]||[];return-1==r.indexOf(t)&&r.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var r=n.indexOf(t);return-1!=r&&n.splice(r,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[e],i=0;i<n.length;i++){var a=n[i];r&&r[a]&&(this.off(e,a),delete r[a]),a.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}},function(e,t,n){"use strict";var r,i;"function"==typeof Symbol&&Symbol.iterator,void 0===(i="function"==typeof(r=function(){return function e(t,n,r){var i,a,o=window,s="application/octet-stream",l=r||s,u=t,d=!n&&!r&&u,c=document.createElement("a"),f=function(e){return String(e)},p=o.Blob||o.MozBlob||o.WebKitBlob||f,h=n||"download";if(p=p.call?p.bind(o):Blob,"true"===String(this)&&(l=(u=[u,l])[0],u=u[1]),d&&d.length<2048&&(h=d.split("/").pop().split("?")[0],c.href=d,-1!==c.href.indexOf(d))){var g=new XMLHttpRequest;return g.open("GET",d,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,h,s)},setTimeout(function(){g.send()},0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&p!==f))return navigator.msSaveBlob?navigator.msSaveBlob(x(u),h):b(u);l=(u=x(u)).type||s}else if(/([\x80-\xff])/.test(u)){for(var y=0,v=new Uint8Array(u.length),m=v.length;y<m;++y)v[y]=u.charCodeAt(y);u=new p([v],{type:l})}function x(e){for(var t=e.split(/[:;,]/),n=t[1],r=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),i=r.length,a=0,o=new Uint8Array(i);a<i;++a)o[a]=r.charCodeAt(a);return new p([o],{type:n})}function b(e,t){if("download"in c)return c.href=e,c.setAttribute("download",h),c.className="download-js-link",c.innerHTML="downloading...",c.style.display="none",document.body.appendChild(c),setTimeout(function(){c.click(),document.body.removeChild(c),!0===t&&setTimeout(function(){o.URL.revokeObjectURL(c.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(i=u instanceof p?u:new p([u],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(i,h);if(o.URL)b(o.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===f)try{return b("data:"+l+";base64,"+o.btoa(i))}catch(e){return b("data:"+l+","+encodeURIComponent(i))}(a=new FileReader).onload=function(e){b(this.result)},a.readAsDataURL(i)}return!0}})?r.apply(t,[]):r)||(e.exports=i)},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("volume",function(){var e=this,t=e.root,n=i.default.util,r=void 0,a=void 0,o=void 0,s=void 0;function l(){e.volume="mobile"===i.default.sniffer.device?1:e.config.volume,r=e.controls.querySelector(".xgplayer-volume"),a=r.querySelector(".xgplayer-slider"),o=r.querySelector(".xgplayer-bar"),s=r.querySelector(".xgplayer-drag"),r.querySelector(".xgplayer-icon")}function u(t){e.video.muted=!1,a.focus(),n.event(t);var r=o.getBoundingClientRect(),i=(t.clientX,t.clientY),l=s.getBoundingClientRect().height,u=!1,d=function(t){t.preventDefault(),t.stopPropagation(),n.event(t),u=!0;var a=l-t.clientY+i,o=a/r.height;s.style.height=a+"px",e.volume=Math.max(Math.min(o,1),0)},c=function t(i){if(i.preventDefault(),i.stopPropagation(),n.event(i),window.removeEventListener("mousemove",d),window.removeEventListener("touchmove",d),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t),!u){var o=r.height-(i.clientY-r.top),l=o/r.height;s.style.height=o+"px",l<=0&&(e.volume>0?s.volume=e.video.volume:l=s.volume),e.volume=Math.max(Math.min(l,1),0)}a.volume=e.volume,u=!1};return window.addEventListener("mousemove",d),window.addEventListener("touchmove",d),window.addEventListener("mouseup",c),window.addEventListener("touchend",c),!1}function d(){"mobile"===i.default.sniffer.device?e.video.muted?e.video.muted=!1:e.video.muted=!0:(e.video.muted=!1,e.volume<.1?e.volume=a.volume:e.volume=0)}function c(){n.addClass(t,"xgplayer-volume-active"),r&&r.focus()}function f(){n.removeClass(t,"xgplayer-volume-active")}e.once("canplay",l),e.on("volumeBarClick",u),e.on("volumeIconClick",d),e.on("volumeIconEnter",c),e.on("volumeIconLeave",f);var p=null;function h(){p&&clearTimeout(p),p=setTimeout(function(){if("mobile"===i.default.sniffer.device)n.removeClass(t,"xgplayer-volume-muted"),n.removeClass(t,"xgplayer-volume-large"),e.video.muted?n.addClass(t,"xgplayer-volume-muted"):n.addClass(t,"xgplayer-volume-large");else{n.removeClass(t,"xgplayer-volume-muted"),n.removeClass(t,"xgplayer-volume-small"),n.removeClass(t,"xgplayer-volume-large"),0===e.volume?n.addClass(t,"xgplayer-volume-muted"):e.volume<.5?n.addClass(t,"xgplayer-volume-small"):n.addClass(t,"xgplayer-volume-large");var r=o.getBoundingClientRect().height||76;s.style.height=e.volume*r+"px"}},50)}e.on("volumechange",h),e.once("destroy",function t(){e.off("canplay",l),e.off("volumeBarClick",u),e.off("volumeIconClick",d),e.off("volumeIconEnter",c),e.off("volumeIconLeave",f),e.off("volumechange",h),e.off("destroy",t)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("start",function(){var e=this,t=e.root,n=i.default.util;function r(){n.removeClass(t,"xgplayer-is-enter")}function a(){n.removeClass(t,"xgplayer-is-enter")}function o(){n.hasClass(t,"xgplayer-nostart")?(n.removeClass(t,"xgplayer-nostart"),n.addClass(t,"xgplayer-is-enter"),e.on("canplay",r),e.once("playing",a),t.querySelector("video")||e.start(),e.play().catch(function(e){})):e.paused&&(n.removeClass(t,"xgplayer-nostart xgplayer-isloading"),setTimeout(function(){e.play().catch(function(e){})},10))}e.on("startBtnClick",o),e.once("destroy",function t(){e.off("canplay",r),e.off("playing",a),e.off("startBtnClick",o),e.off("destroy",t)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("screenShot",function(){var e=this;if(e.root,e.config.screenShot){var t=document.createElement("canvas"),n=t.getContext("2d"),r=new Image;t.width=this.config.width||600,t.height=this.config.height||337.5;var i=function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)};e.on("screenShotBtnClick",a),e.once("destroy",function t(){e.off("screenShotBtnClick",a),e.off("destroy",t)})}function a(){r.onload=function(){n.drawImage(e.video,0,0,t.width,t.height),r.setAttribute("crossOrigin","anonymous"),r.src=t.toDataURL("image/png").replace("image/png","image/octet-stream");var a=r.src.replace(/^data:image\/[^;]+/,"data:application/octet-stream");i(a,"\u622a\u56fe.png")}()}})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("rotate",function(){var e=this,t=e.config.rotate;function n(){e.rotate(t.clockwise,t.innerRotate)}t&&(e.on("rotateBtnClick",n),e.once("destroy",function t(){e.off("rotateBtnClick",n),e.off("destroy",t)}))})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("replay",function(){var e=this,t=i.default.util,n=e.root;function r(){t.removeClass(n,"replay"),e.replay()}e.on("replayBtnClick",r),e.on("ended",function(){e.config.loop||t.addClass(n,"replay")}),e.once("destroy",function t(){e.off("replayBtnClick",r),e.off("destroy",t)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("playNext",function(){var e=this,t=(e.root,e.config.playNext);function n(){e.currentVideoIndex+1<t.urlList.length?(e.currentVideoIndex++,e.video.autoplay=!0,e.src=t.urlList[e.currentVideoIndex],e.emit("playerNext",e.currentVideoIndex+1)):e.emit("urlList last")}e.currentVideoIndex=-1,e.on("playNextBtnClick",n),e.once("destroy",function t(){e.off("playNextBtnClick",n),e.off("destroy",t)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("play",function(){var e=this;function t(){e.ended||(e.paused?e.play().catch(function(e){}):e.pause())}e.on("playBtnClick",t),e.once("destroy",function n(){e.off("playBtnClick",t),e.off("destroy",n)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("pip",function(){var e=this,t=i.default.util,n=e.root;function r(){t.hasClass(n,"xgplayer-pip-active")?e.exitPIP():e.getPIP()}e.on("pipBtnClick",r),e.once("destroy",function t(){e.off("pipBtnClick",r),e.off("destroy",t)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("pc",function(){var e=this,t=i.default.util,n=e.controls,r=e.root,a=0,o=void 0;function s(){clearTimeout(e.leavePlayerTimer),e.emit("focus",e)}function l(){e.config.closePlayerBlur||(e.leavePlayerTimer=setTimeout(function(){e.emit("blur",e)},e.config.leavePlayerTime||0))}function u(t){e.config.autoplay&&e.start()}e.onElementClick=function(e,n){e.preventDefault(),e.stopPropagation();var r=this;r.config.closeVideoClick||(a++,o&&clearTimeout(o),1===a?o=setTimeout(function(){if(t.hasClass(r.root,"xgplayer-nostart"))return!1;r.ended||(r.paused?r.play().catch(function(e){}):r.pause()),a=0},200):a=0)},e.video.addEventListener("click",function(t){e.onElementClick(t,e.video)},!1),e.onElementDblclick=function(e,t){if(e.preventDefault(),e.stopPropagation(),!this.config.closeVideoDblclick){var r=n.querySelector(".xgplayer-fullscreen");if(r){var i=void 0;document.createEvent?(i=document.createEvent("Event")).initEvent("click",!0,!0):i=new Event("click"),r.dispatchEvent(i)}}},e.video.addEventListener("dblclick",function(t){e.onElementDblclick(t,e.video)},!1),r.addEventListener("mouseenter",s),r.addEventListener("mouseleave",l),n.addEventListener("mouseenter",function(t){e.userTimer&&clearTimeout(e.userTimer)},!1),n.addEventListener("mouseleave",function(t){e.config.closeControlsBlur||e.emit("focus",e)},!1),e.once("ready",u),e.once("destroy",function t(){r.removeEventListener("mouseenter",s),r.removeEventListener("mouseleave",l),e.off("ready",u),e.off("destroy",t)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("mobile",function(){var e=this,t=i.default.util,n=(e.controls,e.root);function r(t){e.config.autoplay&&e.start()}e.onElementTouchend=function(e,r){if(e.preventDefault(),e.stopPropagation(),t.hasClass(n,"xgplayer-inactive")?this.emit("focus"):this.emit("blur"),!this.config.closeVideoTouch&&!this.isTouchMove){if(t.hasClass(this.root,"xgplayer-nostart"))return!1;this.ended||(this.paused?this.play().catch(function(e){}):this.pause())}},e.video.addEventListener("touchend",function(t){e.onElementTouchend(t,e.video)},!1),e.video.addEventListener("touchstart",function(){e.isTouchMove=!1}),e.video.addEventListener("touchmove",function(){e.isTouchMove=!0}),e.once("ready",r),e.once("destroy",function t(){e.off("ready",r),e.off("destroy",t)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("memoryPlay",function(){var e=this;e.on("memoryPlayStart",function(t){e.currentTime=t})})},function(e,t,n){"use strict";var r=o(n(0)),i=o(n(6)),a=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}r.default.install("logger",function(){var e=this,t=r.default.util;if(!0!==e.config.noLog){var n=function(){e.video.played;var t=l(e.logParams.played),n=(new Date).getTime();u();var r={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,bc:e.logParams.bc-1>0?e.logParams.bc-1:0,bb:e.logParams.bc-1>0?1:0,bu_acu_t:e.logParams.bu_acu_t,pt:e.logParams.pt,vt:e.logParams.vt,vd:1e3*e.logParams.vd,watch_dur:parseFloat((1e3*t).toFixed(3)),cur_play_pos:parseFloat((1e3*e.currentTime).toFixed(3)),et:n};window.__xigua_log_sdk__("c",r)},o=function(){e.video.played;var t=l(e.logParams.played),n=(new Date).getTime();u();var r={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,bc:e.logParams.bc-1>0?e.logParams.bc-1:0,bb:e.logParams.bc-1>0?1:0,bu_acu_t:e.logParams.bu_acu_t,pt:e.logParams.pt,vt:e.logParams.vt,vd:1e3*e.logParams.vd,watch_dur:parseFloat((1e3*t).toFixed(3)),cur_play_pos:parseFloat((1e3*e.currentTime).toFixed(3)),lt:n};window.__xigua_log_sdk__("d",r)},s=function(t){e.video.played;var n=l(e.logParams.played);u();var r=(new Date).getTime();if(!(e.logParams.lastErrLog&&r-e.logParams.lastErrLog<=3e3)){e.logParams.lastErrLog=r;var i={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,bc:e.logParams.bc-1>0?e.logParams.bc-1:0,bb:e.logParams.bc-1>0?1:0,bu_acu_t:e.logParams.bu_acu_t,pt:e.logParams.pt,vt:e.logParams.vt,vd:1e3*e.logParams.vd,watch_dur:parseFloat((1e3*n).toFixed(3)),err_msg:t.errd.msg,line:t.errd.line,et:r,cur_play_pos:parseFloat((1e3*e.currentTime).toFixed(3))};if(e.logParams.nologFunc&&e.logParams.nologFunc(e))return!0;window.__xigua_log_sdk__("e",i)}};window.__xigua_log_sdk__||(window.__xigua_log_sdk__=new a.default("tracker"),window.__xigua_log_sdk__.init({app_id:1300,channel:"cn",log:!1,disable_sdk_monitor:!0}),window.__xigua_log_sdk__("config",{evtParams:{log_type:"logger",page_url:document.URL,domain:window.location.host,pver:e.version,ua:navigator.userAgent.toLowerCase()},disable_auto_pv:!0}),window.__xigua_log_sdk__.start()),e.config.uid&&window.__xigua_log_sdk__("config",{user_unique_id:e.config.uid});var l=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++)if(!(!e[n].end||e[n].begin<0||e[n].end<0||e[n].end<e[n].begin))if(t.length<1)t.push({begin:e[n].begin,end:e[n].end});else for(var r=0;r<t.length;r++){var i=e[n].begin,a=e[n].end;if(a<t[r].begin){t.splice(r,0,{begin:i,end:a});break}if(!(i>t[r].end)){var o=t[r].begin,s=t[r].end;t[r].begin=Math.min(i,o),t[r].end=Math.max(a,s);break}if(r>t.length-2){t.push({begin:i,end:a});break}}for(var l=0,u=0;u<t.length;u++)l+=t[u].end-t[u].begin;return l},u=function(){e.logParams.pt&&e.logParams.vt||(e.logParams.pt=(new Date).getTime(),e.logParams.vt=e.logParams.pt),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt)},d=function(n){if(t.hasClass(e.root,"xgplayer-is-enter")){var r=(new Date).getTime(),i={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,pt:e.logParams.pt,lt:r};window.__xigua_log_sdk__("b",i)}else if(t.hasClass(e.root,"xgplayer-playing")){var a=l(e.logParams.played),o=(new Date).getTime();u();var s={url:e.logParams.pluginSrc?e.logParams.pluginSrc:e.logParams.playSrc,vid:e.config.vid,bc:e.logParams.bc-1>0?e.logParams.bc-1:0,bb:e.logParams.bc-1>0?1:0,bu_acu_t:e.logParams.bu_acu_t,pt:e.logParams.pt,vt:e.logParams.vt,vd:1e3*e.logParams.vd,watch_dur:parseFloat((1e3*a).toFixed(3)),cur_play_pos:parseFloat((1e3*e.currentTime).toFixed(3)),lt:o};window.__xigua_log_sdk__("d",s)}};"pc"===i.default.device?window.addEventListener("beforeunload",d,!1):"mobile"===i.default.device&&window.addEventListener("pagehide",d,!1),e.on("routechange",d),e.on("ended",n),e.on("urlchange",o),e.on("error",s),e.once("destroy",function t(){"pc"===i.default.device?window.removeEventListener("beforeunload",d):"mobile"===i.default.device&&window.removeEventListener("pagehide",d),e.off("routechange",d),e.off("ended",n),e.off("urlchange",o),e.off("error",s),e.off("destroy",t)})}})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("localPreview",function(){var e=this,t=e.root;function n(n){e.uploadFile=n.files[0];var r=URL.createObjectURL(e.uploadFile);util.hasClass(t,"xgplayer-nostart")?(e.config.url=r,e.start()):(e.src=r,e.play().catch(function(e){}))}e.on("upload",n),e.once("destroy",function t(){e.off("upload",n),e.off("destroy",t)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("i18n",function(){var e=this,t={},n=e.constructor.util;t.en={HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"Pip",SCREENSHOT:"Screenshot"},t["zh-cn"]={HAVE_NOTHING:"\u6ca1\u6709\u5173\u4e8e\u97f3\u9891/\u89c6\u9891\u662f\u5426\u5c31\u7eea\u7684\u4fe1\u606f",HAVE_METADATA:"\u97f3\u9891/\u89c6\u9891\u7684\u5143\u6570\u636e\u5df2\u5c31\u7eea",HAVE_CURRENT_DATA:"\u5173\u4e8e\u5f53\u524d\u64ad\u653e\u4f4d\u7f6e\u7684\u6570\u636e\u662f\u53ef\u7528\u7684\uff0c\u4f46\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u64ad\u653e\u4e0b\u4e00\u5e27/\u6beb\u79d2",HAVE_FUTURE_DATA:"\u5f53\u524d\u53ca\u81f3\u5c11\u4e0b\u4e00\u5e27\u7684\u6570\u636e\u662f\u53ef\u7528\u7684",HAVE_ENOUGH_DATA:"\u53ef\u7528\u6570\u636e\u8db3\u4ee5\u5f00\u59cb\u64ad\u653e",NETWORK_EMPTY:"\u97f3\u9891/\u89c6\u9891\u5c1a\u672a\u521d\u59cb\u5316",NETWORK_IDLE:"\u97f3\u9891/\u89c6\u9891\u662f\u6d3b\u52a8\u7684\u4e14\u5df2\u9009\u53d6\u8d44\u6e90\uff0c\u4f46\u5e76\u672a\u4f7f\u7528\u7f51\u7edc",NETWORK_LOADING:"\u6d4f\u89c8\u5668\u6b63\u5728\u4e0b\u8f7d\u6570\u636e",NETWORK_NO_SOURCE:"\u672a\u627e\u5230\u97f3\u9891/\u89c6\u9891\u6765\u6e90",MEDIA_ERR_ABORTED:"\u53d6\u56de\u8fc7\u7a0b\u88ab\u7528\u6237\u4e2d\u6b62",MEDIA_ERR_NETWORK:"\u5f53\u4e0b\u8f7d\u65f6\u53d1\u751f\u9519\u8bef",MEDIA_ERR_DECODE:"\u5f53\u89e3\u7801\u65f6\u53d1\u751f\u9519\u8bef",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4e0d\u652f\u6301\u7684\u97f3\u9891/\u89c6\u9891\u683c\u5f0f",REPLAY:"\u91cd\u64ad",ERROR:"\u7f51\u7edc\u8fde\u63a5\u4f3c\u4e4e\u51fa\u73b0\u4e86\u95ee\u9898",PLAY_TIPS:"\u64ad\u653e",PAUSE_TIPS:"\u6682\u505c",PLAYNEXT_TIPS:"\u4e0b\u4e00\u96c6",DOWNLOAD_TIPS:"\u4e0b\u8f7d",ROTATE_TIPS:"\u65cb\u8f6c",FULLSCREEN_TIPS:"\u8fdb\u5165\u5168\u5c4f",EXITFULLSCREEN_TIPS:"\u9000\u51fa\u5168\u5c4f",CSSFULLSCREEN_TIPS:"\u8fdb\u5165\u6837\u5f0f\u5168\u5c4f",EXITCSSFULLSCREEN_TIPS:"\u9000\u51fa\u6837\u5f0f\u5168\u5c4f",TEXTTRACK:"\u5b57\u5e55",PIP:"\u753b\u4e2d\u753b",SCREENSHOT:"\u622a\u56fe"},t.jp={HAVE_NOTHING:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u304c\u6e96\u5099\u3067\u304d\u3066\u3044\u308b\u304b\u60c5\u5831\u304c\u3042\u308a\u307e\u305b\u3093",HAVE_METADATA:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u6e96\u5099\u3067\u304d\u3066\u3044\u307e\u3059",HAVE_CURRENT_DATA:"\u73fe\u5728\u306e\u518d\u751f\u4f4d\u7f6e\u306b\u95a2\u3059\u308b\u30c7\u30fc\u30bf\u306f\u5229\u7528\u53ef\u80fd\u3067\u3059\u304c\u3001\u6b21\u306e\u30d5\u30ec\u30fc\u30e0/\u30df\u30ea\u79d2\u3092\u518d\u751f\u3059\u308b\u306e\u306b\u5341\u5206\u306a\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093",HAVE_FUTURE_DATA:"\u73fe\u5728\u3001\u5c11\u306a\u304f\u3068\u3082\u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u306e\u30c7\u30fc\u30bf\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059",HAVE_ENOUGH_DATA:"\u5229\u7528\u53ef\u80fd\u306a\u30c7\u30fc\u30bf\u306f\u518d\u751f\u3092\u958b\u59cb\u3059\u308b\u306e\u306b\u5341\u5206\u3067\u3059",NETWORK_EMPTY:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093",NETWORK_IDLE:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u306f\u30a2\u30af\u30c6\u30a3\u30d6\u3067\u30ea\u30bd\u30fc\u30b9\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u305b\u3093",NETWORK_LOADING:"\u30d6\u30e9\u30a6\u30b6\u30fc\u306f\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3044\u307e\u3059",NETWORK_NO_SOURCE:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa \u306e\u30bd\u30fc\u30b9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093",MEDIA_ERR_ABORTED:"\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u30d5\u30a7\u30c3\u30c1\u30d7\u30ed\u30bb\u30b9\u304c\u4e2d\u6b62\u3055\u308c\u307e\u3057\u305f",MEDIA_ERR_NETWORK:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",MEDIA_ERR_DECODE:"\u30c7\u30b3\u30fc\u30c9\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa \u306e\u5f62\u5f0f\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093",REPLAY:"\u30ea\u30d7\u30ec\u30a4",ERROR:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u63a5\u7d9a\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f",PLAY_TIPS:"\u30d7\u30ec\u30a4",PAUSE_TIPS:"\u4e00\u6642\u505c\u6b62",PLAYNEXT_TIPS:"\u6b21\u3092\u30d7\u30ec\u30a4",DOWNLOAD_TIPS:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",ROTATE_TIPS:"\u56de\u8ee2",FULLSCREEN_TIPS:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3",EXITFULLSCREEN_TIPS:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u3092\u7d42\u4e86",CSSFULLSCREEN_TIPS:"\u30b7\u30a2\u30bf\u30fc\u30e2\u30fc\u30c9",EXITCSSFULLSCREEN_TIPS:"\u30b7\u30a2\u30bf\u30fc\u30e2\u30fc\u30c9\u3092\u7d42\u4e86",TEXTTRACK:"\u5b57\u5e55",PIP:"\u30df\u30cb\u30d7\u30ec\u30fc\u30e4\u30fc",SCREENSHOT:"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8"},Object.defineProperty(e,"lang",{get:function(){return e.config&&t[e.config.lang]||t.en},set:function(e){"Object"===n.typeOf(e)&&Object.keys(e).forEach(function(n){t[n]=e[n]})}})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("fullscreen",function(){var e=this,t=e.root,n=i.default.util;function r(){n.hasClass(t,"xgplayer-is-fullscreen")?e.exitFullscreen(t):e.getFullscreen(t)}function a(){var r=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;r&&r===t?(n.addClass(t,"xgplayer-is-fullscreen"),e.emit("requestFullscreen")):(n.removeClass(t,"xgplayer-is-fullscreen"),e.emit("exitFullscreen"))}e.on("fullscreenBtnClick",r),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){document.addEventListener(e,a)}),e.once("destroy",function t(){e.off("fullscreenBtnClick",r),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){document.removeEventListener(e,a)}),e.off("destroy",t)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("download",function(){var e=this;function t(){e.download()}e.on("downloadBtnClick",t),e.once("destroy",function n(){e.off("downloadBtnClick",t),e.off("destroy",n)})})},function(e,t,n){"use strict";var r;((r=n(0))&&r.__esModule?r:{default:r}).default.install("definition",function(){var e=this;e.root,e.once("destroy",function t(){e.off("destroy",t)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("danmu",function(){var e=this,t=(e.root,i.default.util);e.on("initDefaultDanmu",function(n){var r=e.root.querySelector("xg-danmu");if(t.addClass(r,"xgplayer-has-danmu"),!e.config.danmu.closeDefaultBtn){var i=function(){n.start()},a=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&n.pause()},o=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&n.play()},s=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&(n.stop(),n.start())};e.danmuBtn=t.copyDom(n.bulletBtn.createSwitch(!0)),e.controls.appendChild(e.danmuBtn),["click","touchend"].forEach(function(a){e.danmuBtn.addEventListener(a,function(a){a.preventDefault(),a.stopPropagation(),t.toggleClass(e.danmuBtn,"danmu-switch-active"),t.hasClass(e.danmuBtn,"danmu-switch-active")?(t.addClass(r,"xgplayer-has-danmu"),e.once("timeupdate",i)):(t.removeClass(r,"xgplayer-has-danmu"),n.stop())})}),e.onElementClick&&r.addEventListener("click",function(t){e.onElementClick(t,r)},!1),e.onElementDblclick&&r.addEventListener("dblclick",function(t){e.onElementDblclick(t,r)},!1),e.on("pause",a),e.on("play",o),e.on("seeked",s),e.once("destroy",function t(){e.off("timeupdate",i),e.off("pause",a),e.off("play",o),e.off("seeked",s),e.off("destroy",t)})}})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("cssFullscreen",function(){var e=this,t=e.root,n=i.default.util;function r(){n.hasClass(t,"xgplayer-is-cssfullscreen")?e.exitCssFullscreen():e.getCssFullscreen()}e.on("cssFullscreenBtnClick",r),e.on("exitFullscreen",function(){n.removeClass(t,"xgplayer-is-cssfullscreen")}),e.once("destroy",function t(){e.off("cssFullscreenBtnClick",r),e.off("destroy",t)})})},function(e,t,n){"use strict";n(58),n(63),n(64),n(67),n(70),n(71),n(72),n(75),n(78),n(82),n(83),n(85),n(86),n(87),n(89),n(90),n(91),n(93),n(97),n(98),n(100),n(102),n(103),n(104),n(105)},function(e,t,n){var r=n(59);"string"==typeof r&&(r=[[e.i,r,""]]);n(61)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(60)(!1)).push([e.i,'.xgplayer-skin-default{background:#000;width:100%;height:100%;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.xgplayer-skin-default *{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}.xgplayer-skin-default.xgplayer-is-fullscreen{width:100%!important;height:100%!important;padding-top:0!important;z-index:9999}.xgplayer-skin-default.xgplayer-is-fullscreen.xgplayer-inactive{cursor:none}.xgplayer-skin-default video{width:100%;height:100%;outline:none}.xgplayer-skin-default .xgplayer-none{display:none}@-webkit-keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}@keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}.xgplayer-skin-default .xgplayer-play,.xgplayer-skin-default .xgplayer-play-img{position:relative;-webkit-order:0;-moz-box-ordinal-group:1;order:0;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-play .xgplayer-icon{margin-top:3px;width:32px}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-play .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default .xgplayer-play .xgplayer-icon .xgplayer-icon-play{display:block}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:block}.xgplayer-skin-default .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:none}.xgplayer-skin-default .xgplayer-play-img:hover,.xgplayer-skin-default .xgplayer-play:hover{opacity:.85}.xgplayer-skin-default .xgplayer-play-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-play:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-icon .xgplayer-icon-play{display:none}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:block}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:none}.xgplayer-skin-default .xgplayer-start{border-radius:50%;display:inline-block;width:70px;height:70px;background:rgba(0,0,0,.38);overflow:hidden;text-align:center;line-height:70px;vertical-align:middle;position:absolute;left:50%;top:50%;z-index:115;margin:-35px auto auto -35px;cursor:pointer}.xgplayer-skin-default .xgplayer-start div{position:absolute}.xgplayer-skin-default .xgplayer-start div svg{fill:hsla(0,0%,100%,.7);margin:14px}.xgplayer-skin-default .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-start:hover{opacity:.85}.xgplayer-skin-default.xgplayer-playing .xgplayer-start,.xgplayer-skin-default.xgplayer-playing .xgplayer-start .xgplayer-icon-play{display:none}.xgplayer-skin-default.xgplayer-playing .xgplayer-start .xgplayer-icon-pause{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-start{display:inline-block}.xgplayer-skin-default.xgplayer-pause .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default.replay .xgplayer-start,.xgplayer-skin-default.xgplayer-pause .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default.replay .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default.replay .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-enter{display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:#000;z-index:120}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner{display:block;position:absolute;left:50%;top:50%;height:100px;width:100px;position:relative;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div{width:12%;height:26%;background-color:hsla(0,0%,100%,.7);position:absolute;left:44%;top:37%;opacity:0;border-radius:30px;-webkit-animation:fade 1s linear infinite;animation:fade 1s linear infinite}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar1{-webkit-transform:rotate(0deg) translateY(-142%);-ms-transform:rotate(0deg) translateY(-142%);transform:rotate(0deg) translateY(-142%);-webkit-animation-delay:0s;animation-delay:0s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar2{-webkit-transform:rotate(30deg) translateY(-142%);-ms-transform:rotate(30deg) translateY(-142%);transform:rotate(30deg) translateY(-142%);-webkit-animation-delay:-.9163s;animation-delay:-.9163s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar3{-webkit-transform:rotate(60deg) translateY(-142%);-ms-transform:rotate(60deg) translateY(-142%);transform:rotate(60deg) translateY(-142%);-webkit-animation-delay:-.833s;animation-delay:-.833s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar4{-webkit-transform:rotate(90deg) translateY(-142%);-ms-transform:rotate(90deg) translateY(-142%);transform:rotate(90deg) translateY(-142%);-webkit-animation-delay:-.7497s;animation-delay:-.7497s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar5{-webkit-transform:rotate(120deg) translateY(-142%);-ms-transform:rotate(120deg) translateY(-142%);transform:rotate(120deg) translateY(-142%);-webkit-animation-delay:-.6664s;animation-delay:-.6664s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar6{-webkit-transform:rotate(150deg) translateY(-142%);-ms-transform:rotate(150deg) translateY(-142%);transform:rotate(150deg) translateY(-142%);-webkit-animation-delay:-.5831s;animation-delay:-.5831s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar7{-webkit-transform:rotate(180deg) translateY(-142%);-ms-transform:rotate(180deg) translateY(-142%);transform:rotate(180deg) translateY(-142%);-webkit-animation-delay:-.4998s;animation-delay:-.4998s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar8{-webkit-transform:rotate(210deg) translateY(-142%);-ms-transform:rotate(210deg) translateY(-142%);transform:rotate(210deg) translateY(-142%);-webkit-animation-delay:-.4165s;animation-delay:-.4165s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar9{-webkit-transform:rotate(240deg) translateY(-142%);-ms-transform:rotate(240deg) translateY(-142%);transform:rotate(240deg) translateY(-142%);-webkit-animation-delay:-.3332s;animation-delay:-.3332s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar10{-webkit-transform:rotate(270deg) translateY(-142%);-ms-transform:rotate(270deg) translateY(-142%);transform:rotate(270deg) translateY(-142%);-webkit-animation-delay:-.2499s;animation-delay:-.2499s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar11{-webkit-transform:rotate(300deg) translateY(-142%);-ms-transform:rotate(300deg) translateY(-142%);transform:rotate(300deg) translateY(-142%);-webkit-animation-delay:-.1666s;animation-delay:-.1666s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar12{-webkit-transform:rotate(330deg) translateY(-142%);-ms-transform:rotate(330deg) translateY(-142%);transform:rotate(330deg) translateY(-142%);-webkit-animation-delay:-.0833s;animation-delay:-.0833s}@-webkit-keyframes fade{0%{opacity:1}to{opacity:.25}}.xgplayer-skin-default.xgplayer-is-enter .xgplayer-enter{display:block}.xgplayer-skin-default .xgplayer-poster{display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:100;background-size:cover;background-position:50%}.xgplayer-skin-default.xgplayer-nostart .xgplayer-poster{display:block}.xgplayer-skin-default .xgplayer-placeholder{-webkit-flex:1;-moz-box-flex:1;flex:1;-webkit-order:3;-moz-box-ordinal-group:4;order:3;display:block}.xgplayer-skin-default .xgplayer-fullscreen,.xgplayer-skin-default .xgplayer-fullscreen-img{position:relative;-webkit-order:13;-moz-box-ordinal-group:14;order:13;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon{margin-top:3px}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:block}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:none}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips{position:absolute;right:0;left:auto}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:block}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:none}.xgplayer-skin-default .xgplayer-fullscreen-img:hover,.xgplayer-skin-default .xgplayer-fullscreen:hover{opacity:.85}.xgplayer-skin-default .xgplayer-fullscreen-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-fullscreen:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen,.xgplayer-skin-default .xgplayer-cssfullscreen-img{position:relative;-webkit-order:12;-moz-box-ordinal-group:13;order:12;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon{width:32px;margin-top:5px}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:none}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-40px}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:none}.xgplayer-skin-default .xgplayer-cssfullscreen-img:hover,.xgplayer-skin-default .xgplayer-cssfullscreen:hover{opacity:.85}.xgplayer-skin-default .xgplayer-cssfullscreen-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-cssfullscreen:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-47px}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-cssfullscreen,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-cssfullscreen-img{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen{position:fixed!important;left:0!important;top:0!important;width:100%!important;height:100%!important;z-index:99999!important}.lang-is-en .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-en .xgplayer-cssfullscreen .xgplayer-tips,.lang-is-en.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-en.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-46px}.lang-is-jp .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-jp .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-120px}.lang-is-jp.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-jp.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-60px}.xgplayer-skin-default .xgplayer-volume{outline:none;-webkit-order:4;-moz-box-ordinal-group:5;order:4;width:28px;height:140px;display:block;position:relative;margin-top:-100px;overflow:hidden;z-index:18}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon{margin-top:8px;cursor:pointer;position:absolute;bottom:-9px}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:block}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted,.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-small{display:none}.xgplayer-skin-default .xgplayer-slider{display:none;position:absolute;width:28px;height:92px;background:rgba(0,0,0,.54);border-radius:1px;bottom:42px;outline:none}.xgplayer-skin-default .xgplayer-slider:after{content:" ";display:block;height:15px;width:28px;position:absolute;bottom:-15px;left:0;z-index:20}.xgplayer-skin-default .xgplayer-bar,.xgplayer-skin-default .xgplayer-drag{display:block;position:absolute;bottom:6px;left:12px;background:hsla(0,0%,100%,.3);border-radius:100px;width:4px;height:76px;outline:none;cursor:pointer}.xgplayer-skin-default .xgplayer-drag{bottom:0;left:0;background:#fa1f41;max-height:76px}.xgplayer-skin-default .xgplayer-drag:after{content:" ";display:inline-block;width:8px;height:8px;background:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,.26);position:absolute;border-radius:50%;left:-2px;top:-6px}.xgplayer-skin-default.xgplayer-volume-active .xgplayer-slider,.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:block}.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted,.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-small,.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:none}.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-small{display:block}.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-large,.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-small,.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted{display:none}.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted{display:block}.xgplayer-skin-default.xgplayer-mobile .xgplayer-volume .xgplayer-slider{display:none}.xgplayer-skin-default .xgplayer-definition{-webkit-order:5;-moz-box-ordinal-group:6;order:5;width:60px;height:150px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-left:10px;margin-top:-119px}.xgplayer-skin-default .xgplayer-definition ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:30px;left:0;text-align:center;white-space:nowrap;margin-left:-10px;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-definition ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);padding:6px 13px}.xgplayer-skin-default .xgplayer-definition ul li.selected,.xgplayer-skin-default .xgplayer-definition ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-definition .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:hsla(0,0%,100%,.8);position:absolute;bottom:0;width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-definition ul,.xgplayer-skin-default.xgplayer-is-definition .xgplayer-definition{display:block}.xgplayer-skin-default .xgplayer-time{-webkit-order:2;-moz-box-ordinal-group:3;order:2;font-family:ArialMT;font-size:13px;color:#fff;line-height:40px;text-align:center;display:inline-block}.xgplayer-skin-default .xgplayer-time span:after{content:"/";display:inline-block;padding:0 3px}.xgplayer-skin-default .xgplayer-time em{color:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-controls{display:-webkit-flex;display:-moz-box;display:flex;position:absolute;bottom:0;left:0;right:0;height:40px;background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.37),rgba(0,0,0,.75),rgba(0,0,0,.75));z-index:10}.xgplayer-skin-default.no-controls .xgplayer-controls,.xgplayer-skin-default.xgplayer-inactive .xgplayer-controls,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls>*,.xgplayer-skin-default.xgplayer-nostart .xgplayer-controls{display:none}.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-cssfullscreen,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-definition,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-fullscreen,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-live,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-placeholder,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-play,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-play-img,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-volume{display:block}.xgplayer-skin-default .xgplayer-live{display:block;font-size:12px;color:#fff;line-height:40px;-webkit-order:1;-moz-box-ordinal-group:2;order:1}.xgplayer-skin-default .xgplayer-loading{display:none;width:100px;height:100px;overflow:hidden;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);position:absolute;left:50%;top:50%;margin:-70px auto auto -50px}.xgplayer-skin-default .xgplayer-loading svg{border-radius:50%;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-animation:loadingRotate 1s linear infinite;animation:loadingRotate 1s linear infinite}.xgplayer-skin-default .xgplayer-loading svg path{stroke:#ddd;stroke-dasharray:236;-webkit-animation:loadingDashOffset 2s linear infinite;animation:loadingDashOffset 2s linear infinite;animation-direction:alternate-reverse;fill:none;stroke-width:12px}.xgplayer-skin-default.xgplayer-nostart .xgplayer-loading{display:none}.xgplayer-skin-default.xgplayer-isloading .xgplayer-loading{display:block}.xgplayer-skin-default .xgplayer-progress{display:block;position:absolute;height:20px;line-height:20px;left:12px;right:12px;outline:none;top:-10px;z-index:35}.xgplayer-skin-default .xgplayer-progress-outer{background:hsla(0,0%,100%,.3);display:block;height:3px;line-height:3px;margin-top:8.5px;width:100%;position:relative;cursor:pointer}.xgplayer-skin-default .xgplayer-progress-cache,.xgplayer-skin-default .xgplayer-progress-played{display:block;height:100%;line-height:1;position:absolute;left:0;top:0}.xgplayer-skin-default .xgplayer-progress-cache{width:0;background:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-progress-played{display:block;width:0;background-image:linear-gradient(-90deg,#fa1f41,#e31106);border-radius:0 1.5px 1.5px 0}.xgplayer-skin-default .xgplayer-progress-btn{display:none;position:absolute;left:0;top:-5px;width:13px;height:13px;border-radius:30px;background:#fff;box-shadow:0 0 2px 0 rgba(0,0,0,.26);left:100%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%)}.xgplayer-skin-default .xgplayer-progress-point{position:absolute}.xgplayer-skin-default .xgplayer-progress-point.xgplayer-tips{margin-left:0;top:-25px;display:none;z-index:100}.xgplayer-skin-default .xgplayer-progress-dot{display:inline-block;position:absolute;height:3px;width:5px;top:0;background:#fff;border-radius:6px;z-index:16}.xgplayer-skin-default .xgplayer-progress-dot .xgplayer-progress-tip{position:absolute;left:0;top:-40px;height:auto;line-height:30px;width:auto;-webkit-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8);background:rgba(0,0,0,.3);border-radius:6px;border:1px solid rgba(0,0,0,.8);cursor:default;white-space:nowrap;display:none}.xgplayer-skin-default .xgplayer-progress-dot-show .xgplayer-progress-tip{display:block}.xgplayer-skin-default .xgplayer-progress-thumbnail{position:absolute;-moz-box-sizing:border-box;box-sizing:border-box}.xgplayer-skin-default .xgplayer-progress-thumbnail.xgplayer-tips{margin-left:0;display:none;z-index:99}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-outer{height:6px;margin-top:7px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-dot,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-dot{height:6px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-btn{display:block;top:-3px}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-volume-active .xgplayer-progress{z-index:15}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress-btn{display:block!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-outer{height:3px!important;margin-top:8.5px!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-btn{display:block!important;top:-5px!important}.xgplayer-skin-default .xgplayer-replay{position:absolute;left:0;top:0;width:100%;height:100%;z-index:105;display:none;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;background:rgba(0,0,0,.54);-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column}.xgplayer-skin-default .xgplayer-replay svg{background:rgba(0,0,0,.58);border-radius:100%;cursor:pointer}.xgplayer-skin-default .xgplayer-replay svg path{-webkit-transform:translate(20px,21px);-ms-transform:translate(20px,21px);transform:translate(20px,21px);fill:#ddd}.xgplayer-skin-default .xgplayer-replay svg:hover{background:rgba(0,0,0,.38)}.xgplayer-skin-default .xgplayer-replay svg:hover path{fill:#fff}.xgplayer-skin-default .xgplayer-replay .xgplayer-replay-txt{display:inline-block;font-family:PingFangSC-Regular;font-size:14px;color:#fff;line-height:34px}.xgplayer-skin-default.xgplayer.xgplayer-ended .xgplayer-controls{display:none}.xgplayer-skin-default.xgplayer.xgplayer-ended .xgplayer-replay{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default .xgplayer-playbackrate{-webkit-order:8;-moz-box-ordinal-group:9;order:8;width:60px;height:20px;z-index:18;position:relative;display:inline-block;cursor:default}.xgplayer-skin-default .xgplayer-playbackrate ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:20px;left:0;text-align:left;white-space:nowrap;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-playbackrate ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);position:relative;padding:4px 0;text-align:center}.xgplayer-skin-default .xgplayer-playbackrate ul li.selected,.xgplayer-skin-default .xgplayer-playbackrate ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-playbackrate ul li:first-child{position:relative;margin-top:12px}.xgplayer-skin-default .xgplayer-playbackrate ul li:last-child{position:relative;margin-bottom:12px}.xgplayer-skin-default .xgplayer-playbackrate .name{height:20px;position:relative;top:11px;text-align:center;background:rgba(0,0,0,.38);color:hsla(0,0%,100%,.8);border-radius:10px;line-height:20px}.xgplayer-skin-default .xgplayer-playbackrate span{position:relative;top:19px;font-weight:700;text-shadow:0 0 4px rgba(0,0,0,.6)}.xgplayer-skin-default .xgplayer-playbackrate:hover{opacity:1}.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-playbackrate ul{display:block}.xgplayer-skin-default .xgplayer-download{position:relative;-webkit-order:9;-moz-box-ordinal-group:10;order:9;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-download .xgplayer-icon{margin-top:3px}.xgplayer-skin-default .xgplayer-download .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-download .xgplayer-icon svg{position:relative;top:5px;left:5px}.xgplayer-skin-default .xgplayer-download .xgplayer-tips{margin-left:-20px}.xgplayer-skin-default .xgplayer-download .xgplayer-tips .xgplayer-tip-download{display:block}.xgplayer-skin-default .xgplayer-download:hover{opacity:.85}.xgplayer-skin-default .xgplayer-download:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-download .xgplayer-tips{margin-left:-32px}.lang-is-jp .xgplayer-download .xgplayer-tips{margin-left:-40px}.xgplayer-skin-default .danmu-switch{-webkit-order:6;-moz-box-ordinal-group:7;order:6;z-index:26}.xgplayer-skin-default .xgplayer-danmu{display:none;position:absolute;top:0;left:0;right:0;height:100%;overflow:hidden;z-index:9;outline:none}.xgplayer-skin-default .xgplayer-danmu>*{position:absolute;white-space:nowrap;z-index:9}.xgplayer-skin-default .xgplayer-danmu.xgplayer-has-danmu{display:block}.xgplayer-skin-default .xgplayer-panel{outline:none;-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:40px;height:40px;display:inline-block;position:relative;font-family:PingFangSC-Regular;font-size:13px;color:hsla(0,0%,100%,.8);z-index:36}.xgplayer-skin-default .xgplayer-panel .xgplayer-panel-icon{cursor:pointer;position:absolute;margin-left:5px;top:10px}.xgplayer-skin-default .xgplayer-panel-active{display:block!important;bottom:30px}.xgplayer-skin-default .xgplayer-panel-slider{z-index:36;display:none;position:absolute;width:230px;height:230px;background:rgba(0,0,0,.54);border-radius:1px;padding:10px 20px;outline:none;left:-115px;bottom:40px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode{padding-bottom:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode-radio li{display:inline;list-style:none;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode ul{display:-webkit-flex;display:-moz-box;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode li{margin:0 12px;font-size:11px;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode-font{margin-bottom:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency{display:block;margin-top:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-moz-range-progress{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:4px;border-radius:4px;background:linear-gradient(90deg,#f85959,#f85959 100%,#aaa)}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea{display:block;margin-top:8px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-threequarters,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-twoquarters{margin-left:-6px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-full{margin-right:3px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-full-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-onequarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-threequarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-twoquarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-zero-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed{display:block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-large-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-middle-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont{display:block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-large-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-middle-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-playnext{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;cursor:pointer;top:-2px}.xgplayer-skin-default .xgplayer-playnext .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-playnext .xgplayer-tips .xgplayer-tip-playnext{display:block}.xgplayer-skin-default .xgplayer-playnext:hover{opacity:.85}.xgplayer-skin-default .xgplayer-playnext:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-playnext .xgplayer-tips{margin-left:-25px}.lang-is-jp .xgplayer-playnext .xgplayer-tips{margin-left:-38px}.xgplayer-skin-default .xgplayer-pip{-webkit-order:9;-moz-box-ordinal-group:10;order:9;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:8px}.xgplayer-skin-default .xgplayer-pip .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-pip .name span{width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default .xgplayer-pip-lay{position:absolute;top:26px;left:0;width:100%;height:100%;z-index:130;cursor:pointer;background-color:transparent;display:none}.xgplayer-skin-default .xgplayer-pip-lay div{width:100%;height:100%}.xgplayer-skin-default .xgplayer-pip-drag{cursor:move;position:absolute;top:0;left:0;width:100%;height:26px;line-height:26px;background-image:linear-gradient(rgba(0,0,0,.3),transparent);z-index:130;display:none}.xgplayer-skin-default.xgplayer-pip-active{position:fixed;right:0;bottom:200px;width:320px!important;height:180px!important;z-index:110!important}.xgplayer-skin-default.xgplayer-pip-active .xgplayer-controls,.xgplayer-skin-default.xgplayer-pip-active .xgplayer-danmu{display:none}.xgplayer-skin-default.xgplayer-pip-active .xgplayer-pip-lay{display:block}.xgplayer-skin-default.xgplayer-pip-active .xgplayer-pip-drag{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default.xgplayer-inactive .xgplayer-pip-drag{display:none}.lang-is-jp .xgplayer-pip .name span{width:70px;height:20px}.xgplayer-skin-default .xgplayer-rotate{position:relative;-webkit-order:10;-moz-box-ordinal-group:11;order:10;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-rotate .xgplayer-icon{margin-top:7px;width:26px}.xgplayer-skin-default .xgplayer-rotate .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-rotate .xgplayer-tips{margin-left:-22px}.xgplayer-skin-default .xgplayer-rotate .xgplayer-tips .xgplayer-tip-rotate{display:block}.xgplayer-skin-default .xgplayer-rotate:hover{opacity:.85}.xgplayer-skin-default .xgplayer-rotate:hover .xgplayer-tips{display:block}.lang-is-en .xgplayer-rotate .xgplayer-tips{margin-left:-26px}.lang-is-jp .xgplayer-rotate .xgplayer-tips{margin-left:-38px}.xgplayer-skin-default .xgplayer-screenshot{-webkit-order:11;-moz-box-ordinal-group:12;order:11;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:8px}.xgplayer-skin-default .xgplayer-screenshot .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-screenshot .name span{width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.lang-is-en .xgplayer-screenshot .name span,.lang-is-jp .xgplayer-screenshot .name span{width:75px;height:20px}.xgplayer-skin-default .xgplayer-texttrack{-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:60px;height:150px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-top:-119px}.xgplayer-skin-default .xgplayer-texttrack ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:30px;left:0;text-align:center;white-space:nowrap;margin-left:-10px;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-texttrack ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);padding:6px 13px}.xgplayer-skin-default .xgplayer-texttrack ul li.selected,.xgplayer-skin-default .xgplayer-texttrack ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-texttrack .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:hsla(0,0%,100%,.8);position:absolute;bottom:0;width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default.xgplayer-is-texttrack .xgplayer-texttrack,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-texttrack ul{display:block}.xgplayer-skin-default .xgplayer-icon{display:block;width:40px;height:40px;overflow:hidden;fill:#fff}.xgplayer-skin-default .xgplayer-tips{background:rgba(0,0,0,.54);border-radius:1px;display:none;position:absolute;font-family:PingFangSC-Regular;font-size:11px;color:#fff;padding:2px 4px;text-align:center;top:-30px;left:50%;margin-left:-16px;width:auto;white-space:nowrap}.xgplayer-skin-default.xgplayer-mobile .xgplayer-tips{display:none!important}.xgplayer-skin-default .xgplayer-error{background:#000;display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:125;font-family:PingFangSC-Regular;font-size:14px;color:#fff;text-align:center;line-height:100%;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}.xgplayer-skin-default .xgplayer-error .xgplayer-error-refresh{color:#fa1f41;padding:0 3px;cursor:pointer}.xgplayer-skin-default .xgplayer-error .xgplayer-error-text{line-height:18px;margin:auto 6px}.xgplayer-skin-default.xgplayer-is-error .xgplayer-error{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default .xgplayer-memoryplay-spot{position:absolute;height:32px;left:10px;bottom:46px;background:rgba(0,0,0,.5);border-radius:32px;line-height:32px;color:#ddd;z-index:15;padding:0 32px 0 16px}.xgplayer-skin-default .xgplayer-memoryplay-spot .xgplayer-lasttime{color:red;font-weight:700}.xgplayer-skin-default .xgplayer-memoryplay-spot .btn-close{position:absolute;width:16px;height:16px;right:10px;top:2px;cursor:pointer;color:#fff;font-size:16px}',""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var a=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i,a={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),l=null,u=0,d=[],c=n(62);function f(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=a[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(m(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(m(r.parts[o],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),h(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function m(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var o=u++;n=l||(l=y(t)),r=_.bind(null,n,o,!1),i=_.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=c(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return f(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var o=n[i];(s=a[o.id]).refs--,r.push(s)}for(e&&f(p(e,t),t),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var x,b=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function _(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_enter",function(){for(var e=this.root,t=i.default.util,n="",r=1;r<=12;r++)n+='<div class="xgplayer-enter-bar'+r+'"></div>';var a=t.createDom("xg-enter",'<div class="xgplayer-enter-spinner">\n                                                  '+n+"\n                                                </div>",{},"xgplayer-enter");e.appendChild(a)})},function(e,t,n){"use strict";var r=o(n(0)),i=o(n(65)),a=o(n(66));function o(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_play",function(){var e=this,t=r.default.util,n=e.config.playBtn?e.config.playBtn:{},o=void 0;o="img"===n.type?t.createImgBtn("play",n.url.play,n.width,n.height):t.createDom("xg-play",'<xg-icon class="xgplayer-icon">\n                                      <div class="xgplayer-icon-play">'+i.default+'</div>\n                                      <div class="xgplayer-icon-pause">'+a.default+"</div>\n                                     </xg-icon>",{},"xgplayer-play");var s={};s.play=e.lang.PLAY_TIPS,s.pause=e.lang.PAUSE_TIPS;var l=t.createDom("xg-tips",'<span class="xgplayer-tip-play">'+s.play+'</span>\n                                        <span class="xgplayer-tip-pause">'+s.pause+"</span>",{},"xgplayer-tips");o.appendChild(l),e.once("ready",function(){e.controls.appendChild(o)}),["click","touchend"].forEach(function(t){o.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("playBtnClick")})})})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r=o(n(0)),i=o(n(68)),a=o(n(69));function o(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_start",function(){var e=this,t=e.root,n=r.default.util,o=n.createDom("xg-start",'<div class="xgplayer-icon-play">'+i.default+'</div>\n                                      <div class="xgplayer-icon-pause">'+a.default+"</div>",{},"xgplayer-start");e.once("ready",function(){t.appendChild(o)}),o.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.emit("startBtnClick")},e.once("ready",function(){n.addClass(e.root,"xgplayer-skin-default"),e.config&&(e.config.lang&&"en"===e.config.lang?n.addClass(e.root,"lang-is-en"):"jp"===e.config.lang&&n.addClass(e.root,"lang-is-jp"))})})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n  <path transform="scale(0.04,0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n  <path transform="scale(0.04 0.04)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_poster",function(){var e=this.root,t=i.default.util;if(this.config.poster){var n=t.createDom("xg-poster","",{},"xgplayer-poster");n.style.backgroundImage="url("+this.config.poster+")",e.appendChild(n)}})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_flex",function(){this.root;var e=i.default.util.createDom("xg-placeholder","",{},"xgplayer-placeholder");this.controls.appendChild(e)})},function(e,t,n){"use strict";var r=o(n(0)),i=o(n(73)),a=o(n(74));function o(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_fullscreen",function(){var e=this,t=r.default.util,n=e.config.fullscreenBtn?e.config.fullscreenBtn:{},o=void 0;o="img"===n.type?t.createImgBtn("fullscreen",n.url.request,n.width,n.height):t.createDom("xg-fullscreen",'<xg-icon class="xgplayer-icon">\n                                             <div class="xgplayer-icon-requestfull">'+i.default+'</div>\n                                             <div class="xgplayer-icon-exitfull">'+a.default+"</div>\n                                           </xg-icon>",{},"xgplayer-fullscreen");var s={};s.requestfull=e.lang.FULLSCREEN_TIPS,s.exitfull=e.lang.EXITFULLSCREEN_TIPS;var l=t.createDom("xg-tips",'<span class="xgplayer-tip-requestfull">'+s.requestfull+'</span>\n                                        <span class="xgplayer-tip-exitfull">'+s.exitfull+"</span>",{},"xgplayer-tips");o.appendChild(l),e.once("ready",function(){e.controls.appendChild(o)}),["click","touchend"].forEach(function(t){o.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("fullscreenBtnClick")})})})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r=o(n(0)),i=o(n(76)),a=o(n(77));function o(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_cssFullscreen",function(){var e=this,t=r.default.util;if(e.config.cssFullscreen){var n=t.createDom("xg-cssfullscreen",'<xg-icon class="xgplayer-icon">\n                                             <div class="xgplayer-icon-requestfull">'+i.default+'</div>\n                                             <div class="xgplayer-icon-exitfull">'+a.default+"</div>\n                                           </xg-icon>",{},"xgplayer-cssfullscreen"),o={};o.requestfull=e.lang.CSSFULLSCREEN_TIPS,o.exitfull=e.lang.EXITCSSFULLSCREEN_TIPS;var s=t.createDom("xg-tips",'<span class="xgplayer-tip-requestfull">'+o.requestfull+'</span>\n                                        <span class="xgplayer-tip-exitfull">'+o.exitfull+"</span>",{},"xgplayer-tips");n.appendChild(s),e.once("ready",function(){e.controls.appendChild(n)}),["click","touchend"].forEach(function(t){n.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("cssFullscreenBtnClick")})})}})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.028 0.028)" d="M834.56 81.92H189.44c-59.392 0-107.52 48.128-107.52 107.52v645.12c0 59.392 48.128 107.52 107.52 107.52h645.12c59.392 0 107.52-48.128 107.52-107.52V189.44c0-59.392-48.128-107.52-107.52-107.52zM458.24 727.04c0 14.848-12.288 26.624-26.624 26.624S404.48 741.888 404.48 727.04v-69.632L289.28 773.12c-10.752 10.24-27.648 10.24-37.888 0-10.24-10.752-10.24-27.648 0-37.888L366.592 619.52H296.96c-14.848 0-26.624-12.288-26.624-26.624s12.288-26.624 26.624-26.624h134.144c14.848 0 26.624 12.288 26.624 26.624V727.04z m0-295.936c0 14.848-12.288 26.624-26.624 26.624H296.96c-14.848 0-26.624-12.288-26.624-26.624S282.112 404.48 296.96 404.48h69.632L251.392 289.28c-10.24-10.752-10.24-27.648 0-37.888 5.12-5.12 12.288-7.68 18.944-7.68 6.656 0 13.824 2.56 18.944 7.68L404.48 366.592V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v134.144zM773.12 773.12c-10.752 10.24-27.648 10.24-37.888 0L619.52 657.408V727.04c0 14.848-12.288 26.624-26.624 26.624s-26.624-11.776-26.624-26.624v-134.144c0-14.848 12.288-26.624 26.624-26.624H727.04c14.848 0 26.624 12.288 26.624 26.624s-12.288 26.624-26.624 26.624h-69.632l115.2 115.2c10.752 10.752 10.752 27.648 0.512 38.4z m0-483.84L657.408 404.48H727.04c14.848 0 26.624 12.288 26.624 26.624 0 14.848-12.288 26.624-26.624 26.624h-134.144c-14.848 0-26.624-12.288-26.624-26.624V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v69.632L734.72 250.88c5.12-5.12 12.288-7.68 18.944-7.68s13.824 2.56 18.944 7.68c10.752 10.752 10.752 27.648 0.512 38.4z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r=s(n(0)),i=s(n(79)),a=s(n(80)),o=s(n(81));function s(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_volume",function(){var e=this,t=r.default.util.createDom("xg-volume",'<xg-icon class="xgplayer-icon">\n                                         <div class="xgplayer-icon-large">'+o.default+'</div>\n                                         <div class="xgplayer-icon-small">'+a.default+'</div>\n                                         <div class="xgplayer-icon-muted">'+i.default+'</div>\n                                       </xg-icon>\n                                       <xg-slider class="xgplayer-slider" tabindex="2">\n                                         <xg-bar class="xgplayer-bar">\n                                           <xg-drag class="xgplayer-drag"></xg-drag>\n                                         </xg-bar>\n                                       </xg-slider>',{},"xgplayer-volume");e.once("ready",function(){e.controls.appendChild(t)});var n=t.querySelector(".xgplayer-slider"),s=t.querySelector(".xgplayer-bar"),l=t.querySelector(".xgplayer-drag"),u=t.querySelector(".xgplayer-icon");l.style.height=100*e.config.volume+"%",n.volume=e.config.volume,s.addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeBarClick",t)}),["click","touchend"].forEach(function(t){u.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconClick")})}),u.addEventListener("mouseenter",function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconEnter")}),["blur","mouseleave"].forEach(function(n){t.addEventListener(n,function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconLeave")})})})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_definition",function(){var e=this,t=e.root,n=i.default.util,r=i.default.sniffer,a=void 0,o=n.createDom("xg-definition","",{tabindex:3},"xgplayer-definition");function s(){var r=e.definitionList,i=["<ul>"],a=e.config.url,s=document.createElement("a");e.switchURL?["mp4","hls","__flv__","dash"].every(function(t){return!e[t]||(e[t].url&&(s.href=e[t].url),"__flv__"===t&&(e[t]._options?s.href=e[t]._options.url:s.href=e[t]._mediaDataSource.url),a=s.href,!1)}):a=e.currentSrc||e.src,e.hls&&(s.href=e.hls.url,a=s.href),r.forEach(function(t){s.href=t.url,e.dash?i.push("<li url='"+t.url+"' cname='"+t.name+"' class='"+(t.selected?"selected":"")+"'>"+t.name+"</li>"):i.push("<li url='"+t.url+"' cname='"+t.name+"' class='"+(s.href===a?"selected":"")+"'>"+t.name+"</li>")});var l=r.filter(function(t){return s.href=t.url,e.dash?!0===t.selected:s.href===a});i.push("</ul><p class='name'>"+(l[0]||{name:""}).name+"</p>");var u=t.querySelector(".xgplayer-definition");if(u){u.innerHTML=i.join("");var d=u.querySelector(".name");e.config.definitionActive&&"hover"!==e.config.definitionActive||d.addEventListener("mouseenter",function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-definition-active"),u.focus()})}else{o.innerHTML=i.join("");var c=o.querySelector(".name");e.config.definitionActive&&"hover"!==e.config.definitionActive||c.addEventListener("mouseenter",function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-definition-active"),o.focus()}),e.controls.appendChild(o)}}function l(r){e.definitionList=r,r&&r instanceof Array&&r.length>1&&(n.addClass(t,"xgplayer-is-definition"),e.on("canplay",s))}function u(){e.currentTime=e.curTime,a||e.play().catch(function(e){})}"mobile"===r.device&&(e.config.definitionActive="click"),e.on("resourceReady",l),["touchend","click"].forEach(function(t){o.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation();var i=e.definitionList,s=t.target||t.srcElement,l=document.createElement("a");if(s&&"li"===s.tagName.toLocaleLowerCase()){e.emit("beforeDefinitionChange",l.href);var d,c=void 0;if(Array.prototype.forEach.call(s.parentNode.childNodes,function(e){n.hasClass(e,"selected")&&(c=e.getAttribute("cname"),n.removeClass(e,"selected"))}),e.dash&&i.forEach(function(e){e.selected=!1,e.name===s.innerHTML&&(e.selected=!0)}),n.addClass(s,"selected"),d=s.getAttribute("cname"),s.parentNode.nextSibling.innerHTML=""+s.getAttribute("cname"),l.href=s.getAttribute("url"),e.switchURL){var f=document.createElement("a");["mp4","hls","__flv__","dash"].every(function(t){return!e[t]||(e[t].url&&(f.href=e[t].url),"__flv__"===t&&(e[t]._options?f.href=e[t]._options.url:f.href=e[t]._mediaDataSource.url),!1)}),f.href===l.href||e.ended||e.switchURL(l.href)}else e.hls&&(document.createElement("a"),e.hls.url),l.href!==e.currentSrc&&(e.curTime=e.currentTime,a=e.paused,e.ended||(e.src=l.href,e.once("canplay",u)));e.emit("definitionChange",{from:c,to:d}),"mobile"===r.device&&n.removeClass(e.root,"xgplayer-definition-active")}else"click"!==e.config.definitionActive||!s||"p"!==s.tagName.toLocaleLowerCase()&&"em"!==s.tagName.toLocaleLowerCase()||(n.addClass(e.root,"xgplayer-definition-active"),o.focus());e.emit("focus")},!1)}),o.addEventListener("mouseleave",function(e){e.preventDefault(),e.stopPropagation(),n.removeClass(t,"xgplayer-definition-active")}),e.once("destroy",function t(){e.off("resourceReady",l),e.off("canplay",s),e.off("canplay",u),e.off("destroy",t)})})},function(e,t,n){"use strict";var r=a(n(0)),i=a(n(84));function a(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_loading",function(){var e=this.root,t=r.default.util.createDom("xg-loading",""+i.default,{},"xgplayer-loading");this.once("ready",function(){e.appendChild(t)})})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n'},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_progress",function(){var e=this,t=i.default.util,n=t.createDom("xg-progress",'<xg-outer class="xgplayer-progress-outer">\n                                                   <xg-cache class="xgplayer-progress-cache"></xg-cache>\n                                                   <xg-played class="xgplayer-progress-played">\n                                                     <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n                                                     <xg-point class="xgplayer-progress-point xgplayer-tips"></xg-point>\n                                                     <xg-thumbnail class="xgplayer-progress-thumbnail xgplayer-tips"></xg-thumbnail>\n                                                   </xgplayer-played>\n                                                 </xg-outer>',{tabindex:1},"xgplayer-progress"),r=void 0;e.controls.appendChild(n);var a=n.querySelector(".xgplayer-progress-played"),o=(n.querySelector(".xgplayer-progress-btn"),n.querySelector(".xgplayer-progress-outer")),s=n.querySelector(".xgplayer-progress-cache"),l=n.querySelector(".xgplayer-progress-point"),u=n.querySelector(".xgplayer-progress-thumbnail");function d(r,i){r.addEventListener("mouseenter",function(e){i&&(t.addClass(r,"xgplayer-progress-dot-show"),t.addClass(n,"xgplayer-progress-dot-active"))}),r.addEventListener("mouseleave",function(e){i&&(t.removeClass(r,"xgplayer-progress-dot-show"),t.removeClass(n,"xgplayer-progress-dot-active"))}),r.addEventListener("touchend",function(a){a.stopPropagation(),i&&(t.hasClass(r,"xgplayer-progress-dot-show")||Object.keys(e.dotArr).forEach(function(n){e.dotArr[n]&&t.removeClass(e.dotArr[n],"xgplayer-progress-dot-show")}),t.toggleClass(r,"xgplayer-progress-dot-show"),t.toggleClass(n,"xgplayer-progress-dot-active"))})}function c(){e.config.progressDot&&"Array"===t.typeOf(e.config.progressDot)&&e.config.progressDot.forEach(function(n){if(n.time>=0&&n.time<=e.duration){var r=t.createDom("xg-progress-dot",n.text?'<span class="xgplayer-progress-tip">'+n.text+"</span>":"",{},"xgplayer-progress-dot");r.style.left=n.time/e.duration*100+"%",o.appendChild(r),e.dotArr[n.time]=r,d(r,n.text)}})}e.dotArr={},e.once("canplay",c),e.addProgressDot=function(n,r){if(!e.dotArr[n]&&n>=0&&n<=e.duration){var i=t.createDom("xg-progress-dot","",{},"xgplayer-progress-dot");i.style.left=n/e.duration*100+"%",o.appendChild(i),e.dotArr[n]=i,d(i,r)}},e.removeProgressDot=function(t){if(t>=0&&t<=e.duration&&e.dotArr[t]){var n=e.dotArr[t];n.parentNode.removeChild(n),n=null,e.dotArr[t]=null}},e.removeAllProgressDot=function(){Object.keys(e.dotArr).forEach(function(t){if(e.dotArr[t]){var n=e.dotArr[t];n.parentNode.removeChild(n),n=null,e.dotArr[t]=null}})};var f=0,p=0,h=0,g=0,y=0,v=0,m=[];e.config.thumbnail&&(f=e.config.thumbnail.pic_num,p=e.config.thumbnail.width,h=e.config.thumbnail.height,g=e.config.thumbnail.col,y=e.config.thumbnail.row,m=e.config.thumbnail.urls,u.style.width=p+"px",u.style.height=h+"px"),["touchstart","mousedown"].forEach(function(i){n.addEventListener(i,function(i){if(i.stopPropagation(),t.event(i),i._target===l||!e.config.allowSeekAfterEnded&&e.ended)return!0;n.focus(),r=n.getBoundingClientRect().width;var o=a.getBoundingClientRect().left,s=function(n){n.stopPropagation(),t.event(n),e.isProgressMoving=!0;var i=n.clientX-o;i>r&&(i=r);var s=i/r*e.duration;if(a.style.width=100*i/r+"%","video"!==e.videoConfig.mediaType||e.dash||e.config.closeMoveSeek){var l=t.findDom(e.controls,".xgplayer-time");l&&(l.innerHTML="<span>"+t.format(s||0)+"</span><em>"+t.format(e.duration))}else e.currentTime=Number(s).toFixed(1);e.emit("focus")},u=function i(l){if(l.stopPropagation(),t.event(l),window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s,{passive:!1}),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i),n.blur(),!e.isProgressMoving||"audio"===e.videoConfig.mediaType||e.dash||e.config.closeMoveSeek){var u=l.clientX-o;u>r&&(u=r);var d=u/r*e.duration;a.style.width=100*u/r+"%",e.currentTime=Number(d).toFixed(1)}e.emit("focus"),e.isProgressMoving=!1};return window.addEventListener("mousemove",s),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("mouseup",u),window.addEventListener("touchend",u),!0})}),n.addEventListener("mouseenter",function(r){if(!e.config.allowSeekAfterEnded&&e.ended)return!0;var i=n.getBoundingClientRect().left,a=n.getBoundingClientRect().width,o=function(r){var o=(r.clientX-i)/a*e.duration;o=o<0?0:o,l.textContent=t.format(o);var s=l.getBoundingClientRect().width;if(e.config.thumbnail){v=e.duration/f;var d=Math.floor(o/v);u.style.backgroundImage="url("+m[Math.ceil((d+1)/(g*y))-1]+")";var c=d+1-g*y*(Math.ceil((d+1)/(g*y))-1),x=Math.ceil(c/y)-1,b=c-x*y-1;u.style["background-position"]="-"+b*p+"px -"+x*h+"px";var _=r.clientX-i-p/2;_=(_=_>0?_:0)<a-p?_:a-p,u.style.left=_+"px",u.style.top=-10-h+"px",u.style.display="block",l.style.left=_+p/2-s/2+"px"}else{var k=r.clientX-i-s/2;k=(k=k>0?k:0)>a-s?a-s:k,l.style.left=k+"px"}t.hasClass(n,"xgplayer-progress-dot-active")?l.style.display="none":l.style.display="block"},s=function(e){o(e)};n.addEventListener("mousemove",s,!1),n.addEventListener("mouseleave",function e(t){n.removeEventListener("mousemove",s,!1),n.removeEventListener("mouseleave",e,!1),o(t),l.style.display="none",u.style.display="none"},!1),o(r)},!1);var x=function(){!r&&n&&(r=n.getBoundingClientRect().width),"audio"===e.videoConfig.mediaType&&e.isProgressMoving&&e.dash||(a.style.width=100*e.currentTime/e.duration+"%")};e.on("timeupdate",x);var b=function(){var t=e.buffered;if(t&&t.length>0){for(var n=t.end(t.length-1),r=0,i=t.length;r<i;r++)if(e.currentTime>=t.start(r)&&e.currentTime<=t.end(r)){n=t.end(r);for(var a=r+1;a<t.length;a++)if(t.start(a)-t.end(a-1)>=2){n=t.end(a-1);break}break}s.style.width=n/e.duration*100+"%"}},_=["bufferedChange","cacheupdate","ended","timeupdate"];_.forEach(function(t){e.on(t,b)}),e.once("destroy",function t(){e.removeAllProgressDot(),e.off("canplay",c),e.off("timeupdate",x),_.forEach(function(t){e.off(t,b)}),e.off("destroy",t)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_time",function(){var e=this,t=(e.root,i.default.util),n=t.createDom("xg-time","<span>"+(e.currentTime||t.format(0))+"</span>\n                                           <em>"+(e.duration||t.format(0))+"</em>",{},"xgplayer-time");e.once("ready",function(){e.controls.appendChild(n)});var r=function(){"audio"===e.videoConfig.mediaType&&e.isProgressMoving&&e.dash||(n.innerHTML="<span>"+t.format(e.currentTime||0)+"</span><em>"+t.format(e.duration)+"</em>")};e.on("durationchange",r),e.on("timeupdate",r),e.once("destroy",function t(){e.off("durationchange",r),e.off("timeupdate",r),e.off("destroy",t)})})},function(e,t,n){"use strict";var r=a(n(0)),i=a(n(88));function a(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_replay",function(){var e=this,t=r.default.util,n=e.root,a=e.lang.REPLAY,o=t.createDom("xg-replay",i.default+'\n                                         <xg-replay-txt class="xgplayer-replay-txt">'+a+"</xg-replay-txt>\n                                        ",{},"xgplayer-replay");function s(){var e=o.querySelector("path");if(e){var t=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof t&&t.indexOf("none")>-1)return;e.setAttribute("transform",t)}}e.once("ready",function(){n.appendChild(o)}),e.on("ended",s);var l=o.querySelector("svg");["click","touchend"].forEach(function(t){l.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("replayBtnClick")})}),e.once("destroy",function t(){e.off("ended",s),e.off("destroy",t)})})},function(e,t,n){"use strict";n.r(t),t.default='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_playbackRate",function(){var e=this,t=i.default.util;if(!e.config.playbackRate)return!1;e.config.playbackRate.sort(function(e,t){return t-e});var n=t.createDom("xg-playbackrate"," ",{},"xgplayer-playbackrate"),r=[];e.config.playbackRate.forEach(function(e){r.push({name:""+e,rate:e+"x",selected:!1})});var a=1,o=["<ul>"];r.forEach(function(t){e.config.defaultPlaybackRate&&e.config.defaultPlaybackRate.toString()===t.name?(t.selected=!0,a=e.config.defaultPlaybackRate,e.once("playing",function(){e.video.playbackRate=e.config.defaultPlaybackRate})):"1.0"!==t.name&&"1"!==t.name||e.config.defaultPlaybackRate&&1!==e.config.defaultPlaybackRate||(t.selected=!0),o.push("<li cname='"+t.name+"' class='"+(t.selected?"selected":"")+"'>"+t.rate+"</li>")}),o.push("</ul><p class='name'>"+a+"x</p>");var s=e.root.querySelector(".xgplayer-playbackrate");if(s){if(s.innerHTML=o.join(""),!s)return;s.querySelector(".name").addEventListener("mouseenter",function(n){n.preventDefault(),n.stopPropagation(),t.addClass(e.root,"xgplayer-playbackrate-active"),s.focus()})}else{if(n.innerHTML=o.join(""),!n)return;n.querySelector(".name").addEventListener("mouseenter",function(r){r.preventDefault(),r.stopPropagation(),t.addClass(e.root,"xgplayer-playbackrate-active"),n.focus()}),e.once("ready",function(){e.controls.appendChild(n)})}["touchend","click"].forEach(function(i){n.addEventListener(i,function(i){i.stopPropagation(),i.preventDefault();var o=i.target;if(o&&"li"===o.tagName.toLocaleLowerCase()){var s,l=void 0;r.forEach(function(n){n.selected=!1,o.textContent.replace(/\s+/g,"")===n.rate&&(Array.prototype.forEach.call(o.parentNode.childNodes,function(e){t.hasClass(e,"selected")&&(l=parseFloat(e.getAttribute("cname")),t.removeClass(e,"selected"))}),n.selected=!0,e.video.playbackRate=1*n.name,a=1*n.name)}),t.addClass(o,"selected"),s=parseFloat(o.getAttribute("cname")),o.parentNode.nextSibling.innerHTML=o.getAttribute("cname")+"x",e.emit("playbackrateChange",{from:l,to:s})}else!o||"p"!==o.tagName.toLocaleLowerCase()&&"span"!==o.tagName.toLocaleLowerCase()||(t.addClass(e.root,"xgplayer-playbackrate-active"),n.focus());e.emit("focus")},!1)}),n.addEventListener("mouseleave",function(n){n.preventDefault(),n.stopPropagation(),t.removeClass(e.root,"xgplayer-playbackrate-active")}),e.on("play",function(){e.video.playbackRate.toFixed(1)!==a.toFixed(1)&&(e.video.playbackRate=a)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_localPreview",function(){var e=this,t=(e.root,i.default.util);if(e.config.preview&&e.config.preview.uploadEl){var n=t.createDom("xg-preview",'<input type="file">',{},"xgplayer-preview"),r=n.querySelector("input");e.config.preview.uploadEl.appendChild(n),r.onchange=function(){e.emit("upload",r)}}})},function(e,t,n){"use strict";var r=a(n(0)),i=a(n(92));function a(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_download",function(){var e=this,t=r.default.util;if(e.config.download){var n=t.createDom("xg-download",'<xg-icon class="xgplayer-icon">'+i.default+"</xg-icon>",{},"xgplayer-download"),a=e.lang.DOWNLOAD_TIPS,o=t.createDom("xg-tips",'<span class="xgplayer-tip-download">'+a+"</span>",{},"xgplayer-tips");n.appendChild(o),e.once("ready",function(){e.controls.appendChild(n)}),["click","touchend"].forEach(function(t){n.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("downloadBtnClick")})})}})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n'},function(e,t,n){"use strict";var r=o(n(0)),i=o(n(94)),a=o(n(96));function o(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_danmu",function(){var e=this,t=e.root,n=r.default.util;if(e.config.danmu){var o=n.createDom("xg-danmu","",{},"xgplayer-danmu");e.once("ready",function(){t.appendChild(o)});var s=n.deepCopy({container:o,player:e.video,comments:[],area:{start:0,end:1}},e.config.danmu),l=void 0;e.config.danmu.panel&&(l=r.default.util.createDom("xg-panel",'<xg-panel-icon class="xgplayer-panel-icon">\n                                                '+a.default+'\n                                              </xg-panel-icon>\n                                              <xg-panel-slider class="xgplayer-panel-slider">\n                                                <xg-hidemode class="xgplayer-hidemode">\n                                                  <p class="xgplayer-hidemode-font">\u5c4f\u853d\u7c7b\u578b</p>\n                                                  <ul class="xgplayer-hidemode-radio">\n                                                    <li class="xgplayer-hidemode-scroll" id="false">\u6eda\u52a8</li><li class="xgplayer-hidemode-top" id="false">\u9876\u90e8</li><li class="xgplayer-hidemode-bottom" id="false">\u5e95\u90e8</li><li class="xgplayer-hidemode-color" id="false">\u8272\u5f69</li>\n                                                  </ul>\n                                                </xg-hidemode>\n                                                <xg-transparency class="xgplayer-transparency">\n                                                  <span>\u4e0d\u900f\u660e\u5ea6</span>\n                                                  <input class="xgplayer-transparency-line xgplayer-transparency-color xgplayer-transparency-bar xgplayer-transparency-gradient" type="range" min="0" max="100" step="0.1" value="50"></input>\n                                                </xg-transparency>\n                                                <xg-showarea class="xgplayer-showarea">\n                                                  <div class="xgplayer-showarea-name">\u663e\u793a\u533a\u57df</div>\n                                                  <div class="xgplayer-showarea-control">\n                                                    <div class="xgplayer-showarea-control-up">\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-onequarters">1/4</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-twoquarters selected-color">1/2</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-threequarters">3/4</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-full">1</span>\n                                                    </div>\n                                                    <div class="xgplayer-showarea-control-down">\n                                                      <div class="xgplayer-showarea-control-down-dots">\n                                                        <span class="xgplayer-showarea-onequarters-dot"></span>\n                                                        <span class="xgplayer-showarea-twoquarters-dot"></span>\n                                                        <span class="xgplayer-showarea-threequarters-dot"></span>\n                                                        <span class="xgplayer-showarea-full-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-showarea-line xgplayer-showarea-color xgplayer-showarea-bar xgplayer-gradient" type="range" min="1" max="4" step="1" value="1">\n                                                    </div>\n                                                  </div>\n                                                </xg-showarea>\n                                                <xg-danmuspeed class="xgplayer-danmuspeed">\n                                                  <div class="xgplayer-danmuspeed-name">\u5f39\u5e55\u901f\u5ea6</div>\n                                                  <div class="xgplayer-danmuspeed-control">\n                                                    <div class="xgplayer-danmuspeed-control-up">\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-small">\u6162</span>\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-middle selected-color">\u4e2d</span>\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-large">\u5feb</span>\n                                                    </div>\n                                                    <div class="xgplayer-danmuspeed-control-down">\n                                                      <div class="xgplayer-danmuspeed-control-down-dots">\n                                                        <span class="xgplayer-danmuspeed-small-dot"></span>\n                                                        <span class="xgplayer-danmuspeed-middle-dot"></span>\n                                                        <span class="xgplayer-danmuspeed-large-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-danmuspeed-line xgplayer-danmuspeed-color xgplayer-danmuspeed-bar xgplayer-gradient" type="range" min="50" max="150" step="50" value="100">\n                                                    </div>\n                                                  </div>\n                                                </xg-danmuspeed>\n                                                <xg-danmufont class="xgplayer-danmufont">\n                                                  <div class="xgplayer-danmufont-name">\u5b57\u4f53\u5927\u5c0f</div>\n                                                  <div class="xgplayer-danmufont-control">\n                                                    <div class="xgplayer-danmufont-control-up">\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-small">\u5c0f</span>\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-middle">\u4e2d</span>\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-large selected-color">\u5927</span>\n                                                    </div>\n                                                    <div class="xgplayer-danmufont-control-down">\n                                                      <div class="xgplayer-danmufont-control-down-dots">\n                                                        <span class="xgplayer-danmufont-small-dot"></span>\n                                                        <span class="xgplayer-danmufont-middle-dot"></span>\n                                                        <span class="xgplayer-danmufont-large-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-danmufont-line xgplayer-danmufont-color xgplayer-danmufont-bar xgplayer-gradient" type="range" min="20" max="30" step="5" value="25">\n                                                    </div>\n                                                  </div>\n                                                </xg-danmufont>\n                                              </xg-panel-slider>',{tabindex:7},"xgplayer-panel"),e.once("ready",function(){e.controls.appendChild(l)})),e.once("complete",function(){var t=new i.default(s);if(e.emit("initDefaultDanmu",t),e.danmu=t,e.config.danmu.panel){var n=l.querySelector(".xgplayer-panel-slider"),a=void 0;["mouseenter","touchend","click"].forEach(function(e){l.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation(),r.default.util.addClass(n,"xgplayer-panel-active"),l.focus(),a=!0})}),l.addEventListener("mouseleave",function(e){e.preventDefault(),e.stopPropagation(),r.default.util.removeClass(n,"xgplayer-panel-active"),a=!1}),n.addEventListener("mouseleave",function(e){e.preventDefault(),e.stopPropagation(),!1===a&&r.default.util.removeClass(n,"xgplayer-panel-active")});var o=e.config.danmu,u={scroll:l.querySelector(".xgplayer-hidemode-scroll"),top:l.querySelector(".xgplayer-hidemode-top"),bottom:l.querySelector(".xgplayer-hidemode-bottom"),color:l.querySelector(".xgplayer-hidemode-color")},d=function(t){var n=t;["touchend","click"].forEach(function(t){u[n].addEventListener(t,function(t){"true"!==u[n].getAttribute("id")?(u[n].style.color="#f85959",u[n].setAttribute("id","true"),e.danmu.hide(n)):(u[n].style.color="#aaa",u[n].setAttribute("id","false"),e.danmu.show(n))})})};for(var c in u)d(c);var f=l.querySelector(".xgplayer-transparency-line"),p=l.querySelector(".xgplayer-transparency-gradient"),h=50;if(p.style.background="linear-gradient(to right, #f85959 0%, #f85959 "+h+"%, #aaa "+h+"%, #aaa)",f.addEventListener("input",function(e){e.preventDefault(),e.stopPropagation(),h=e.target.value,p.style.background="linear-gradient(to right, #f85959 0%, #f85959 "+h+"%, #aaa "+h+"%, #aaa)",o.comments.forEach(function(e){e.style.opacity=h/100})}),l.querySelector(".xgplayer-showarea-line").addEventListener("input",function(t){t.preventDefault(),t.stopPropagation();var n=t.target.value;e.danmu.config.area.end=n/100,e.config.danmu.area.end=n/100,e.danmu.bulletBtn.main.channel.resize()}),l.querySelector(".xgplayer-danmuspeed-line").addEventListener("input",function(e){e.preventDefault(),e.stopPropagation();var t=e.target.value;o.comments.forEach(function(e){e.duration=100*(200-t)})}),l.querySelector(".xgplayer-danmufont-line").addEventListener("input",function(e){e.preventDefault(),e.stopPropagation();var t=e.target.value;o.comments.forEach(function(e){e.style.fontSize=t+"px"})}),navigator.userAgent.indexOf("Firefox")>-1)for(var g=0;g<n.querySelectorAll("input").length;g++)n.querySelectorAll("input")[g].style.marginTop="10px"}})}})},function(e,t,n){"use strict";(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(22))&&r.__esModule?r:{default:r},a={};a.domObj=new i.default,a.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach(function(t){var r=t,a=n[t];"video"===e||"audio"===e?a&&i.setAttribute(r,a):i.setAttribute(r,a)}),i},a.hasClass=function(e,t){return e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},a.addClass=function(e,t){e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.add(t)}):a.hasClass(e,t)||(e.className+=" "+t)},a.removeClass=function(e,t){e.classList?t.split(/\s+/g).forEach(function(t){e.classList.remove(t)}):a.hasClass(e,t)&&t.split(/\s+/g).forEach(function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")})},a.toggleClass=function(e,t){t.split(/\s+/g).forEach(function(t){a.hasClass(e,t)?a.removeClass(e,t):a.addClass(e,t)})},a.findDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(r){t.startsWith("#")&&(n=e.getElementById(t.slice(1)))}return n},a.deepCopy=function(e,t){if("Object"===a.typeOf(t)&&"Object"===a.typeOf(e))return Object.keys(t).forEach(function(n){"Object"!==a.typeOf(t[n])||t[n]instanceof Node?"Array"===a.typeOf(t[n])?e[n]="Array"===a.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:e[n]?a.deepCopy(e[n],t[n]):e[n]=t[n]}),e},a.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},a.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},a.formatTime=function(e){var t=Math.floor(e);return 1e3*t+(e-t)},t.default=a,e.exports=t.default},function(e,t,n){var r=n(13)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){e.exports=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(4))&&r.__esModule?r:{default:r};n(26),t.default=i.default,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(5)),a=s(n(21)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=o.default.deepCopy({overlap:!1,area:{start:0,end:1},live:!1,comments:[],direction:"r2l"},t),this.hideArr=[],(0,i.default)(this);var n=this;if(this.config.comments.forEach(function(e){e.duration=e.duration<5e3?5e3:e.duration,e.mode||(e.mode="scroll")}),!this.config.container||1!==this.config.container.nodeType)return this.emit("error","container id can't be empty"),!1;if(this.container=this.config.container,this.config.containerStyle){var r=this.config.containerStyle;Object.keys(r).forEach(function(e){n.container.style[e]=r[e]})}this.live=this.config.live,this.player=this.config.player,this.direction=this.config.direction,o.default.addClass(this.container,"danmu"),this.bulletBtn=new a.default(this),this.emit("ready")}return r(e,[{key:"start",value:function(){this.bulletBtn.main.start()}},{key:"pause",value:function(){this.bulletBtn.main.pause()}},{key:"play",value:function(){this.bulletBtn.main.play()}},{key:"stop",value:function(){this.bulletBtn.main.stop()}},{key:"sendComment",value:function(e){e&&e.id&&e.duration&&(e.el||e.txt)&&(e.duration=e.duration<5e3?5e3:e.duration,this.bulletBtn.main.data.push(e))}},{key:"setCommentID",value:function(e,t){var n=this.container.getBoundingClientRect();e&&t&&(this.bulletBtn.main.data.some(function(n){return n.id===e&&(n.id=t,!0)}),this.bulletBtn.main.queue.some(function(r){return r.id===e&&(r.id=t,r.pauseMove(n),r.startMove(n),!0)}))}},{key:"setCommentDuration",value:function(e,t){var n=this.container.getBoundingClientRect();e&&t&&(t=t<5e3?5e3:t,this.bulletBtn.main.data.some(function(n){return n.id===e&&(n.duration=t,!0)}),this.bulletBtn.main.queue.some(function(r){return r.id===e&&(r.duration=t,r.pauseMove(n),r.startMove(n),!0)}))}},{key:"setAllDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll",t=arguments[1],n=this.container.getBoundingClientRect();t&&(t=t<5e3?5e3:t,this.bulletBtn.main.data.forEach(function(n){e===n.mode&&(n.duration=t)}),this.bulletBtn.main.queue.forEach(function(r){e===r.mode&&(r.duration=t,r.pauseMove(n),r.startMove(n))}))}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";this.hideArr.indexOf(e)<0&&this.hideArr.push(e),this.bulletBtn.main.queue.filter(function(t){return e===t.mode||"color"===e&&t.color}).forEach(function(e){return e.remove()})}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll",t=this.hideArr.indexOf(e);t>-1&&this.hideArr.splice(t,1)}},{key:"setDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"r2l";this.emit("changeDirection",e)}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){var r,i,a,s,l,u,d,c=n(6),f=n(20),p=Function.prototype.apply,h=Function.prototype.call,g=Object.create,y=Object.defineProperty,v=Object.defineProperties,m=Object.prototype.hasOwnProperty,x={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){a.call(i,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},l={on:r=function(e,t){var n;return f(t),m.call(this,"__ee__")?n=this.__ee__:(n=x.value=g(null),y(this,"__ee__",x),x.value=null),n[e]?"object"==o(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i,off:a=function(e,t){var n,r,i,a;if(f(t),!m.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==o(r=n[e]))for(a=0;i=r[a];++a)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[a?0:1]:r.splice(a,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:s=function(e){var t,n,r,i,a;if(m.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==(void 0===i?"undefined":o(i))){for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)p.call(r,this,a)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];p.call(i,this,a)}}},u={on:c(r),once:c(i),off:c(a),emit:c(s)},d=v({},u),e.exports=t=function(e){return null==e?g(d):v(Object(e),u)},t.methods=l},function(e,t,n){var r=n(7),i=n(15),a=n(16),o=n(17);(e.exports=function(e,t){var n,a,s,l,u;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],null==e?(n=s=!0,a=!1):(n=o.call(e,"c"),a=o.call(e,"e"),s=o.call(e,"w")),u={value:t,configurable:n,enumerable:a,writable:s},l?r(i(l),u):u}).gs=function(e,t,n){var s,l,u,d;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:a(t)?null==n?n=void 0:a(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(s=!0,l=!1):(s=o.call(e,"c"),l=o.call(e,"e")),d={get:t,set:n,configurable:s,enumerable:l},u?r(i(u),d):d}},function(e,t,n){e.exports=n(8)()?Object.assign:n(9)},function(e,t,n){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){var r=n(10),i=n(14),a=Math.max;e.exports=function(e,t){var n,o,s,l=a(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},o=1;o<l;++o)t=arguments[o],r(t).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){e.exports=n(11)()?Object.keys:n(12)},function(e,t,n){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){var r=n(1),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e,t,n){e.exports=function(){}},function(e,t,n){var r=n(1);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){var r=n(1),i=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return i.call(arguments,function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){e.exports=function(e){return"function"==typeof e}},function(e,t,n){e.exports=n(18)()?String.prototype.contains:n(19)},function(e,t,n){var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(e,t,n){var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(0)),a=o(n(23));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.main=new a.default(t),t.config.defaultOff||this.main.start()}return r(e,[{key:"createSwitch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.switchBtn=i.default.createDom("dk-switch",'<span class="txt">\u5f39</span>',{},"danmu-switch "+(e?"danmu-switch-active":"")),this.switchBtn}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t={initDOM:function(){return document.createElement("div")},initSize:10},this.init(t)}return r(e,[{key:"init",value:function(e){this.idleList=[],this.usingList=[],this._id=0,this.options=e,this._expand(e.initSize)}},{key:"use",value:function(){this.idleList.length||this._expand(1);var e=this.idleList.shift();return this.usingList.push(e),e}},{key:"unuse",value:function(e){var t=this.usingList.indexOf(e);t<0||(this.usingList.splice(t,1),e.innerHTML="",e.textcontent="",e.style="",this.idleList.push(e))}},{key:"_expand",value:function(e){for(var t=0;t<e;t++)this.idleList.push(this.options.initDOM(this._id++))}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(24)),a=s(n(25)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.container=t.container,this.channel=new i.default(t),this.data=[].concat(t.config.comments),this.queue=[],this.timer=null,this.retryTimer=null,this.interval=2e3,this.status="idle",t.on("bullet_remove",this.updateQueue.bind(this));var n=this;this.danmu.on("changeDirection",function(e){n.danmu.direction=e})}return r(e,[{key:"updateQueue",value:function(e){var t=this;t.queue.some(function(n,r){return n.id===e.bullet.id&&(t.queue.splice(r,1),!0)})}},{key:"init",value:function(e,t){t||(t=this),t.data.sort(function(e,t){return e.start-t.start}),t.retryTimer||(t.retryTimer=setInterval(function(){t.readData(),t.dataHandle()},t.interval-1e3))}},{key:"start",value:function(){this.status="playing",this.queue=[],this.container.innerHTML="",this.channel.resetWithCb(this.init,this)}},{key:"stop",value:function(){this.status="closed",clearInterval(this.retryTimer),this.retryTimer=null,this.channel.reset(),this.queue=[],this.container.innerHTML=""}},{key:"play",value:function(){this.status="playing";var e=this.channel.channels,t=this.danmu.container.getBoundingClientRect();e&&e.length>0&&["scroll","top","bottom"].forEach(function(n){for(var r=0;r<e.length;r++)e[r].queue[n].forEach(function(e){e.resized||(e.startMove(t),e.resized=!0)});for(var i=0;i<e.length;i++)e[i].queue[n].forEach(function(e){e.resized=!1})})}},{key:"pause",value:function(){this.status="paused";var e=this.channel.channels,t=this.danmu.container.getBoundingClientRect();e&&e.length>0&&["scroll","top","bottom"].forEach(function(n){for(var r=0;r<e.length;r++)e[r].queue[n].forEach(function(e){e.pauseMove(t)})})}},{key:"dataHandle",value:function(){var e=this;"paused"!==this.status&&"closed"!==this.status&&e.queue.length&&e.queue.forEach(function(t){"waiting"!==t.status&&"paused"!==t.status||t.startMove(e.channel.containerPos)})}},{key:"readData",value:function(){var e=this,t=this.danmu,n=0;t.player&&t.player.currentTime&&(n=o.default.formatTime(t.player.currentTime));var r=void 0,i=e.interval,s=e.channel,l=void 0;t.player?(l=e.data.filter(function(t){return!t.start&&e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)&&(t.start=n),e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)&&t.start-i<=n&&n<=t.start+i}),t.live&&(e.data=e.data.filter(function(e){return e.start||(e.start=n),e.start>n-3*i}))):l=e.data.filter(function(t){return e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)}),l.length>0&&l.forEach(function(n){(r=new a.default(t,n)).attach(),s.addBullet(r).result?(e.queue.push(r),r.topInit()):r.detach()})}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.reset();var n=this;this.danmu.on("bullet_remove",function(e){n.removeBullet(e.bullet)}),this.direction=t.direction,this.danmu.on("changeDirection",function(e){n.direction=e}),this.containerPos=this.danmu.container.getBoundingClientRect(),this.containerWidth=this.containerPos.width,this.containerHeight=this.containerPos.height,this.containerLeft=this.containerPos.left,this.containerRight=this.containerPos.right,this.danmu.bulletResizeTimer=setInterval(function(){n.containerPos=n.danmu.container.getBoundingClientRect(),(Math.abs(n.containerPos.width-n.containerWidth)>=2||Math.abs(n.containerPos.height-n.containerHeight)>=2||Math.abs(n.containerPos.left-n.containerLeft)>=2||Math.abs(n.containerPos.right-n.containerRight)>=2)&&(n.containerWidth=n.containerPos.width,n.containerHeight=n.containerPos.height,n.containerLeft=n.containerPos.left,n.containerRight=n.containerPos.right,n.resize(!0))},50)}return r(e,[{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.danmu.container,n=this;setTimeout(function(){n.danmu.bulletBtn.main.data&&n.danmu.bulletBtn.main.data.forEach(function(e){e.bookChannelId&&delete e.bookChannelId});var r=t.getBoundingClientRect();n.width=r.width,n.height=r.height,n.danmu.config.area&&n.danmu.config.area.start>=0&&n.danmu.config.area.end>=n.danmu.config.area.start&&("b2t"===n.direction?n.width=n.width*(n.danmu.config.area.end-n.danmu.config.area.start):n.height=n.height*(n.danmu.config.area.end-n.danmu.config.area.start)),n.container=t;var i,a=/mobile/gi.test(navigator.userAgent)?10:12;i="b2t"===n.direction?Math.floor(n.width/a):Math.floor(n.height/a);for(var o=[],s=0;s<i;s++)o[s]={id:s,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(n.channels&&n.channels.length<=o.length){for(var l=function(t){o[t]={id:t,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach(function(r){n.channels[t].queue[r].forEach(function(i){i.el&&(o[t].queue[r].push(i),i.resized||(i.pauseMove(n.containerPos,e),i.startMove(n.containerPos),i.resized=!0))})}),n.channels[t].queue.bottom.forEach(function(r){if(r.el){if(o[t+o.length-n.channels.length].queue.bottom.push(r),r.channel_id[0]+r.channel_id[1]-1===t){var i=[].concat(r.channel_id);r.channel_id=[i[0]-n.channels.length+o.length,i[1]],r.top=r.channel_id[0]*a,n.danmu.config.area&&n.danmu.config.area.start&&(r.top+=n.containerHeight*n.danmu.config.area.start),r.topInit()}r.resized||(r.pauseMove(n.containerPos,e),r.startMove(n.containerPos),r.resized=!0)}})},u=0;u<n.channels.length;u++)l(u);for(var d=function(e){["scroll","top","bottom"].forEach(function(t){o[e].queue[t].forEach(function(e){e.resized=!1})})},c=0;c<o.length;c++)d(c);n.channels=o,"b2t"===n.direction?n.channelWidth=a:n.channelHeight=a}else if(n.channels&&n.channels.length>o.length){for(var f=function(t){o[t]={id:t,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach(function(r){if("top"===r&&t>Math.floor(o.length/2));else if("bottom"===r&&t<=Math.floor(o.length/2));else{var i="bottom"===r?t-o.length+n.channels.length:t;n.channels[i].queue[r].forEach(function(s,l){if(s.el){if(o[t].queue[r].push(s),"bottom"===r&&s.channel_id[0]+s.channel_id[1]-1===i){var u=[].concat(s.channel_id);s.channel_id=[u[0]-n.channels.length+o.length,u[1]],s.top=s.channel_id[0]*a,n.danmu.config.area&&n.danmu.config.area.start&&(s.top+=n.containerHeight*n.danmu.config.area.start),s.topInit()}s.resized||(s.pauseMove(n.containerPos,e),s.startMove(n.containerPos),s.resized=!0)}n.channels[i].queue[r].splice(l,1)})}})},p=0;p<o.length;p++)f(p);for(var h=function(e){["scroll","top","bottom"].forEach(function(t){n.channels[e].queue[t].forEach(function(e){e.pauseMove(n.containerPos),e.remove()})})},g=o.length;g<n.channels.length;g++)h(g);for(var y=function(e){["scroll","top","bottom"].forEach(function(t){o[e].queue[t].forEach(function(e){e.resized=!1})})},v=0;v<o.length;v++)y(v);n.channels=o,"b2t"===n.direction?n.channelWidth=a:n.channelHeight=a}},10)}},{key:"addBullet",value:function(e){var t=this.danmu,n=this.channels,r=void 0,i=void 0,a=void 0;if("b2t"===this.direction?(i=this.channelWidth,a=Math.ceil(e.width/i)):(r=this.channelHeight,a=Math.ceil(e.height/r)),a>n.length)return{result:!1,message:"exceed channels.length, occupy="+a+",channelsSize="+n.length};for(var o=!0,s=void 0,l=-1,u=0,d=n.length;u<d;u++)if(n[u].queue[e.mode].some(function(t){return t.id===e.id}))return{result:!1,message:"exsited, channelOrder="+u+",danmu_id="+e.id};if("scroll"===e.mode)for(var c=0,f=n.length-a;c<=f;c++){o=!0;for(var p=c;p<c+a;p++){if((s=n[p]).operating.scroll){o=!1;break}if((s.bookId.scroll||e.prior)&&s.bookId.scroll!==e.id){o=!1;break}s.operating.scroll=!0;var h=s.queue.scroll[0];if(h){var g=h.el.getBoundingClientRect();if("b2t"===this.direction){if(g.bottom>this.containerPos.bottom){o=!1,s.operating.scroll=!1;break}}else if(g.right>this.containerPos.right){o=!1,s.operating.scroll=!1;break}var y,v=void 0,m=void 0,x=void 0,b=void 0;if("b2t"===this.direction?(m=(g.top-this.containerPos.top+g.height)/(v=(this.containerPos.height+g.height)/h.duration),x=this.containerPos.height,b=(this.containerPos.height+e.height)/e.duration):(m=(g.left-this.containerPos.left+g.width)/(v=(this.containerPos.width+g.width)/h.duration),x=this.containerPos.width,b=(this.containerPos.width+e.width)/e.duration),y=x/b,t.config.bOffset||(t.config.bOffset=0),v<b&&m+t.config.bOffset>y){o=!1,s.operating.scroll=!1;break}}s.operating.scroll=!1}if(o){l=c;break}}else if("top"===e.mode)for(var _=0,k=n.length-a;_<=k;_++){o=!0;for(var w=_;w<_+a;w++){if(w>Math.floor(n.length/2)){o=!1;break}if((s=n[w]).operating[e.mode]){o=!1;break}if((s.bookId[e.mode]||e.prior)&&s.bookId[e.mode]!==e.id){o=!1;break}if(s.operating[e.mode]=!0,s.queue[e.mode].length>0){o=!1,s.operating[e.mode]=!1;break}s.operating[e.mode]=!1}if(o){l=_;break}}else if("bottom"===e.mode)for(var E=n.length-a;E>=0;E--){o=!0;for(var S=E;S<E+a;S++){if(S<=Math.floor(n.length/2)){o=!1;break}if((s=n[S]).operating[e.mode]){o=!1;break}if((s.bookId[e.mode]||e.prior)&&s.bookId[e.mode]!==e.id){o=!1;break}if(s.operating[e.mode]=!0,s.queue[e.mode].length>0){o=!1,s.operating[e.mode]=!1;break}s.operating[e.mode]=!1}if(o){l=E;break}}if(-1!==l){for(var T=l,A=l+a;T<A;T++)(s=n[T]).operating[e.mode]=!0,s.queue[e.mode].unshift(e),e.prior&&delete s.bookId[e.mode],s.operating[e.mode]=!1;return e.prior&&(delete e.bookChannelId,t.bulletBtn.main.data.some(function(t){return t.id===e.id&&(delete t.bookChannelId,!0)})),e.channel_id=[l,a],"b2t"===this.direction?(e.top=l*i,this.danmu.config.area&&this.danmu.config.area.start&&(e.top+=this.containerWidth*this.danmu.config.area.start)):(e.top=l*r,this.danmu.config.area&&this.danmu.config.area.start&&(e.top+=this.containerHeight*this.danmu.config.area.start)),{result:e,message:"success"}}if(e.prior)if(e.bookChannelId)t.bulletBtn.main.data.some(function(t){return t.id===e.id&&(t.start+=2e3,!0)});else{l=-1;for(var O=0,D=n.length-a;O<=D;O++){o=!0;for(var R=O;R<O+a;R++)if(n[R].bookId[e.mode]){o=!1;break}if(o){l=O;break}}if(-1!==l){for(var C=l;C<l+a;C++)n[C].bookId[e.mode]=e.id;t.bulletBtn.main.data.some(function(t){return t.id===e.id&&(t.start+=2e3,t.bookChannelId=[l,a],!0)})}}return{result:!1,message:"no surplus will right"}}},{key:"removeBullet",value:function(e){for(var t=this.channels,n=e.channel_id,r=void 0,i=n[0],a=n[0]+n[1];i<a;i++)if(r=t[i]){r.operating[e.mode]=!0;var o=-1;r.queue[e.mode].some(function(t,n){return t.id===e.id&&(o=n,!0)}),o>-1&&r.queue[e.mode].splice(o,1),r.operating[e.mode]=!1}}},{key:"resetArea",value:function(){var e=this.danmu.container,t=this,n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.danmu.config.area&&t.danmu.config.area.start>=0&&t.danmu.config.area.end>=t.danmu.config.area.start&&("b2t"===t.direction?t.width=t.width*(t.danmu.config.area.end-t.danmu.config.area.start):t.height=t.height*(t.danmu.config.area.end-t.danmu.config.area.start)),t.container=e;var r,i=/mobile/gi.test(navigator.userAgent)?10:12;r="b2t"===t.direction?Math.floor(t.width/i):Math.floor(t.height/i);for(var a=[],o=0;o<r;o++)a[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(t.channels&&t.channels.length<=a.length){for(var s=function(e){a[e]={id:e,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach(function(n){t.channels[e].queue[n].forEach(function(r){r.el&&(a[e].queue[n].push(r),r.resized||(r.pauseMove(t.containerPos,!1),r.startMove(t.containerPos),r.resized=!0))})}),t.channels[e].queue.bottom.forEach(function(n){if(n.el){if(a[e+a.length-t.channels.length].queue.bottom.push(n),n.channel_id[0]+n.channel_id[1]-1===e){var r=[].concat(n.channel_id);n.channel_id=[r[0]-t.channels.length+a.length,r[1]],n.top=n.channel_id[0]*i,t.danmu.config.area&&t.danmu.config.area.start&&(n.top+=t.containerHeight*t.danmu.config.area.start),n.topInit()}n.resized||(n.pauseMove(t.containerPos,!1),n.startMove(t.containerPos),n.resized=!0)}})},l=0;l<t.channels.length;l++)s(l);for(var u=function(e){["scroll","top","bottom"].forEach(function(t){a[e].queue[t].forEach(function(e){e.resized=!1})})},d=0;d<a.length;d++)u(d);t.channels=a,"b2t"===t.direction?t.channelWidth=i:t.channelHeight=i}else if(t.channels&&t.channels.length>a.length){for(var c=function(e){a[e]={id:e,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach(function(n){if("top"===n&&e>Math.floor(a.length/2));else if("bottom"===n&&e<=Math.floor(a.length/2));else{var r="bottom"===n?e-a.length+t.channels.length:e;t.channels[r].queue[n].forEach(function(o,s){if(o.el){if(a[e].queue[n].push(o),"bottom"===n&&o.channel_id[0]+o.channel_id[1]-1===r){var l=[].concat(o.channel_id);o.channel_id=[l[0]-t.channels.length+a.length,l[1]],o.top=o.channel_id[0]*i,t.danmu.config.area&&t.danmu.config.area.start&&(o.top+=t.containerHeight*t.danmu.config.area.start),o.topInit()}o.resized||(o.pauseMove(t.containerPos,!1),o.startMove(t.containerPos),o.resized=!0)}t.channels[r].queue[n].splice(s,1)})}})},f=0;f<a.length;f++)c(f);for(var p=function(e){["scroll","top","bottom"].forEach(function(t){a[e].queue[t].forEach(function(e){e.resized=!1})})},h=0;h<a.length;h++)p(h);t.channels=a,"b2t"===t.direction?t.channelWidth=i:t.channelHeight=i}}},{key:"reset",value:function(){var e=this.danmu.container,t=this;t.channels&&t.channels.length>0&&["scroll","top","bottom"].forEach(function(e){for(var n=0;n<t.channels.length;n++)t.channels[n].queue[e].forEach(function(e){e.pauseMove(t.containerPos),e.remove()})}),setTimeout(function(){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.danmu.config.area&&t.danmu.config.area.start>=0&&t.danmu.config.area.end>=t.danmu.config.area.start&&("b2t"===t.direction?t.width=t.width*(t.danmu.config.area.end-t.danmu.config.area.start):t.height=t.height*(t.danmu.config.area.end-t.danmu.config.area.start)),t.container=e;var r,i=/mobile/gi.test(navigator.userAgent)?10:12;r="b2t"===t.direction?Math.floor(t.width/i):Math.floor(t.height/i);for(var a=[],o=0;o<r;o++)a[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};t.channels=a,"b2t"===t.direction?t.channelWidth=i:t.channelHeight=i},200)}},{key:"resetWithCb",value:function(e,t){var n=this.danmu.container,r=this;r.channels&&r.channels.length>0&&["scroll","top","bottom"].forEach(function(e){for(var t=0;t<r.channels.length;t++)r.channels[t].queue[e].forEach(function(e){e.pauseMove(r.containerPos),e.remove()})});var i=n.getBoundingClientRect();r.width=i.width,r.height=i.height,r.danmu.config.area&&r.danmu.config.area.start>=0&&r.danmu.config.area.end>=r.danmu.config.area.start&&("b2t"===r.direction?r.width=r.width*(r.danmu.config.area.end-r.danmu.config.area.start):r.height=r.height*(r.danmu.config.area.end-r.danmu.config.area.start)),r.container=n;var a,o=/mobile/gi.test(navigator.userAgent)?10:12;a="b2t"===r.direction?Math.floor(r.width/o):Math.floor(r.height/o);for(var s=[],l=0;l<a;l++)s[l]={id:l,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};r.channels=s,r.channelHeight=o,e&&e(!0,t)}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(0))&&r.__esModule?r:{default:r},o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.danmu=t,this.duration=n.duration,this.id=n.id,this.container=t.container,this.start=n.start,this.prior=n.prior,this.color=n.color,this.bookChannelId=n.bookChannelId,this.direction=t.direction;var r=this;this.danmu.on("changeDirection",function(e){r.direction=e});var i=void 0;if(this.domObj=a.default.domObj,n.el&&1===n.el.nodeType)(i=this.domObj.use()).appendChild(a.default.copyDom(n.el));else if((i=this.domObj.use()).textContent=n.txt,n.style){var o=n.style;Object.keys(o).forEach(function(e){i.style[e]=o[e]})}"top"===n.mode||"bottom"===n.mode?this.mode=n.mode:this.mode="scroll",this.el=i,this.status="waiting";var s=this.container.getBoundingClientRect();this.el.style.left=s.width+"px"}return i(e,[{key:"attach",value:function(){this.container.appendChild(this.el),this.elPos=this.el.getBoundingClientRect(),"b2t"===this.direction?(this.width=this.elPos.height,this.height=this.elPos.width):(this.width=this.elPos.width,this.height=this.elPos.height)}},{key:"detach",value:function(){this.container&&this.el&&(this.domObj.unuse(this.el),this.container.removeChild(this.el));var e=this;this.danmu.off("changeDirection",function(t){e.direction=t}),this.el=null}},{key:"topInit",value:function(){if("b2t"===this.direction){var e=this.container.getBoundingClientRect();this.el.style.transformOrigin="left top",this.el.style.transform="translateX(-"+this.top+"px) translateY("+e.height+"px) translateZ(0px) rotate(90deg)",this.el.style.transition="transform 0s linear 0s"}else this.el.style.top=this.top+"px"}},{key:"pauseMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("paused"!==this.status&&(this.status="paused",clearTimeout(this.removeTimer),this.el))if(this.el.style.willChange="auto","scroll"===this.mode){if(t){var n,r=((new Date).getTime()-this.moveTime)/1e3*this.moveV;n=this.moveMoreS-r>=0?"b2t"===this.direction?(this.moveMoreS-r)/this.moveContainerHeight*e.height:(this.moveMoreS-r)/this.moveContainerWidth*e.width:this.moveMoreS-r,"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+n+"px) translateZ(0px) rotate(90deg)":this.el.style.left=n+"px"}else"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+(this.el.getBoundingClientRect().top-e.top)+"px) translateZ(0px) rotate(90deg)":this.el.style.left=this.el.getBoundingClientRect().left-e.left+"px";"b2t"===this.direction?this.el.style.transition="transform 0s linear 0s":(this.el.style.transform="translateX(0px) translateY(0px) translateZ(0px)",this.el.style.transition="transform 0s linear 0s")}else this.pastDuration&&this.startTime?this.pastDuration=this.pastDuration+(new Date).getTime()-this.startTime:this.pastDuration=1}},{key:"startMove",value:function(e){var t=this;if(this.el&&"start"!==this.status)if(this.status="start",this.el.style.willChange="transform","scroll"===this.mode)if("b2t"===this.direction){this.moveV=(e.height+this.height)/this.duration*1e3;var n=(t.el.getBoundingClientRect().bottom-e.top)/this.moveV;this.el.style.transition="transform "+n+"s linear 0s",setTimeout(function(){t.el&&(t.el.style.transform="translateX(-"+t.top+"px) translateY(-"+t.height+"px) translateZ(0px) rotate(90deg)",t.moveTime=(new Date).getTime(),t.moveMoreS=t.el.getBoundingClientRect().top-e.top,t.moveContainerHeight=e.height,t.removeTimer=setTimeout(a,1e3*n))},20)}else{this.moveV=(e.width+this.width)/this.duration*1e3;var r=(t.el.getBoundingClientRect().right-e.left)/this.moveV;this.el.style.transition="transform "+r+"s linear 0s",setTimeout(function(){t.el&&(t.el.style.transform="translateX(-"+(t.el.getBoundingClientRect().right-e.left)+"px) translateY(0px) translateZ(0px)",t.moveTime=(new Date).getTime(),t.moveMoreS=t.el.getBoundingClientRect().left-e.left,t.moveContainerWidth=e.width,t.removeTimer=setTimeout(a,1e3*r))},20)}else{this.el.style.left="50%",this.el.style.margin="0 0 0 -"+this.width/2+"px",this.pastDuration||(this.pastDuration=1);var i=this.duration>=this.pastDuration?this.duration-this.pastDuration:0;this.removeTimer=setTimeout(a,i),this.startTime=(new Date).getTime()}function a(){if(t.el)if("scroll"===t.mode){var e=t.danmu.container.getBoundingClientRect(),n=t.el.getBoundingClientRect();"b2t"===t.direction?n&&n.bottom<=e.top+100?(t.status="end",t.remove()):(t.pauseMove(e),t.startMove(e)):n&&n.right<=e.left+100?(t.status="end",t.remove()):(t.pauseMove(e),t.startMove(e))}else t.status="end",t.remove()}}},{key:"remove",value:function(){var e=this;this.removeTimer&&clearTimeout(this.removeTimer),e.el&&e.el.parentNode&&(e.el.style.willChange="auto",this.danmu.off("changeDirection",function(t){e.direction=t}),this.domObj.unuse(e.el),e.el.parentNode.removeChild(e.el),e.el=null,e.danmu.emit("bullet_remove",{bullet:e}))}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){var r=n(27);"string"==typeof r&&(r=[[e.i,r,""]]),n(29)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(28)(!1)).push([e.i,".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var a=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i,a={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,d=0,c=[],f=n(30);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=a[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(x(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(x(r.parts[o],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=o(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),g(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function x(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var o=d++;n=u||(u=v(t)),r=k.bind(null,n,o,!1),i=k.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),g(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=f(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=("undefined"==typeof document?"undefined":o(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==o(t.attrs)?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return p(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var o=n[i];(s=a[o.id]).refs--,r.push(s)}for(e&&p(h(e,t),t),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var b,_=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function k(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(95)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40">\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M36.5,18.73a1.19,1.19,0,0,0,1-1.14V16.33a1.2,1.2,0,0,0-1-1.13l-.61-.08a1.75,1.75,0,0,1-1.3-.86l-.21-.36-.2-.36A1.72,1.72,0,0,1,34,12l.23-.58a1.18,1.18,0,0,0-.5-1.42l-1.1-.62a1.18,1.18,0,0,0-1.47.3l-.39.51a1.82,1.82,0,0,1-1.41.72c-.44,0-1.88-.27-2.22-.7l-.39-.49a1.18,1.18,0,0,0-1.48-.28l-1.09.64a1.19,1.19,0,0,0-.47,1.43l.25.59a1.87,1.87,0,0,1-.08,1.58c-.26.37-1.17,1.5-1.71,1.58l-.63.09a1.19,1.19,0,0,0-1,1.14l0,1.27a1.17,1.17,0,0,0,1,1.12l.61.08a1.74,1.74,0,0,1,1.3.87l.21.36.2.35A1.69,1.69,0,0,1,24,22.08l-.23.59a1.19,1.19,0,0,0,.5,1.42l1.1.62a1.19,1.19,0,0,0,1.48-.31l.38-.5a1.83,1.83,0,0,1,1.41-.72c.44,0,1.88.25,2.22.69l.39.49a1.18,1.18,0,0,0,1.48.28L33.86,24a1.19,1.19,0,0,0,.47-1.43L34.09,22a1.84,1.84,0,0,1,.07-1.58c.26-.37,1.17-1.5,1.72-1.58ZM31,18.94a2.76,2.76,0,0,1-4.65-1.2A2.71,2.71,0,0,1,27,15.13a2.76,2.76,0,0,1,4.64,1.2A2.7,2.7,0,0,1,31,18.94Z"/>\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M32,0H3.59A3.59,3.59,0,0,0,0,3.59v17A3.59,3.59,0,0,0,3.59,24.2H19.72a12.59,12.59,0,0,1-.81-1.2A11.73,11.73,0,0,1,35.54,7.28V3.59A3.59,3.59,0,0,0,32,0ZM13,14.18H4.29a1.52,1.52,0,0,1,0-3H13a1.52,1.52,0,0,1,0,3ZM16.45,8H4.29a1.51,1.51,0,0,1,0-3H16.45a1.51,1.51,0,1,1,0,3Z"/>\n</svg>\n'},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_pip",function(){var e=this,t=i.default.util;if(e.config.pip){var n=e.lang.PIP,r=t.createDom("xg-pip",'<p class="name"><span>'+n+"</span></p>",{tabindex:9},"xgplayer-pip");e.once("ready",function(){e.controls.appendChild(r)}),["click","touchend"].forEach(function(t){r.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("pipBtnClick")})})}})},function(e,t,n){"use strict";var r=a(n(0)),i=a(n(99));function a(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_playNext",function(){var e=this,t=r.default.util,n=e.config.playNext;if(n&&n.urlList){var a=t.createDom("xg-playnext",'<xg-icon class="xgplayer-icon">'+i.default+"</xg-icon>",{},"xgplayer-playnext"),o=e.lang.PLAYNEXT_TIPS,s=t.createDom("xg-tips",'<span class="xgplayer-tip-playnext">'+o+"</span>",{},"xgplayer-tips");a.appendChild(s),e.once("ready",function(){e.controls.appendChild(a)}),["click","touchend"].forEach(function(t){a.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("playNextBtnClick")})})}})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n'},function(e,t,n){"use strict";var r=a(n(0)),i=a(n(101));function a(e){return e&&e.__esModule?e:{default:e}}r.default.install("s_rotate",function(){var e=this,t=r.default.util;if(e.config.rotate){var n=t.createDom("xg-rotate",'<xg-icon class="xgplayer-icon">'+i.default+"</xg-icon>",{},"xgplayer-rotate"),a=e.lang.ROTATE_TIPS,o=t.createDom("xg-tips",'<span class="xgplayer-tip-rotate">'+a+"</span>",{},"xgplayer-tips");n.appendChild(o),e.once("ready",function(){e.controls.appendChild(n)}),["click","touchend"].forEach(function(t){n.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("rotateBtnClick")})})}})},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_screenShot",function(){var e=this,t=i.default.util;if(e.config.screenShot){var n=e.lang.SCREENSHOT,r=t.createDom("xg-screenshot",'<p class="name"><span>'+n+"</span></p>",{tabindex:11},"xgplayer-screenshot");e.once("ready",function(){e.controls.appendChild(r)}),["click","touchend"].forEach(function(t){r.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.emit("screenShotBtnClick")})})}})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_textTrack",function(){if(!(navigator.userAgent.indexOf("Chrome")<0)){var e=this,t=e.root,n=i.default.util,r=(i.default.sniffer,e.controls,n.createDom("xg-texttrack","",{tabindex:7},"xgplayer-texttrack")),a=e.config.textTrack;a&&Array.isArray(a)&&a.length>1&&(n.addClass(e.root,"xgplayer-is-texttrack"),e.on("canplay",function(){var i=["<ul>"];i.push("<li class=''}'>\u5173\u95ed</li>"),a.forEach(function(e){i.push("<li class='"+(e.default?"selected":"")+"'>"+e.label+"</li>")});var o=e.lang.TEXTTRACK;i.push('</ul><p class="name"><em>'+o+"</em></p>");var s=t.querySelector(".xgplayer-texttrack");if(s){s.innerHTML=i.join("");var l=s.querySelector(".name");e.config.textTrackActive&&"hover"!==e.config.textTrackActive||l.addEventListener("mouseenter",function(e){e.preventDefault(),e.stopPropagation(),n.addClass(t,"xgplayer-texttrack-active"),s.focus()})}else{r.innerHTML=i.join("");var u=r.querySelector(".name");e.config.textTrackActive&&"hover"!==e.config.textTrackActive||u.addEventListener("mouseenter",function(t){t.preventDefault(),t.stopPropagation(),n.addClass(e.root,"xgplayer-texttrack-active"),r.focus()}),e.controls.appendChild(r)}})),["touchend","click"].forEach(function(t){r.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation();var i=t.target||t.srcElement;if(i&&"li"===i.tagName.toLocaleLowerCase()){Array.prototype.forEach.call(i.parentNode.childNodes,function(e){n.removeClass(e,"selected")}),n.addClass(i,"selected");var o=e.root.getElementsByTagName("Track");"\u5173\u95ed"===i.innerHTML?(o[0].track.mode="hidden",n.removeClass(e.root,"xgplayer-texttrack-active")):(n.hasClass(e.root,"xgplayer-texttrack-active")||n.addClass(e.root,"xgplayer-texttrack-active"),o[0].track.mode="showing",a.some(function(e){if(e.label===i.innerHTML)return o[0].src=e.src,e.kind&&(o[0].kind=e.kind),o[0].label=e.label,e.srclang&&(o[0].srclang=e.srclang),!0}),e.emit("textTrackChange",i.innerHTML))}else"click"!==e.config.textTrackActive||!i||"p"!==i.tagName.toLocaleLowerCase()&&"em"!==i.tagName.toLocaleLowerCase()||(n.addClass(e.root,"xgplayer-texttrack-active"),r.focus())},!1)}),r.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),n.removeClass(e.root,"xgplayer-texttrack-active")})}})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_error",function(){var e=this,t=e.root,n=i.default.util,r=n.createDom("xg-error",'<em class="xgplayer-error-text">\u8bf7<span class="xgplayer-error-refresh">\u5237\u65b0</span>\u8bd5\u8bd5</em>',{},"xgplayer-error");e.once("ready",function(){t.appendChild(r)});var a=r.querySelector(".xgplayer-error-text"),o=null;function s(){e.error?a.innerHTML=e.error:e.config.lang&&"zh-cn"===e.config.lang?a.innerHTML=e.lang.ERROR+'\uff0c\u8bf7<span class="xgplayer-error-refresh">\u5237\u65b0</span>\u8bd5\u8bd5':a.innerHTML=e.lang.ERROR+'\uff0cplease try to <span class="xgplayer-error-refresh">refresh</span>',n.addClass(e.root,"xgplayer-is-error"),(o=r.querySelector(".xgplayer-error-refresh"))&&["touchend","click"].forEach(function(t){o.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation();var n=t.target||t.srcElement;n&&"span"===n.tagName.toLocaleLowerCase()&&(e.controls.style.display="flex",e.reload())})})}e.on("error",s),e.once("destroy",function t(){e.off("error",s),e.off("destroy",t)})})},function(e,t,n){"use strict";var r,i=(r=n(0))&&r.__esModule?r:{default:r};i.default.install("s_memoryPlay",function(){var e=this,t=i.default.util,n=e.config.lastPlayTime||0,r=e.config.lastPlayTimeHideDelay||0,a=null;if(!(n<=0)){(a=t.createDom("xg-memoryplay",'<div class="xgplayer-memoryplay-spot"><div class="xgplayer-progress-tip">\u60a8\u4e0a\u6b21\u89c2\u770b\u5230 <span class="xgplayer-lasttime">'+t.format(n)+'</span> \uff0c\u4e3a\u60a8\u81ea\u52a8\u7eed\u64ad <span class="btn-close"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg></span></div></div>',{},"xgplayer-memoryplay")).addEventListener("mouseover",function(e){e.stopPropagation()});var o=function(){a&&a.parentNode.removeChild(a),a=null};a.querySelector(".xgplayer-progress-tip .btn-close").addEventListener("click",o),e.once("play",function(){e.root.appendChild(a),e.emit("memoryPlayStart",n),r>0&&setTimeout(function(){o()},1e3*r)}),e.once("ended",o)}})}])},module.exports=t()},1938:function(e,t){var n=function(){var e,t,r,i,a,o,s="undefined",l="object",u="Shockwave Flash",d="application/x-shockwave-flash",c="SWFObjectExprInst",f="onreadystatechange",p=window,h=document,g=navigator,y=!1,v=[function(){y?function(){var e=h.getElementsByTagName("body")[0],t=j(l);t.setAttribute("type",d);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=s){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),E.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,O()}()}else O()}():O()}],m=[],x=[],b=[],_=!1,k=!1,w=!0,E=function(){var e=typeof h.getElementById!=s&&typeof h.getElementsByTagName!=s&&typeof h.createElement!=s,t=g.userAgent.toLowerCase(),n=g.platform.toLowerCase(),r=/win/.test(n||t),i=/mac/.test(n||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,c=[0,0,0],f=null;if(typeof g.plugins!=s&&typeof g.plugins[u]==l)!(f=g.plugins[u].description)||typeof g.mimeTypes!=s&&g.mimeTypes[d]&&!g.mimeTypes[d].enabledPlugin||(y=!0,o=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),c[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),c[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof p[["Active"].concat("Object").join("X")]!=s)try{var v=new(window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");v&&(f=v.GetVariable("$version"))&&(o=!0,f=f.split(" ")[1].split(","),c=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}catch(m){}return{w3:e,pv:c,wk:a,ie:o,win:r,mac:i}}();E.w3&&((typeof h.readyState!=s&&"complete"==h.readyState||typeof h.readyState==s&&(h.getElementsByTagName("body")[0]||h.body))&&S(),_||(typeof h.addEventListener!=s&&h.addEventListener("DOMContentLoaded",S,!1),E.ie&&E.win&&(h.attachEvent(f,function(){"complete"==h.readyState&&(h.detachEvent(f,arguments.callee),S())}),p==top&&function(){if(!_){try{h.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}S()}}()),E.wk&&function(){_||(/loaded|complete/.test(h.readyState)?S():setTimeout(arguments.callee,0))}(),A(S)));function S(){if(!_){try{var e=h.getElementsByTagName("body")[0].appendChild(j("span"));e.parentNode.removeChild(e)}catch(r){return}_=!0;for(var t=v.length,n=0;n<t;n++)v[n]()}}function T(e){_?e():v[v.length]=e}function A(e){if(typeof p.addEventListener!=s)p.addEventListener("load",e,!1);else if(typeof h.addEventListener!=s)h.addEventListener("load",e,!1);else if(typeof p.attachEvent!=s)!function(e,t,n){e.attachEvent(t,n),b[b.length]=[e,t,n]}(p,"onload",e);else if("function"==typeof p.onload){var t=p.onload;p.onload=function(){t(),e()}}else p.onload=e}function O(){var e=m.length;if(e>0)for(var t=0;t<e;t++){var n=m[t].id,r=m[t].callbackFn,i={success:!1,id:n};if(E.pv[0]>0){var a=I(n);if(a)if(!z(m[t].swfVersion)||E.wk&&E.wk<312)if(m[t].expressInstall&&R()){var o={};o.data=m[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var l={},u=a.getElementsByTagName("param"),d=u.length,c=0;c<d;c++)"movie"!=u[c].getAttribute("name").toLowerCase()&&(l[u[c].getAttribute("name")]=u[c].getAttribute("value"));C(o,l,n,r)}else L(a),r&&r(i);else F(n,!0),r&&(i.success=!0,i.ref=D(n),r(i))}else if(F(n,!0),r){var f=D(n);f&&typeof f.SetVariable!=s&&(i.success=!0,i.ref=f),r(i)}}}function D(e){var t=null,n=I(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=s)t=n;else{var r=n.getElementsByTagName(l)[0];r&&(t=r)}return t}function R(){return!k&&z("6.0.65")&&(E.win||E.mac)&&!(E.wk&&E.wk<312)}function C(n,a,o,l){k=!0,r=l||null,i={success:!1,id:o};var u=I(o);if(u){"OBJECT"==u.nodeName?(e=M(u),t=null):(e=u,t=o),n.id=c,(typeof n.width==s||!/%$/.test(n.width)&&parseInt(n.width,10)<310)&&(n.width="310"),(typeof n.height==s||!/%$/.test(n.height)&&parseInt(n.height,10)<137)&&(n.height="137"),h.title=h.title.slice(0,47)+" - Flash Player Installation";var d=E.ie&&E.win?["Active"].concat("").join("X"):"PlugIn",f="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+h.title;if(typeof a.flashvars!=s?a.flashvars+="&"+f:a.flashvars=f,E.ie&&E.win&&4!=u.readyState){var g=j("div");o+="SWFObjectNew",g.setAttribute("id",o),u.parentNode.insertBefore(g,u),u.style.display="none",function(){4==u.readyState?u.parentNode.removeChild(u):setTimeout(arguments.callee,10)}()}P(n,a,o)}}function L(e){if(E.ie&&E.win&&4!=e.readyState){var t=j("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(M(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(M(e),e)}function M(e){var t=j("div");if(E.win&&E.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(l)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;a<i;a++)1==r[a].nodeType&&"PARAM"==r[a].nodeName||8==r[a].nodeType||t.appendChild(r[a].cloneNode(!0))}}return t}function P(e,t,n){var r,i=I(n);if(E.wk&&E.wk<312)return r;if(i)if(typeof e.id==s&&(e.id=n),E.ie&&E.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var u="";for(var c in t)t[c]!=Object.prototype[c]&&(u+='<param name="'+c+'" value="'+t[c]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+u+"</object>",x[x.length]=e.id,r=I(e.id)}else{var f=j(l);for(var p in f.setAttribute("type",d),e)e[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?f.setAttribute("class",e[p]):"classid"!=p.toLowerCase()&&f.setAttribute(p,e[p]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&B(f,h,t[h]);i.parentNode.replaceChild(f,i),r=f}return r}function B(e,t,n){var r=j("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function U(e){var t=I(e);t&&"OBJECT"==t.nodeName&&(E.ie&&E.win?(t.style.display="none",function(){4==t.readyState?function(e){var t=I(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function I(e){var t=null;try{t=h.getElementById(e)}catch(n){}return t}function j(e){return h.createElement(e)}function z(e){var t=E.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function N(e,t,n,r){if(!E.ie||!E.mac){var i=h.getElementsByTagName("head")[0];if(i){var u=n&&"string"==typeof n?n:"screen";if(r&&(a=null,o=null),!a||o!=u){var d=j("style");d.setAttribute("type","text/css"),d.setAttribute("media",u),a=i.appendChild(d),E.ie&&E.win&&typeof h.styleSheets!=s&&h.styleSheets.length>0&&(a=h.styleSheets[h.styleSheets.length-1]),o=u}E.ie&&E.win?a&&typeof a.addRule==l&&a.addRule(e,t):a&&typeof h.createTextNode!=s&&a.appendChild(h.createTextNode(e+" {"+t+"}"))}}}function F(e,t){if(w){var n=t?"visible":"hidden";_&&I(e)?I(e).style.visibility=n:N("#"+e,"visibility:"+n)}}function V(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=s?encodeURIComponent(e):e}E.ie&&E.win&&window.attachEvent("onunload",function(){for(var e=b.length,t=0;t<e;t++)b[t][0].detachEvent(b[t][1],b[t][2]);for(var r=x.length,i=0;i<r;i++)U(x[i]);for(var a in E)E[a]=null;for(var o in E=null,n)n[o]=null;n=null});return{registerObject:function(e,t,n,r){if(E.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,m[m.length]=i,F(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(E.w3)return D(e)},embedSWF:function(e,t,n,r,i,a,o,u,d,c){var f={success:!1,id:t};E.w3&&!(E.wk&&E.wk<312)&&e&&t&&n&&r&&i?(F(t,!1),T(function(){n+="",r+="";var p={};if(d&&typeof d===l)for(var h in d)p[h]=d[h];p.data=e,p.width=n,p.height=r;var g={};if(u&&typeof u===l)for(var y in u)g[y]=u[y];if(o&&typeof o===l)for(var v in o)typeof g.flashvars!=s?g.flashvars+="&"+v+"="+o[v]:g.flashvars=v+"="+o[v];if(z(i)){var m=P(p,g,t);p.id==t&&F(t,!0),f.success=!0,f.ref=m}else{if(a&&R())return p.data=a,void C(p,g,t,c);F(t,!0)}c&&c(f)})):c&&c(f)},switchOffAutoHideShow:function(){w=!1},ua:E,getFlashPlayerVersion:function(){return{major:E.pv[0],minor:E.pv[1],release:E.pv[2]}},hasFlashPlayerVersion:z,createSWF:function(e,t,n){return E.w3?P(e,t,n):void 0},showExpressInstall:function(e,t,n,r){E.w3&&R()&&C(e,t,n,r)},removeSWF:function(e){E.w3&&U(e)},createCSS:function(e,t,n,r){E.w3&&N(e,t,n,r)},addDomLoadEvent:T,addLoadEvent:A,getQueryParamValue:function(e){var t=h.location.search||h.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return V(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return V(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(k){var n=I(c);n&&e&&(n.parentNode.replaceChild(e,n),t&&(F(t,!0),E.ie&&E.win&&(e.style.display="block")),r&&r(i)),k=!1}}}}();e.exports=n},1939:function(e,t,n){var r,i=n(1940),a=n(1944),o=n(1945),s=n(1380),l=n(1378),u=n(1382),d=n(1376),c=n(1377);window,e.exports=(r=n(1898),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";var r=a(n(3)),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.isLive?new r.default(t):new i.default(t)}},function(e,t,n){"use strict";var r;window,e.exports=(r=n(0),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){e.exports={Context:n(13).default,EVENTS:n(6).default,WORKER_COMMANDS:n(15).default,sniffer:n(16).default,isLe:n(17).default,UTF8:n(18).default,MediaInfo:n(5).default,MediaSample:n(19).default,MediaSegment:n(20).default,MediaSegmentList:n(21).default,AudioTrackMeta:n(7).AudioTrackMeta,VideoTrackMeta:n(7).VideoTrackMeta,AudioTrackSample:n(8).AudioTrackSample,VideoTrackSample:n(8).VideoTrackSample,Mse:n(22).default,Stream:n(23).default,Buffer:n(24).default,Crypto:n(27).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){d(this,e),this.id=-1,this.sequenceNumber=0,this.samples=[],this.droppedSamples=[],this.length=0}return c(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0}},{key:"distroy",value:function(){this.reset(),this.id=-1}}]),e}();t.default=r,t.AudioTrack=function(e){function t(){var e;return d(this,t),(e=s(this,l(t).call(this))).TAG="AudioTrack",e.type="audio",e}return u(t,e),t}(r),t.VideoTrack=function(e){function t(){var e;return d(this,t),(e=s(this,l(t).call(this))).TAG="VideoTrack",e.type="video",e.dropped=0,e}return u(t,e),c(t,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0,this.dropped=0}}]),t}(r),t.Tracks=function(){function e(){d(this,e),this.audioTrack=null,this.videoTrack=null}return c(e,[{key:"destroy",value:function(){this.audioTrack=null,this.videoTrack=null}}]),e}()},function(e,t,n){e.exports={Nalunit:n(37).default,SpsParser:n(9).default,Compatibility:n(39).default}},function(e,t,n){e.exports={Track:n(1).default,Tracks:n(1).Tracks,AudioTrack:n(1).AudioTrack,VideoTrack:n(1).VideoTrack,XgBuffer:n(10).XgBuffer,RemuxBuffer:n(10).RemuxBuffer,PreSource:n(41).default}},function(e,t){e.exports=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t in e)if(e.hasOwnProperty(t)&&null===e[t])return!1;return!0},i=function(){function e(){d(this,e),this.mimeType=null,this.duration=null,this.hasVideo=null,this.video={codec:null,width:null,height:null,profile:null,level:null,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},chromaFormat:null,parRatio:{width:1,height:1}},this.hasAudio=null,this.audio={codec:null,sampleRate:null,sampleRateIndex:null,channelCount:null}}return c(e,[{key:"isComplete",value:function(){return e.isBaseInfoReady(this)&&e.isVideoReady(this)&&e.isAudioReady(this)}}],[{key:"isBaseInfoReady",value:function(e){return r(e)}},{key:"isVideoReady",value:function(e){return!e.hasVideo||r(e.video)}},{key:"isAudioReady",value:function(e){return!e.hasAudio||r(e.video)}}]),e}();t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={LADER_START:"LOADER_START",LOADER_DATALOADED:"LOADER_DATALOADED",LOADER_COMPLETE:"LOADER_COMPLETE",LOADER_ERROR:"LOADER_ERROR"},i={DEMUX_START:"DEMUX_START",DEMUX_COMPLETE:"DEMUX_COMPLETE",DEMUX_ERROR:"DEMUX_ERROR",METADATA_PARSED:"METADATA_PARSED",VIDEO_METADATA_CHANGE:"VIDEO_METADATA_CHANGE",AUDIO_METADATA_CHANGE:"AUDIO_METADATA_CHANGE",MEDIA_INFO:"MEDIA_INFO"},a={REMUX_METADATA:"REMUX_METADATA",REMUX_MEDIA:"REMUX_MEDIA",MEDIA_SEGMENT:"MEDIA_SEGMENT",REMUX_ERROR:"REMUX_ERROR",INIT_SEGMENT:"INIT_SEGMENT"},o={SOURCE_UPDATE_END:"SOURCE_UPDATE_END"},s={RETRY_TIME_EXCEEDED:"RETRY_TIME_EXCEEDED"},l=Object.assign({},r,i,a,o,s),u=[],d=[];for(var c in l)l.hasOwnProperty(c)&&u.push(l[c]);for(var f in l)l.hasOwnProperty(f)&&d.push(l[f]);t.default={ALLEVENTS:l,HLS_EVENTS:s,REMUX_EVENTS:a,DEMUX_EVENTS:i,MSE_EVENTS:o,LOADER_EVENTS:r,FlvAllowedEvents:u,HlsAllowedEvents:d,CRYTO_EVENTS:{START_DECRYPT:"START_DECRYPT",DECRYPTED:"DECRYPTED"}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTrackMeta=function(){function e(t){d(this,e);var n={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2",config:[41,401,136,0],duration:0,id:2,refSampleDuration:21,sampleRateIndex:3,timescale:1e3,type:"audio"};return t?Object.assign({},n,t):n}return c(e,[{key:"destroy",value:function(){this.init=null}}]),e}(),t.VideoTrackMeta=function(){function e(t){d(this,e);var n={avcc:null,sps:new Uint8Array(0),pps:new Uint8Array(0),chromaFormat:420,codec:"avc1.640020",codecHeight:720,codecWidth:1280,duration:0,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},id:1,level:"3.2",presentHeight:720,presentWidth:1280,profile:"High",refSampleDuration:40,parRatio:{height:1,width:1},timescale:1e3,type:"video"};return t?Object.assign({},n,t):n}return c(e,[{key:"destroy",value:function(){this.init=null,this.sps=null,this.pps=null}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){d(this,e);var n=e.getDefault();return t?Object.assign({},n,t):n}return c(e,null,[{key:"getDefault",value:function(){return{dts:null,pts:null,data:new Uint8Array}}}]),e}();t.AudioTrackSample=r;var i=function(){function e(t){d(this,e);var n=e.getDefault();return t?Object.assign({},n,t):n}return c(e,null,[{key:"getDefault",value:function(){return{dts:null,pts:null,isKeyframe:!1,originDts:null,data:new Uint8Array}}}]),e}();t.VideoTrackSample=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(38))&&r.__esModule?r:{default:r},a=function(){function e(){d(this,e)}return c(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),i=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(r[i]=t[a],i++);return new Uint8Array(r.buffer,0,i)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),r=new i.default(n);r.readByte();var a=r.readByte();r.readByte();var o=r.readByte();r.readUEG();var s=e.getProfileString(a),l=e.getLevelString(o),u=1,d=420,c=8;if((100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a||138===a||144===a)&&(3===(u=r.readUEG())&&r.readBits(1),u<=3&&(d=[0,420,422,444][u]),c=r.readUEG()+8,r.readUEG(),r.readBits(1),r.readBool()))for(var f=3!==u?8:12,p=0;p<f;p++)r.readBool()&&(p<6?e._skipScalingList(r,16):e._skipScalingList(r,64));r.readUEG();var h=r.readUEG();if(0===h)r.readUEG();else if(1===h){r.readBits(1),r.readSEG(),r.readSEG();for(var g=r.readUEG(),y=0;y<g;y++)r.readSEG()}r.readUEG(),r.readBits(1);var v=r.readUEG(),m=r.readUEG(),x=r.readBits(1);0===x&&r.readBits(1),r.readBits(1);var b=0,_=0,k=0,w=0;r.readBool()&&(b=r.readUEG(),_=r.readUEG(),k=r.readUEG(),w=r.readUEG());var E=1,S=1,T=0,A=!0,O=0,D=0;if(r.readBool()){if(r.readBool()){var R=r.readByte();R>0&&R<16?(E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][R-1],S=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][R-1]):255===R&&(E=r.readByte()<<8|r.readByte(),S=r.readByte()<<8|r.readByte())}if(r.readBool()&&r.readBool(),r.readBool()&&(r.readBits(4),r.readBool()&&r.readBits(24)),r.readBool()&&(r.readUEG(),r.readUEG()),r.readBool()){var C=r.readBits(32),L=r.readBits(32);A=r.readBool(),T=(O=L)/(D=2*C)}}var M=1;1===E&&1===S||(M=E/S);var P=0,B=0;0===u?(P=1,B=2-x):(P=3===u?1:2,B=(1===u?2:1)*(2-x));var U=16*(v+1),I=16*(m+1)*(2-x);U-=(b+_)*P,I-=(k+w)*B;var j=Math.ceil(U*M);return r.destroy(),r=null,{profile_string:s,level_string:l,bit_depth:c,chroma_format:d,chroma_format_string:e.getChromaFormatString(d),frame_rate:{fixed:A,fps:T,fps_den:D,fps_num:O},par_ratio:{width:E,height:S},codec_size:{width:U,height:I},present_size:{width:j,height:I}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=(n+e.readSEG()+256)%256),n=0===r?n:r}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}},{key:"toVideoMeta",value:function(e){var t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;var n=t.frameRate.fps_den,r=t.frameRate.fps_num;t.refSampleDuration=Math.floor(t.timescale*(n/r))}}]),e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XgBuffer=function(){function e(t){d(this,e),this.length=t||0,this.historyLen=t||0,this.array=[],this.offset=0}return c(e,[{key:"push",value:function(e){this.array.push(e),this.length+=e.byteLength,this.historyLen+=e.byteLength}},{key:"shift",value:function(e){if(this.array.length<1)return new Uint8Array(0);if(void 0===e)return this._shiftBuffer();if(this.offset+e===this.array[0].length){var t=this.array[0].slice(this.offset,this.offset+e);return this.offset=0,this.array.shift(),this.length-=e,t}if(this.offset+e<this.array[0].length){var n=this.array[0].slice(this.offset,this.offset+e);return this.offset+=e,this.length-=e,n}for(var r=new Uint8Array(e),i=0;this.array.length>0&&e>0;){if(this.offset+e<this.array[0].length){var a=this.array[0].slice(this.offset,this.offset+e);r.set(a,i),this.offset+=e,this.length-=e,e=0;break}var o=this.array[0].length-this.offset;r.set(this.array[0].slice(this.offset,this.array[0].length),i),this.array.shift(),this.offset=0,i+=o,this.length-=o,e-=o}return r}},{key:"clear",value:function(){this.array=[],this.length=0,this.offset=0}},{key:"destroy",value:function(){this.clear(),this.historyLen=0}},{key:"_shiftBuffer",value:function(){return this.length-=this.array[0].length,this.offset=0,this.array.shift()}},{key:"toInt",value:function(e,t){for(var n=0,r=this.offset+e;r<this.offset+t+e;)r<this.array[0].length?n=256*n+this.array[0][r]:this.array[1]&&(n=256*n+this.array[1][r-this.array[0].length]),r++;return n}}]),e}(),t.RemuxBuffer=function(){function e(){d(this,e),this.video=[],this.audio=[]}return c(e,[{key:"destroy",value:function(){this.video=[],this.audio=[]}}]),e}()},function(e,t,n){e.exports=n(12)},function(e,t,n){var r=f(n(4)),i=n(0),a=f(n(28));function f(e){return e&&e.__esModule?e:{default:e}}var p=i.EVENTS.FlvAllowedEvents,h=function(e){function t(e){var n;return d(this,t),(n=s(this,l(t).call(this,e))).context=new i.Context(p),n.initEvents(),n.loaderCompleteTimer=null,n}return u(t,e),c(t,[{key:"start",value:function(){this.initFlv(),this.context.init(),o(l(t.prototype),"start",this).call(this,this.flv.mse.url)}},{key:"initFlvEvents",value:function(e){var t=this,n=this;e.once(i.EVENTS.REMUX_EVENTS.INIT_SEGMENT,function(){if(r.default.util.addClass(n.root,"xgplayer-is-live"),!r.default.util.findDom(t.root,"xg-live")){var e=r.default.util.createDom("xg-live","\u6b63\u5728\u76f4\u64ad",{},"xgplayer-live");n.controls.appendChild(e)}}),e.once(i.EVENTS.LOADER_EVENTS.LOADER_COMPLETE,function(){n.paused||(t.loaderCompleteTimer=setInterval(function(){var e=n.getBufferedRange()[1];Math.abs(n.currentTime-e)<.5&&(n.emit("ended"),window.clearInterval(t.loaderCompleteTimer))},200))})}},{key:"initEvents",value:function(){var e=this;this.on("timeupdate",function(){e.loadData()}),this.on("seeking",function(){var t=e.currentTime,n=e.getBufferedRange();(t>n[1]||t<n[0])&&e.flv.seek(e.currentTime)})}},{key:"initFlv",value:function(){var e=this.context.registry("FLV_CONTROLLER",a.default)(this);this.initFlvEvents(e),this.flv=e}},{key:"play",value:function(){var e=this;this._hasStart?this._destroy().then(function(){e.context=new i.Context(p);var n=e.context.registry("FLV_CONTROLLER",a.default)(e);e.initFlvEvents(n),e.flv=n,e.context.init(),o(l(t.prototype),"start",e).call(e,n.mse.url),o(l(t.prototype),"play",e).call(e)}):o(l(t.prototype),"play",this).call(this)}},{key:"pause",value:function(){o(l(t.prototype),"pause",this).call(this),this.flv&&this.flv.pause()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentTime;this.flv&&this.flv.seek(e)}},{key:"destroy",value:function(){var e=this;this._destroy().then(function(){o(l(t.prototype),"destroy",e).call(e)})}},{key:"_destroy",value:function(){var e=this;return this.flv.mse.destroy().then(function(){e.context.destroy(),e.flv=null,e.context=null,e.loaderCompleteTimer&&window.clearInterval(e.loaderCompleteTimer)})}},{key:"src",get:function(){return this.currentSrc},set:function(e){var t=this;this.player.config.url=e,this.paused?this.start(e):(this.pause(),this.once("pause",function(){t.start(e)}),this.once("canplay",function(){t.play()})),this.once("canplay",function(){t.currentTime=0})}}]),t}(r.default);e.exports=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(5))&&r.__esModule?r:{default:r},f=n(14),p="__TO__";t.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this._emitter=new f.EventEmitter,this._instanceMap={},this._clsMap={},this._inited=!1,this.mediaInfo=new i.default,this.allowedEvents=t,this._hooks={}}return c(e,[{key:"getInstance",value:function(e){return this._instanceMap[e]||null}},{key:"initInstance",value:function(e){if(this._clsMap[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=a(this._clsMap[e],n);return this._instanceMap[e]=i,i.init&&i.init(),i}throw new Error("".concat(e,"\u672a\u5728context\u4e2d\u6ce8\u518c"))}},{key:"init",value:function(e){if(!this._inited){for(var t in this._clsMap)this._clsMap.hasOwnProperty(t)&&!this._instanceMap[t]&&this.initInstance(t,e);this._inited=!0}}},{key:"registry",value:function(e,t){var n=this,r=this._emitter,i=this._isMessageNameValid.bind(this),a=this;return this._clsMap[e]=function(t){function n(){var t,r;d(this,n);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return(r=s(this,(t=l(n)).call.apply(t,[this].concat(o)))).listeners={},r.onceListeners={},r.TAG=e,r._context=a,r}return u(n,t),c(n,[{key:"on",value:function(t,n){return i(t),this.listeners[t]?this.listeners[t].push(n):this.listeners[t]=[n],r.on("".concat(t).concat(p).concat(e),n),r.on(t,n)}},{key:"before",value:function(e,t){i(e),a._hooks[e]?a._hooks[e].push(t):a._hooks[e]=[t]}},{key:"once",value:function(t,n){return i(t),this.onceListeners[t]?this.onceListeners[t].push(n):this.onceListeners[t]=[n],r.once("".concat(t).concat(p).concat(e),n),r.once(t,n)}},{key:"emit",value:function(e){i(e);var t=a._hooks?a._hooks[e]:null;if(t)for(var n=0,o=t.length;n<o;n++)(0,t[n])();for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return r.emit.apply(r,[e].concat(l))}},{key:"emitTo",value:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return i(t),r.emit.apply(r,["".concat(t).concat(p).concat(e)].concat(a))}},{key:"off",value:function(e,t){return i(e),r.off(e,t)}},{key:"removeListeners",value:function(){var t=Object.prototype.hasOwnProperty.bind(this.listeners);for(var n in this.listeners)if(t(n))for(var i=this.listeners[n]||[],a=0;a<i.length;a++){var o=i[a];r.off(n,o),r.off("".concat(n).concat(p).concat(e),o)}for(var s in this.onceListeners)if(t(s))for(var l=this.onceListeners[s]||[],u=0;u<l.length;u++){var d=l[u];r.off(s,d),r.off("".concat(s).concat(p).concat(e),d)}}},{key:"destroy",value:function(){if(this.removeListeners(),this.listeners={},delete a._instanceMap[e],o(l(n.prototype),"destroy",this))return o(l(n.prototype),"destroy",this).call(this)}}]),n}(t),function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.initInstance.apply(n,[e].concat(r))}}},{key:"destroyInstances",value:function(){var e=this;Object.keys(this._instanceMap).forEach(function(t){e._instanceMap[t].destroy&&e._instanceMap[t].destroy()})}},{key:"destroy",value:function(){this._emitter=null,this.allowedEvents=[],this._clsMap=null,this._context=null,this._hooks=null,this.destroyInstances()}},{key:"_isMessageNameValid",value:function(e){if(!this.allowedEvents.indexOf(e)<0)throw new Error("unregistered message name: ".concat(e))}}]),e}()},function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a,o,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var u=l.length,d=h(l,u);for(n=0;n<u;++n)a(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,c(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,c(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_COMOMANDS={ON:"on",ONCE:"once",OFF:"off",EMIT:"emit",DESTROY:"destroy"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),i={get device(){var e=i.os;return e.isPc?"pc":e.isTablet?"tablet":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(function(n){return t[n].test(e)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:o,isAndroid:r,isPc:!o&&!r&&!n,isSymbian:n,isWindowsPhone:t,isFireFox:i}},get isLe(){return r}};t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){d(this,e)}return c(e,null,[{key:"decode",value:function(t){for(var n=[],r=t,i=0,a=t.length;i<a;)if(r[i]<128)n.push(String.fromCharCode(r[i])),++i;else{if(r[i]<192);else if(r[i]<224){if(e._checkContinuation(r,i,1)){var o=(31&r[i])<<6|63&r[i+1];if(o>=128){n.push(String.fromCharCode(65535&o)),i+=2;continue}}}else if(r[i]<240){if(e._checkContinuation(r,i,2)){var s=(15&r[i])<<12|(63&r[i+1])<<6|63&r[i+2];if(s>=2048&&55296!=(63488&s)){n.push(String.fromCharCode(65535&s)),i+=3;continue}}}else if(r[i]<248&&e._checkContinuation(r,i,3)){var l=(7&r[i])<<18|(63&r[i+1])<<12|(63&r[i+2])<<6|63&r[i+3];if(l>65536&&l<1114112){l-=65536,n.push(String.fromCharCode(l>>>10|55296)),n.push(String.fromCharCode(1023&l|56320)),i+=4;continue}}n.push(String.fromCharCode(65533)),++i}return n.join("")}},{key:"_checkContinuation",value:function(e,t,n){var r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){var n=this;d(this,e);var r=e.getDefaultInf();if(!t||"[object Object]"!==Object.prototype.toString.call(t))return r;var a=Object.assign({},r,t);Object.entries(a).forEach(function(e){var t=i(e,2),r=t[0],a=t[1];n[r]=a})}return c(e,null,[{key:"getDefaultInf",value:function(){return{dts:null,pts:null,duration:null,position:null,isRAP:!1,originDts:null}}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){d(this,e),this.startDts=-1,this.endDts=-1,this.startPts=-1,this.endPts=-1,this.originStartDts=-1,this.originEndDts=-1,this.randomAccessPoints=[],this.firstSample=null,this.lastSample=null}return c(e,[{key:"addRAP",value:function(e){e.isRAP=!0,this.randomAccessPoints.push(e)}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(t){d(this,e),this._type=t,this._list=[],this._lastAppendLocation=-1}return c(e,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,r=0,i=0,a=n,o=0;if(e<t[0].originDts)return-1;for(;i<=a;){if((r=i+Math.floor((a-i)/2))===n||e>t[r].lastSample.originDts&&e<t[r+1].originDts){o=r;break}t[r].originDts<e?i=r+1:a=r-1}return o}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=this._lastAppendLocation,r=0;-1!==n&&n<t.length&&e.originStartDts>=t[n].lastSample.originDts&&(n===t.length-1||n<t.length-1&&e.originStartDts<t[n+1].originStartDts)?r=n+1:t.length>0&&(r=this._searchNearestSegmentBefore(e.originStartDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,e)}},{key:"getLastSegmentBefore",value:function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}},{key:"getLastSampleBefore",value:function(e){var t=this.getLastSegmentBefore(e);return null!==t?t.lastSample:null}},{key:"getLastRAPBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].randomAccessPoints;0===n.length&&t>0;)t--,n=this._list[t].randomAccessPoints;return n.length>0?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){d(this,e),this.configs=Object.assign({},t),this.container=this.configs.container,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=this.configs.preloadTime||1,this.onSourceOpen=this.onSourceOpen.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onUpdateEnd=this.onUpdateEnd.bind(this),this.onWaiting=this.onWaiting.bind(this)}return c(e,[{key:"init",value:function(){this.mediaSource=new self.MediaSource,this.mediaSource.addEventListener("sourceopen",this.onSourceOpen),this.container.src=URL.createObjectURL(this.mediaSource),this.url=this.container.src,this.container.addEventListener("timeupdate",this.onTimeUpdate),this.container.addEventListener("waiting",this.onWaiting)}},{key:"onTimeUpdate",value:function(){this.emit("TIME_UPDATE",this.container)}},{key:"onWaiting",value:function(){this.emit("WAITING",this.container)}},{key:"onSourceOpen",value:function(){this.addSourceBuffers()}},{key:"onUpdateEnd",value:function(){this.emit("SOURCE_UPDATE_END"),this.doAppend()}},{key:"addSourceBuffers",value:function(){if("open"===this.mediaSource.readyState){var e,t=this._context.getInstance("PRE_SOURCE_BUFFER"),n=this._context.getInstance("TRACKS");t=t.sources;for(var r=!1,i=0,a=Object.keys(t).length;i<a;i++){var o=Object.keys(t)[i];if("audio"===o?e=n.audioTrack:"video"===o&&(e=n.videoTrack),e){var s="audio"===o?21:40;e.meta&&e.meta.refSampleDuration&&(s=e.meta.refSampleDuration),t[o].data.length>=this.preloadTime/s&&(r=!0)}}if(r){if(Object.keys(this.sourceBuffers).length>0)return;for(var l=0,u=Object.keys(t).length;l<u;l++){var d=Object.keys(t)[l],c=t[d],f="video"===d?"video/mp4;codecs="+c.mimetype:"audio/mp4;codecs="+c.mimetype,p=this.mediaSource.addSourceBuffer(f);this.sourceBuffers[d]=p,p.addEventListener("updateend",this.onUpdateEnd),this.doAppend()}}}}},{key:"doAppend",value:function(){var e=this._context.getInstance("PRE_SOURCE_BUFFER");if(e)for(var t=0;t<Object.keys(this.sourceBuffers).length;t++){var n=Object.keys(this.sourceBuffers)[t],r=this.sourceBuffers[n];if(!r.updating){var i=e.sources[n];if(i&&!i.inited)r.appendBuffer(i.init.buffer.buffer),i.inited=!0;else if(i){var a=i.data.shift();a&&r.appendBuffer(a.buffer.buffer)}}}}},{key:"endOfStream",value:function(){var e=this.mediaSource,t=e.readyState,n=e.activeSourceBuffers;if("open"===t&&0===n.length)try{this.mediaSource.endOfStream()}catch(t){}}},{key:"remove",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<Object.keys(this.sourceBuffers).length;n++){var r=this.sourceBuffers[Object.keys(this.sourceBuffers)[n]];r.updating||r.remove(t,e)}}},{key:"removeBuffers",value:function(){for(var t=this,n=[],r=function(r){var i=void 0,a=t.sourceBuffers[Object.keys(t.sourceBuffers)[r]];a.removeEventListener("updateend",t.onUpdateEnd),a.updating?i=new Promise(function(t){a.addEventListener("updateend",function n(){var r=3;setTimeout(function n(){a.updating?r>0?(setTimeout(n,200),r--):t():(e.clearBuffer(a),t())},200),a.removeEventListener("updateend",n)})}):(e.clearBuffer(a),i=Promise.resolve()),n.push(i)},i=0;i<Object.keys(this.sourceBuffers).length;i++)r(i);return Promise.all(n)}},{key:"destroy",value:function(){var e=this;return this.removeBuffers().then(function(){for(var t=0;t<Object.keys(e.sourceBuffers).length;t++){var n=e.sourceBuffers[Object.keys(e.sourceBuffers)[t]];e.mediaSource.removeSourceBuffer(n),delete e.sourceBuffers[Object.keys(e.sourceBuffers)[t]]}e.container.removeEventListener("timeupdate",e.onTimeUpdate),e.container.removeEventListener("waiting",e.onWaiting),e.mediaSource.removeEventListener("sourceopen",e.onSourceOpen),e.endOfStream(),window.URL.revokeObjectURL(e.url),e.url=null,e.configs={},e.container=null,e.mediaSource=null,e.sourceBuffers={},e.preloadTime=1})}}],[{key:"clearBuffer",value:function(e){for(var t=e.buffered,n=.1,r=0,i=t.length;r<i;r++)n=t.end(r);try{e.remove(0,n)}catch(e){}}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){if(d(this,e),!(t instanceof ArrayBuffer))throw new Error("data is invalid");this.buffer=t,this.dataview=new DataView(t),this.dataview.position=0}return c(e,[{key:"back",value:function(e){this.position-=e}},{key:"skip",value:function(t){for(var n=Math.floor(t/4),r=t%4,i=0;i<n;i++)e.readByte(this.dataview,4);r>0&&e.readByte(this.dataview,r)}},{key:"readUint8",value:function(){return e.readByte(this.dataview,1)}},{key:"readUint16",value:function(){return e.readByte(this.dataview,2)}},{key:"readUint24",value:function(){return e.readByte(this.dataview,3)}},{key:"readUint32",value:function(){return e.readByte(this.dataview,4)}},{key:"readUint64",value:function(){return e.readByte(this.dataview,8)}},{key:"readInt8",value:function(){return e.readByte(this.dataview,1,!0)}},{key:"readInt16",value:function(){return e.readByte(this.dataview,2,!0)}},{key:"readInt32",value:function(){return e.readByte(this.dataview,4,!0)}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}},{key:"length",get:function(){return this.buffer.byteLength}},{key:"position",set:function(e){this.dataview.position=e},get:function(){return this.dataview.position}}],[{key:"readByte",value:function(e,t,n){var r;switch(t){case 1:r=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:r=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");r=e.getUint8(e.position)<<16,r|=e.getUint8(e.position+1)<<8,r|=e.getUint8(e.position+2);break;case 4:r=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new Error("not supported for readBody 8");r=e.getUint32(e.position)<<32,r|=e.getUint32(e.position+4);break;default:r=""}return e.position+=t,r}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(25))&&r.__esModule?r:{default:r};t.default=function(){function e(t){d(this,e),this.buffer=t||new Uint8Array(0)}return c(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e.buffer=(0,i.default)(Uint8Array,e.buffer,t)})}}],[{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}},{key:"readAsInt",value:function(e){var t="";return e.forEach(function(e){t+=function(e){return e.toString(16).padStart(2,"0")}(e)}),parseInt(t,16)}}]),e}()},function(e,t,n){var r,i=(r=n(26))&&r.__esModule?r:{default:r};e.exports=i.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=l.value;t+=d.length}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}var c=new e(t),f=0,p=!0,h=!1,g=void 0;try{for(var y,v=r[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var m=y.value;c.set(m,f),f+=m.length}}catch(e){h=!0,g=e}finally{try{!p&&v.return&&v.return()}finally{if(h)throw g}}return c}},function(e,t,n){var r;Object.defineProperty(t,"__esModule",{value:!0});var i=((r=n(6))&&r.__esModule?r:{default:r}).default.CRYTO_EVENTS;t.default=function(){function e(t){d(this,e),this.inputBuffer=t.inputbuffer,this.outputBuffer=t.outputbuffer,this.key=t.key,this.iv=t.iv,this.method=t.method,this.crypto=window.crypto||window.msCrypto}return c(e,[{key:"init",value:function(){this.on(i.START_DECRYPT,this.decript.bind(this))}},{key:"decript",value:function(){var e=this;this.aeskey?this.decriptData():this.crypto.subtle.importKey("raw",this.key.buffer,{name:"AES-CBC"},!1,["encrypt","decrypt"]).then(function(t){e.aeskey=t,e.decriptData()})}},{key:"decriptData",value:function(){var e=this,t=this._context.getInstance(this.inputBuffer),n=this._context.getInstance(this.outputBuffer),r=t.shift();r&&this.crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv.buffer},this.aeskey,r).then(function(t){n.push(new Uint8Array(t)),e.emit(i.DECRYPTED),e.decriptData(r)})}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(29)),i=n(32),a=n(34),o=n(3),s=n(0),l=n(2),u=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var p=s.EVENTS.REMUX_EVENTS,h=s.EVENTS.DEMUX_EVENTS,g=s.EVENTS.LOADER_EVENTS,y=s.EVENTS.MSE_EVENTS,v=function(){function e(){d(this,e)}return c(e,[{key:"warn",value:function(){}}]),e}();t.default=function(){function e(t){d(this,e),this.TAG="FLVController",this._player=t,this.state={initSegmentArrived:!1},this.bufferClearTimer=null}return c(e,[{key:"init",value:function(){this._context.registry("FETCH_LOADER",i.FetchLoader),this._context.registry("LOADER_BUFFER",o.XgBuffer),this._context.registry("FLV_DEMUXER",a.FlvDemuxer),this._context.registry("TRACKS",o.Tracks),this._context.registry("MP4_REMUXER",r.default.Mp4Remuxer),this._context.registry("PRE_SOURCE_BUFFER",o.PreSource),!1!==this._player.config.compatibility&&this._context.registry("COMPATIBILITY",l.Compatibility),this._context.registry("LOGGER",v),this.mse=this._context.registry("MSE",s.Mse)({container:this._player.video}),this._handleTimeUpdate=this._handleTimeUpdate.bind(this),this.initListeners()}},{key:"initListeners",value:function(){this.on(g.LOADER_DATALOADED,this._handleLoaderDataLoaded.bind(this)),this.on(g.LOADER_ERROR,this._handleNetworkError.bind(this)),this.on(h.MEDIA_INFO,this._handleMediaInfo.bind(this)),this.on(h.METADATA_PARSED,this._handleMetadataParsed.bind(this)),this.on(h.DEMUX_COMPLETE,this._handleDemuxComplete.bind(this)),this.on(h.DEMUX_ERROR,this._handleDemuxError.bind(this)),this.on(p.INIT_SEGMENT,this._handleAppendInitSegment.bind(this)),this.on(p.MEDIA_SEGMENT,this._handleMediaSegment.bind(this)),this.on(y.SOURCE_UPDATE_END,this._handleSourceUpdateEnd.bind(this)),this._player.on("timeupdate",this._handleTimeUpdate)}},{key:"_handleMediaInfo",value:function(){this._context.mediaInfo||this.emit(h.DEMUX_ERROR,new Error("failed to get mediainfo"))}},{key:"_handleLoaderDataLoaded",value:function(){this.emitTo("FLV_DEMUXER",h.DEMUX_START)}},{key:"_handleMetadataParsed",value:function(e){this.emit(p.REMUX_METADATA,e)}},{key:"_handleDemuxComplete",value:function(){this.emit(p.REMUX_MEDIA)}},{key:"_handleAppendInitSegment",value:function(){this.state.initSegmentArrived=!0,this.mse.addSourceBuffers()}},{key:"_handleMediaSegment",value:function(){this.mse.addSourceBuffers(),this.mse.doAppend()}},{key:"_handleSourceUpdateEnd",value:function(){var e=this._player.currentTime,t=this._player.video,n=this._player.config.preloadTime||5,r=t.buffered.length;if(0!==r){var i=t.buffered.end(r-1);i-e>2*n&&(this._player.currentTime=i-n),this.mse.doAppend()}}},{key:"_handleTimeUpdate",value:function(){var e=this,t=this._player.currentTime,n=this._player.getBufferedRange()[0];if(t-n>15){if(this.bufferClearTimer)return;this.mse.remove(t-1,n),this.bufferClearTimer=setTimeout(function(){e.bufferClearTimer=null},5e3)}}},{key:"_handleNetworkError",value:function(e,t){this._player.emit("error",new u.default.Errors("network",this._player.config.url)),this._onError(g.LOADER_ERROR,e,t,!0)}},{key:"_handleDemuxError",value:function(e,t,n){void 0===n&&(n=!1),this._player.emit("error",new u.default.Errors("parse",this._player.config.url)),this._onError(g.LOADER_ERROR,e,t,n)}},{key:"_onError",value:function(e,t,n,r){var i={errorType:e,errorDetails:"[".concat(t,"]: ").concat(n.message),errorFatal:r||!1};this._player.emit("FLV_ERROR",i)}},{key:"seek",value:function(){this.state.initSegmentArrived||this.loadData()}},{key:"loadData",value:function(){this.emit(g.LADER_START,this._player.config.url)}},{key:"pause",value:function(){var e=this._context.getInstance("FETCH_LOADER");e&&e.cancel()}},{key:"destroy",value:function(){this._player.off("timeupdate",this._handleTimeUpdate),this._player=null,this.mse=null}}]),e}()},function(e,t,n){e.exports={Mp4Remuxer:n(30).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=(r=n(31))&&r.__esModule?r:{default:r},o=i.EVENTS.REMUX_EVENTS,s=function(){function e(){d(this,e),this._dtsBase=0,this._isDtsBaseInited=!1,this._audioNextDts=null,this._videoNextDts=null,this._videoSegmentList=new i.MediaSegmentList("video"),this._audioSegmentList=new i.MediaSegmentList("audio");var t=i.sniffer.browser;this._fillSilenceFrame="ie"===t,this.videoAllDuration=0,this.audioAllDuration=0}return c(e,[{key:"init",value:function(){this.on(o.REMUX_MEDIA,this.remux.bind(this)),this.on(o.REMUX_METADATA,this.onMetaDataReady.bind(this))}},{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._videoNextDts=null,this._audioNextDts=null,this._videoSegmentList.clear(),this._audioSegmentList.clear(),this._videoSegmentList=null,this._audioSegmentList=null}},{key:"remux",value:function(){var e=this._context.getInstance("TRACKS"),t=e.audioTrack,n=e.videoTrack;!this._isDtsBaseInited&&this.calcDtsBase(t,n),this._remuxVideo(n),this._remuxAudio(t)}},{key:"seek",value:function(){this._videoNextDts=null,this._audioNextDts=null,this._videoSegmentList.clear(),this._audioSegmentList.clear()}},{key:"onMetaDataReady",value:function(e){var t,n,r=new i.Buffer,s=a.default.ftyp();if("audio"===e){var l=this._context.getInstance("TRACKS"),u=l.audioTrack;n=u}else{var d=this._context.getInstance("TRACKS"),c=d.videoTrack;n=c}t=a.default.moov({type:e,meta:n.meta}),r.write(s,t);var f=this._context.getInstance("PRE_SOURCE_BUFFER"),p=f.getSource(e);p||(p=f.createSource(e)),p.mimetype=n.meta.codec,p.init=r,this.emit(o.INIT_SEGMENT,e)}},{key:"calcDtsBase",value:function(e,t){if(e.samples.length||t.samples.length){var n=1/0,r=1/0;e.samples&&e.samples.length&&(n=e.samples[0].dts),t.samples&&t.samples.length&&(r=t.samples[0].dts),this._dtsBase=Math.min(n,r),this._isDtsBaseInited=!0}}},{key:"_remuxVideo",value:function(e){var t=e;if(e.samples&&e.samples.length){for(var n=t.samples,r=-1,s=[],l={samples:[]};n.length;){var u=n.shift(),d=u.isKeyframe,c=void 0,f=void 0,p=u.dts-this._dtsBase;-1===r&&(r=p),void 0!==u.pts&&(c=(f=u.pts-this._dtsBase)-p),void 0!==u.cts&&(f=u.cts+p,c=u.cts);var h={buffer:[],size:0};l.samples.push(h),h.buffer.push(u.data),h.size+=u.data.byteLength;var g=0;g=n.length>=1?n[0].dts-this._dtsBase-p:s.length>=1?s[s.length-1].duration:this.videoMeta.refSampleDuration,this.videoAllDuration+=g,s.push({dts:p,cts:c,pts:f,data:u.data,size:u.data.byteLength,isKeyframe:d,duration:g,flags:{isLeading:0,dependsOn:d?2:1,isDependedOn:d?1:0,hasRedundancy:0,isNonSync:d?0:1},originDts:p,type:"video"})}var y=new i.Buffer,v=a.default.moof({id:t.meta.id,time:r,samples:s}),m=a.default.mdat(l);y.write(v,m),t.samples=[],t.length=0;var x=this._context.getInstance("PRE_SOURCE_BUFFER"),b=x.getSource("video");b||(b=x.createSource("video")),b.data.push(y),this.emit(o.MEDIA_SEGMENT,"video")}}},{key:"_remuxAudio",value:function(e){var t=e.samples,n=-1,r=[],s={samples:[]};if(t&&t.length){for(var l=!1;t.length;){var u=t.shift(),d=u.data,c=u.dts-this._dtsBase,f=c;l||(n=c,l=!0);var p=0;p=this.audioMeta.refSampleDurationFixed?this.audioMeta.refSampleDurationFixed:t.length>=1?t[0].dts-this._dtsBase-c:r.length>=1?r[r.length-1].duration:this.audioMeta.refSampleDuration,this.audioAllDuration+=p;var h={dts:c,pts:c,cts:0,size:d.byteLength,duration:u.duration?u.duration:p,flags:{isLeading:0,dependsOn:2,isDependedOn:1,hasRedundancy:0,isNonSync:0},isKeyframe:!0,originDts:f,type:"audio"},g={buffer:[],size:0};g.buffer.push(d),g.size+=d.byteLength,s.samples.push(g),r.push(h)}var y=new i.Buffer,v=a.default.moof({id:e.meta.id,time:n,samples:r}),m=a.default.mdat(s);y.write(v,m),e.samples=[],e.length=0;var x=this._context.getInstance("PRE_SOURCE_BUFFER"),b=x.getSource("audio");b||(b=x.createSource("audio")),b.data.push(y),this.emit(o.MEDIA_SEGMENT,"audio",y)}}},{key:"initSilentAudio",value:function(t,n){var r=e.getSilentFrame(this._audioMeta.channelCount);return{dts:t,pts:t,cts:0,duration:n,unit:r,size:r.byteLength,originDts:t,type:"video"}}},{key:"videoMeta",get:function(){return this._context.getInstance("TRACKS").videoTrack.meta}},{key:"audioMeta",get:function(){return this._context.getInstance("TRACKS").audioTrack.meta}}],[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){d(this,e)}return c(e,null,[{key:"size",value:function(e){return r.Buffer.writeUint32(e)}},{key:"initBox",value:function(t,n){for(var i=new r.Buffer,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return i.write.apply(i,[e.size(t),e.type(n)].concat(o)),i.buffer}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"ftyp",value:function(){return e.initBox(24,"ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))}},{key:"moov",value:function(t){var n,r=t.type,i=t.meta,a=8,o=e.mvhd(i.duration,i.timescale);n="video"===r?e.videoTrak(i):e.audioTrak(i);var s=e.mvex(i.duration,i.timescale||1e3,i.id);return[o,n,s].forEach(function(e){a+=e.byteLength}),e.initBox(a,"moov",o,n,s)}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.initBox(8+r.length,"mvhd",new Uint8Array(r))}},{key:"videoTrak",value:function(t){var n=8,r=e.tkhd({id:1,duration:t.duration,timescale:t.timescale||1e3,width:t.presentWidth,height:t.presentHeight,type:"video"}),i=e.mdia({type:"video",timescale:t.timescale||1e3,duration:t.duration,avcc:t.avcc,parRatio:t.parRatio,width:t.presentWidth,height:t.presentHeight});return[r,i].forEach(function(e){n+=e.byteLength}),e.initBox(n,"trak",r,i)}},{key:"audioTrak",value:function(t){var n=8,r=e.tkhd({id:2,duration:t.duration,timescale:t.timescale||1e3,width:0,height:0,type:"audio"}),i=e.mdia({type:"audio",timescale:t.timescale||1e3,duration:t.duration,channelCount:t.channelCount,samplerate:t.sampleRate,config:t.config});return[r,i].forEach(function(e){n+=e.byteLength}),e.initBox(n,"trak",r,i)}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration,i=t.width,a=t.height,o=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,a>>>8&255,255&a,0,0]);return e.initBox(8+o.byteLength,"tkhd",o)}},{key:"edts",value:function(t){var n=new r.Buffer,i=t.duration,a=t.mediaTime;return n.write(e.size(36),e.type("edts")),n.write(e.size(28),e.type("elst")),n.write(new Uint8Array([0,0,0,1,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,1])),n.buffer}},{key:"mdia",value:function(t){var n=8,r=e.mdhd(t.timescale,t.duration),i=e.hdlr(t.type),a=e.minf(t);return[r,i,a].forEach(function(e){n+=e.byteLength}),e.initBox(n,"mdia",r,i,a)}},{key:"mdhd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1?arguments[1]:void 0,r=new Uint8Array([0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,85,196,0,0]);return e.initBox(12+r.byteLength,"mdhd",e.extension(0,0),r)}},{key:"hdlr",value:function(t){var n=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===t&&(n.splice(8,4,115,111,117,110),n.splice(24,13,83,111,117,110,100,72,97,110,100,108,101,114,0)),e.initBox(8+n.length,"hdlr",new Uint8Array(n))}},{key:"minf",value:function(t){var n=8,r="video"===t.type?e.vmhd():e.smhd(),i=e.dinf(),a=e.stbl(t);return[r,i,a].forEach(function(e){n+=e.byteLength}),e.initBox(n,"minf",r,i,a)}},{key:"vmhd",value:function(){return e.initBox(20,"vmhd",new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}},{key:"smhd",value:function(){return e.initBox(16,"smhd",new Uint8Array([0,0,0,0,0,0,0,0]))}},{key:"dinf",value:function(){var t=new r.Buffer;return t.write(e.size(36),e.type("dinf"),e.size(28),e.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),t.buffer}},{key:"stbl",value:function(t){var n=8,r=e.stsd(t),i=e.stts(),a=e.stsc(),o=e.stsz(),s=e.stco();return[r,i,a,o,s].forEach(function(e){n+=e.byteLength}),e.initBox(n,"stbl",r,i,a,o,s)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?e.mp4a(t):e.avc1(t),e.initBox(16+n.byteLength,"stsd",e.extension(0,0),new Uint8Array([0,0,0,1]),n)}},{key:"mp4a",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.samplerate>>8&255,255&t.samplerate,0,0]),r=e.esds(t.config);return e.initBox(8+n.byteLength+r.byteLength,"mp4a",n,r)}},{key:"esds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[43,146,8,0],n=t.length,i=new r.Buffer,a=new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(t).concat([6,1,2]));return i.write(e.size(8+a.byteLength),e.type("esds"),a),i.buffer}},{key:"avc1",value:function(t){var n=new r.Buffer,i=t.width,a=t.height,o=t.parRatio.height,s=t.parRatio.width,l=t.avcc,u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>8&255,255&i,a>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),c=new Uint8Array([o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s]);return n.write(e.size(40+u.byteLength+l.byteLength+d.byteLength),e.type("avc1"),u,e.size(8+l.byteLength),e.type("avcC"),l,e.size(20),e.type("btrt"),d,e.size(16),e.type("pasp"),c),n.buffer}},{key:"stts",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stts",t)}},{key:"stsc",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stsc",t)}},{key:"stco",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stco",t)}},{key:"stsz",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return e.initBox(20,"stsz",t)}},{key:"mvex",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=arguments.length>2?arguments[2]:void 0,i=new r.Buffer,a=r.Buffer.writeUint32(t);return i.write(e.size(56),e.type("mvex"),e.size(16),e.type("mehd"),e.extension(0,0),a,e.trex(n)),i.buffer}},{key:"trex",value:function(t){var n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.initBox(8+n.byteLength,"trex",n)}},{key:"moof",value:function(t){var n=8,r=e.mfhd(),i=e.traf(t);return[r,i].forEach(function(e){n+=e.byteLength}),e.initBox(n,"moof",r,i)}},{key:"mfhd",value:function(){var t=r.Buffer.writeUint32(e.sequence);return e.sequence+=1,e.initBox(16,"mfhd",e.extension(0,0),t)}},{key:"traf",value:function(t){var n=8,r=e.tfhd(t.id),i=e.tfdt(t.time),a=e.sdtp(t),o=e.trun(t,a.byteLength);return[r,i,o,a].forEach(function(e){n+=e.byteLength}),e.initBox(n,"traf",r,i,o,a)}},{key:"tfhd",value:function(t){var n=r.Buffer.writeUint32(t);return e.initBox(16,"tfhd",e.extension(0,0),n)}},{key:"tfdt",value:function(t){return e.initBox(16,"tfdt",e.extension(0,0),r.Buffer.writeUint32(t))}},{key:"trun",value:function(t,n){var i=new r.Buffer,a=r.Buffer.writeUint32(t.samples.length),o=r.Buffer.writeUint32(92+16*t.samples.length+n);return i.write(e.size(20+16*t.samples.length),e.type("trun"),new Uint8Array([0,0,15,1]),a,o),t.samples.forEach(function(e){var t=e.flags;i.write(new Uint8Array([e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,e.size>>>24&255,e.size>>>16&255,e.size>>>8&255,255&e.size,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.isNonSync,0,0,e.cts>>>24&255,e.cts>>>16&255,e.cts>>>8&255,255&e.cts]))}),i.buffer}},{key:"sdtp",value:function(t){var n=new r.Buffer;return n.write(e.size(12+t.samples.length),e.type("sdtp"),e.extension(0,0)),t.samples.forEach(function(e){var t=e.flags,r=t.isLeading<<6|t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;n.write(new Uint8Array([r]))}),n.buffer}},{key:"mdat",value:function(t){var n=new r.Buffer,i=8;t.samples.forEach(function(e){i+=e.size}),n.write(e.size(i),e.type("mdat"));var a=new Uint8Array(i),o=0;return a.set(n.buffer,o),o+=8,t.samples.forEach(function(e){e.buffer.forEach(function(e){a.set(e,o),o+=e.byteLength})}),a}}]),e}();i.type=function(e){return new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])},i.sequence=1,t.default=i},function(e,t,n){e.exports={FetchLoader:n(33).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).EVENTS.LOADER_EVENTS;t.default=function(){function t(e){d(this,t),this.configs=Object.assign({},e),this.url=null,this.status=0,this.error=null,this._reader=null,this._canceled=!1,this._destroyed=!1,this.readtype=this.configs.readtype,this.buffer=this.configs.buffer||"LOADER_BUFFER",this._loaderTaskNo=0}return c(t,[{key:"init",value:function(){this.on(r.LADER_START,this.load.bind(this))}},{key:"load",value:function(e,t){var n=this;this.url=e,this._canceled=!1;var i=this.getParams(t);return n.loading=!0,fetch(this.url,i).then(function(e){if(e.ok)return n.status=e.status,n._onFetchResponse(e);n.loading=!1,n.emit(r.LOADER_ERROR,n.TAG,new Error("invalid response."))}).catch(function(e){throw n.loading=!1,n.emit(r.LOADER_ERROR,n.TAG,e),new Error(e.message)})}},{key:"_onFetchResponse",value:function(e){var t=this,n=this._context.getInstance(this.buffer);this._loaderTaskNo++;var i=this._loaderTaskNo;if(!0===e.ok)switch(this.readtype){case 2:e.json().then(function(e){t.loading=!1,t._canceled||t._destroyed||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 1:e.text().then(function(e){t.loading=!1,t._canceled||t._destroyed||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 3:e.arrayBuffer().then(function(e){t.loading=!1,t._canceled||t._destroyed||(n?(n.push(new Uint8Array(e)),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 0:default:return this._onReader(e.body.getReader(),i)}}},{key:"_onReader",value:function(e,t){var n=this._context.getInstance(this.buffer);if(!n&&this._reader||this._destroyed)try{this._reader.cancel()}catch(e){}if(this._reader=e,!1!==this.loading){var i=this;this._reader&&this._reader.read().then(function(a){if(a.done)return i.loading=!1,i.status=0,void i.emit(r.LOADER_COMPLETE,n);if(!i._canceled&&!i._destroyed)return n.push(a.value),i.emit(r.LOADER_DATALOADED,n),i._onReader(e,t);if(i._reader)try{i._reader.cancel()}catch(e){}}).catch(function(e){i.loading=!1,i.emit(r.LOADER_ERROR,i.TAG,e)})}}},{key:"getParams",value:function(e){var t=Object.assign({},e),n=new Headers,r={method:"GET",headers:n,mode:"cors",cache:"default"};if("object"==typeof this.configs.headers){var i=this.configs.headers;for(var a in i)i.hasOwnProperty(a)&&n.append(a,i[a])}if("object"==typeof t.headers){var o=t.headers;for(var s in o)o.hasOwnProperty(s)&&n.append(s,o[s])}return!1===t.cors&&(r.mode="same-origin"),t.withCredentials&&(r.credentials="include"),r}},{key:"cancel",value:function(){if(this._reader){try{this._reader.cancel()}catch(e){}this._reader=null,this.loading=!1,this._canceled=!0}}},{key:"destroy",value:function(){this._destroyed=!0,this.cancel()}}],[{key:"type",get:function(){return"loader"}}]),t}()},function(e,t,n){e.exports={M3U8Parser:n(35).default,TsDemuxer:n(36).default,Playlist:n(42).default,FlvDemuxer:n(43).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){d(this,e)}return c(e,null,[{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={duration:0};if(t&&t.split){var i=t.split(/\r|\n/),a=(i=i.filter(function(e){return e})).shift();if(!a.match("#EXTM3U"))throw new Error('Invalid m3u8 file: not "#EXTM3U"');for(a=i.shift();a;){var o=a.match(/#(.[A-Z|-]*):(.*)/);if(o&&o.length>2)switch(o[1]){case"EXT-X-VERSION":r.version=parseInt(o[2]);break;case"EXT-X-MEDIA-SEQUENCE":r.sequence=parseInt(o[2]);break;case"EXT-X-TARGETDURATION":r.targetduration=parseFloat(o[2]);break;case"EXTINF":e.parseFrag(o,i,r,n);break;case"EXT-X-KEY":e.parseDecrypt(o[2],r)}a=i.shift()}return r}}},{key:"parseFrag",value:function(e,t,n,r){n.frags||(n.frags=[]);var i={start:n.duration,duration:1e3*parseFloat(e[2])};n.duration+=i.duration;var a=t.shift();a.match(/#(.*):(.*)/)&&(a=t.shift()),a.length>0&&"/"===a.charAt(0)&&r.match(/.*\/\/.*\.\w+/g)&&(r=r.match(/.*\/\/.*\.\w+/g)[0]),a.match(/.*:\/\/.*/)?i.url=a:i.url=r+a,n.frags.push(i)}},{key:"parseURL",value:function(e){var t="",n=e.match(/(.*\/).*\.m3u8/);if(n&&n.length>0)for(var r=0;r<n.length;r++)n[r].match(/.*\/$/g)&&n[r].length>t.length&&(t=n[r]);return t}},{key:"parseDecrypt",value:function(e,t){t.encrypt={};var n=e.split(",");for(var r in n){var i=n[r];if(i.match(/METHOD=(.*)/)&&(t.encrypt.method=i.match(/METHOD=(.*)/)[1]),i.match(/URI="(.*)"/)&&(t.encrypt.uri=i.match(/URI="(.*)"/)[1]),i.match(/IV=0x(.*)/)){var a=i.match(/IV=0x(.*)/)[1],o=Math.ceil(a.length/2);t.encrypt.ivb=new Uint8Array(o);for(var s=o-1;s>=0;s--){var l=parseInt(a.substr(2*s,2),16);t.encrypt.ivb[s]=l}t.encrypt.iv=a}}}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(3),a=n(0),o=a.EVENTS.DEMUX_EVENTS,s={1:["video","MPEG-1"],2:["video","MPEG-2"],27:["video","AVC.H264"],234:["video","VC-1"],3:["audio","MPEG-1"],4:["audio","MPEG-2"],15:["audio","MPEG-2.AAC"],17:["audio","MPEG-4.AAC"],128:["audio","LPCM"],129:["audio","AC3"],6:["audio","AC3"],130:["audio","DTS"],131:["audio","Dolby TrueHD"],132:["audio","AC3-Plus"],133:["audio","DTS-HD"],134:["audio","DTS-MA"],161:["audio","AC3-Plus-SEC"],162:["audio","DTS-HD-SEC"]},l=function(){function e(t){d(this,e),this.configs=Object.assign({},t),this.demuxing=!1,this.pat=[],this.pmt=[],this._hasVideoMeta=!1,this._hasAudioMeta=!1}return c(e,[{key:"init",value:function(){this.on(o.DEMUX_START,this.demux.bind(this))}},{key:"demux",value:function(){if(!this.demuxing){for(var t=this.inputBuffer,n={pat:[],pmt:[]},r={};t.length>=188;){for(t.length>=1&&71!==t.array[0][t.offset]&&this.emit(o.DEMUX_ERROR,this.TAG,new Error("Untrust sync code: ".concat(t.array[0][t.offset],", try to recover;")),!1);t.length>=1&&71!==t.array[0][t.offset];)t.shift(1);var i=t.shift(188),s=new a.Stream(i.buffer),l={};e.read(s,l,n),l.pes?(r[l.header.pid]||(r[l.header.pid]=[]),r[l.header.pid].push(l.pes),l.pes.ES.buffer=[l.pes.ES.buffer]):r[l.header.pid]&&r[l.header.pid][r[l.header.pid].length-1].ES.buffer.push(l.payload.stream)}for(var u=0;u<Object.keys(r).length;u++)for(var d=r[Object.keys(r)[u]],c=0;c<d.length;c++)d[c].id=Object.keys(r)[u],d[c].ES.buffer=e.Merge(d[c].ES.buffer),"audio"===d[c].type?this.pushAudioSample(d[c]):"video"===d[c].type&&this.pushVideoSample(d[c]);this._hasAudioMeta&&this.emit(o.DEMUX_COMPLETE,"audio"),this._hasVideoMeta&&this.emit(o.DEMUX_COMPLETE,"video")}}},{key:"pushAudioSample",value:function(e){var t;this._tracks.audioTrack?t=this._tracks.audioTrack:(this._tracks.audioTrack=new i.AudioTrack,(t=this._tracks.audioTrack).meta=new a.AudioTrackMeta({audioSampleRate:e.ES.frequence,sampleRate:e.ES.frequence,channelCount:e.ES.channel,codec:"mp4a.40."+e.ES.audioObjectType,config:e.ES.audioConfig,id:2,sampleRateIndex:e.ES.frequencyIndex}),t.meta.refSampleDuration=Math.floor(1024/t.meta.audioSampleRate*t.meta.timescale),this._hasAudioMeta||(this._hasAudioMeta=!0,this.emit(o.METADATA_PARSED,"audio")));var n=new Uint8Array(e.ES.buffer.buffer.slice(e.ES.buffer.position,e.ES.buffer.length)),r=parseInt(e.pts/90),s=parseInt(e.pts/90),l=new a.AudioTrackSample({dts:r,pts:s,data:n});t.samples.push(l)}},{key:"pushVideoSample",value:function(t){var n,s=r.Nalunit.getNalunits(t.ES.buffer);this._tracks.videoTrack?n=this._tracks.videoTrack:(this._tracks.videoTrack=new i.VideoTrack,(n=this._tracks.videoTrack).meta=new a.VideoTrackMeta);for(var l=0,u=!1,d=!1,c=0;c<s.length;c++){var f=s[c];if(f.sps){if(n.sps&&e.compaireUint8(f.body,n.sps))continue;u=f,n.sps=f.body,n.meta.chromaFormat=u.sps.chroma_format,n.meta.codec="avc1.";for(var p=1;p<4;p++){var h=u.body[p].toString(16);h.length<2&&(h="0"+h),n.meta.codec+=h}n.meta.codecHeight=u.sps.codec_size.height,n.meta.codecWidth=u.sps.codec_size.width,n.meta.frameRate=u.sps.frame_rate,n.meta.id=1,n.meta.level=u.sps.level_string,n.meta.presentHeight=u.sps.present_size.height,n.meta.presentWidth=u.sps.present_size.width,n.meta.profile=u.sps.profile_string,n.meta.refSampleDuration=Math.floor(n.meta.timescale*(u.sps.frame_rate.fps_den/u.sps.frame_rate.fps_num)),n.meta.sarRatio=u.sps.sar_ratio?u.sps.sar_ratio:u.sps.par_ratio}else f.pps?(n.pps=f.body,d=f):l+=4+f.body.byteLength}u&&d&&(n.meta.avcc=r.Nalunit.getAvcc(u.body,d.body),this._hasVideoMeta||(this._hasVideoMeta=!0,this.emit(o.METADATA_PARSED,"video")));for(var g=new Uint8Array(l),y=0,v=!1,m=0;m<s.length;m++){var x=s[m],b=x.body.byteLength;x.idr&&(v=!0),x.pps||x.sps||(g.set(new Uint8Array([b>>>24&255,b>>>16&255,b>>>8&255,255&b]),y),y+=4,g.set(x.body,y),y+=b)}var _=new a.VideoTrackSample({dts:parseInt(t.dts/90),pts:parseInt(t.pts/90),cts:(t.pts-t.dts)/90,originDts:t.dts,isKeyframe:v,data:g});n.samples.push(_)}},{key:"destory",value:function(){this.off(o.DEMUX_START,this.demux),this.configs={},this.demuxing=!1,this.pat=[],this.pmt=[],this._hasVideoMeta=!1,this._hasAudioMeta=!1}},{key:"inputBuffer",get:function(){return this._context.getInstance(this.configs.inputbuffer)}},{key:"_tracks",get:function(){return this._context.getInstance("TRACKS")}}],[{key:"compaireUint8",value:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=!0,r=0;r<e.byteLength;r++)e[r]!==t[r]&&(n=!1);return n}},{key:"Merge",value:function(e){for(var t,n=0,r=0,i=0;i<e.length;i++)n+=e[i].length-e[i].position;t=new Uint8Array(n);for(var o=0;o<e.length;o++){var s=e[o];t.set(new Uint8Array(s.buffer,s.position),r),r+=s.length-s.position}return new a.Stream(t.buffer)}},{key:"read",value:function(t,n,r){e.readHeader(t,n),e.readPayload(t,n,r),"MEDIA"!==n.header.packet||1!==n.header.payload||n.unknownPIDs||(n.pes=e.PES(n))}},{key:"readPayload",value:function(t,n,r){var i=n.header.pid;switch(i){case 0:e.PAT(t,n,r);break;case 1:e.CAT(t,n,r);break;case 2:e.TSDT(t,n,r);break;case 8191:break;default:if(r.pat.some(function(e){return e.pid===i}))e.PMT(t,n,r);else{var a=r.pmt?r.pmt.filter(function(e){return e.pid===i}):[];a.length>0?e.Media(t,n,s[a[0].streamType][0]):n.unknownPIDs=!0}}}},{key:"readHeader",value:function(e,t){var n={};n.sync=e.readUint8();var r=e.readUint16();n.error=r>>>15,n.payload=r>>>14&1,n.priority=r>>>13&1,n.pid=8191&r,r=e.readUint8(),n.scrambling=r>>6&3,n.adaptation=r>>4&3,n.continuity=15&r,n.packet=0===n.pid?"PAT":"MEDIA",t.header=n}},{key:"PAT",value:function(e,t,n){var r={},i=e.readUint8();e.skip(i),i=e.readUint8(),r.tabelID=i,i=e.readUint16(),r.error=i>>>7,r.zero=i>>>6&1,r.sectionLength=4095&i,r.streamID=e.readUint16(),r.current=1&e.readUint8(),r.sectionNumber=e.readUint8(),r.lastSectionNumber=e.readUint8();for(var a=(r.sectionLength-9)/4,o=[],s=0;s<a;s++){var l=e.readUint16(),u=8191&e.readUint16();o.push({program:l,pid:u,type:0===l?"network":"mapPID"})}o.length>0&&(n.pat=n.pat.concat(o)),r.list=o,r.program=e.readUint16(),r.pid=8191&e.readUint16(),t.payload=r}},{key:"PMT",value:function(e,t,n){var r={};t.header.packet="PMT";var i=e.readUint8();e.skip(i),i=e.readUint8(),r.tableID=i,i=e.readUint16(),r.sectionLength=4095&i,r.program=e.readUint16(),r.current=1&e.readUint8(),r.order=e.readUint8(),r.lastOrder=e.readUint8(),r.PCR_PID=8191&e.readUint16(),r.programLength=4095&e.readUint16();for(var a=(r.sectionLength-13)/5,o=[],s=0;s<a;s++)o.push({streamType:e.readUint8(),pid:8191&e.readUint16(),es:4095&e.readUint16()});r.list=o,this.pmt||(this.pmt=[]),n.pmt=this.pmt.concat(o.map(function(e){return{pid:e.pid,es:e.es,streamType:e.streamType,program:r.program}})),t.payload=r}},{key:"Media",value:function(e,t,n){var r=t.header,i={};if(r.type=n,3===r.adaptation&&(i.adaptationLength=e.readUint8(),i.adaptationLength>0)){var o=e.readUint8();i.discontinue=o>>>7,i.access=o>>>6&1,i.priority=o>>>5&1,i.PCR=o>>>4&1,i.OPCR=o>>>3&1,i.splicePoint=o>>>2&1,i.transportPrivate=o>>>1&1,i.adaptationField=1&o;var s=e.position;if(1===i.PCR&&(i.programClockBase=e.readUint32()<<1,o=e.readUint16(),i.programClockBase|=o>>>15,i.programClockExtension=511&o),1===i.OPCR&&(i.originProgramClockBase=e.readUint32()<<1,o=e.readUint16(),i.originProgramClockBase+=o>>>15,i.originProgramClockExtension=511&o),1===i.splicePoint&&(i.spliceCountdown=e.readUint8()),1===i.transportPrivate)for(var l=e.readUint8(),u=[],d=0;d<l;d++)u.push(e.readUint8());if(1===i.adaptationField){var c=e.readUint8(),f=e.readUint8(),p=e.position,h=f>>>6&1,g=f>>>5&1;1==f>>>7&&(f=e.readUint16(),i.ltwValid=f>>>15,i.ltwOffset=61439&f),1===h&&(f=e.readUint24(),i.piecewiseRate=4194303&f),1===g&&(f=e.readInt8(),i.spliceType=f>>>4,i.dtsNextAU1=f>>>1&7,i.marker1=1&f,f=e.readUint16(),i.dtsNextAU2=f>>>1,i.marker2=1&f,f=e.readUint16(),i.dtsNextAU3=f),e.skip(c-1-(e.position-p))}var y=i.adaptationLength-1-(e.position-s);e.skip(y)}i.stream=new a.Stream(e.buffer.slice(e.position)),t.payload=i}},{key:"PES",value:function(t){var n={},r=t.payload.stream;if(1!==r.readUint24())n.ES={},n.ES.buffer=r;else{var i=r.readUint8();i>=224&&i<=239&&(n.type="video"),i>=192&&i<=223&&(n.type="audio");var a=r.readUint16();if(n.packetLength=a,"video"!==n.type&&"audio"!==n.type)throw new Error("format is not supported");var o=r.readUint8();if(2!=o>>>6)throw new Error("error when parse pes header");o=r.readUint8(),n.ptsDTSFlag=o>>>6,n.escrFlag=o>>>5&1,n.esRateFlag=o>>>4&1,n.dsmFlag=o>>>3&1,n.additionalFlag=o>>>2&1,n.crcFlag=o>>>1&1,n.extensionFlag=1&o,n.pesHeaderLength=r.readUint8();var s=n.pesHeaderLength;if(2===n.ptsDTSFlag){var l=[];o=r.readUint8(),l.push(o>>>1&7),o=r.readUint16(),l.push(o>>>1),o=r.readUint16(),l.push(o>>>1),n.pts=l[0]<<30|l[1]<<15|l[2],s-=5,"video"===n.type&&(n.dts=n.pts)}if(3===n.ptsDTSFlag){var u=[];o=r.readUint8(),u.push(o>>>1&7),o=r.readUint16(),u.push(o>>>1),o=r.readUint16(),u.push(o>>>1),n.pts=u[0]<<30|u[1]<<15|u[2];var d=[];o=r.readUint8(),d.push(o>>>1&7),o=r.readUint16(),d.push(o>>>1),o=r.readUint16(),d.push(o>>>1),n.dts=d[0]<<30|d[1]<<15|d[2],s-=10}if(1===n.escrFlag){var c=[],f=[];o=r.readUint8(),c.push(o>>>3&7),c.push(3&o),o=r.readUint16(),c.push(o>>>13),c.push(3&o),o=r.readUint16(),c.push(o>>>13),f.push(3&o),o=r.readUint8(),f.push(o>>>1),n.escr=300*(c[0]<<30|c[1]<<28|c[2]<<15|c[3]<<13|c[4])+(f[0]<<7|f[1]),s-=6}if(1===n.esRateFlag&&(o=r.readUint24(),n.esRate=o>>>1&4194303,s-=3),1===n.dsmFlag)throw new Error("not support DSM_trick_mode");if(1===n.additionalFlag&&(o=r.readUint8(),n.additionalCopyInfo=127&o,s-=1),1===n.crcFlag&&(n.pesCRC=r.readUint16(),s-=2),1===n.extensionFlag)throw new Error("not support extension");s>0&&r.skip(s),n.ES=e.ES(r,n.type)}return n}},{key:"ES",value:function(t,n){var r,i={};if("video"===n){if(1!==(r=t.readUint32())&&(t.back(4),1!==(r=t.readUint24())))throw new Error("h264 nal header parse failed");t.skip(2),i.buffer=t}else{if("audio"!==n)throw new Error("ES ".concat(n," is not supported"));if((r=t.readUint16())>>>4!=4095)throw new Error("aac ES parse Error");i.id=0==(r>>>3&1)?"MPEG-4":"MPEG-2",i.layer=r>>>1&3,i.absent=1&r,r=t.readUint16(),i.audioObjectType=1+(r>>>14&3),i.profile=i.audioObjectType-1,i.frequencyIndex=r>>>10&15,i.frequence=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][i.frequencyIndex],i.channel=r>>>6&7,i.frameLength=(3&r)<<11|t.readUint16()>>>5,i.audioConfig=e.getAudioConfig(i.audioObjectType,i.channel,i.frequencyIndex),t.skip(1),i.buffer=t}return i}},{key:"TSDT",value:function(e,t,n){t.payload={}}},{key:"CAT",value:function(e,t,n){var r={};r.tableID=e.readUint8();var i=e.readUint16();r.sectionIndicator=i>>>7,r.sectionLength=4095&i,e.skip(2),i=e.readUint8(),r.version=i>>>3,r.currentNextIndicator=1&i,r.sectionNumber=e.readUint8(),r.lastSectionNumber=e.readUint8();for(var a=(this.sectionLength-9)/4,o=[],s=0;s<a;s++)o.push({});r.crc32=e.readUint32(),t.payload=r}},{key:"getAudioConfig",value:function(e,t,n){var r,i,a=navigator.userAgent.toLowerCase();return/firefox/i.test(a)?n>=6?(e=5,r=new Array(4),i=n-3):(e=2,r=new Array(2),i=n):-1!==a.indexOf("android")?(e=2,r=new Array(2),i=n):(e=5,r=new Array(4),n>=6?i=n-3:(1===t&&(e=2,r=new Array(2)),i=n)),r[0]=e<<3,r[0]|=(14&n)>>1,r[1]=(1&n)<<7,r[1]|=t<<3,5===e&&(r[1]|=(14&i)>>1,r[2]=(1&i)<<7,r[2]|=8,r[3]=0),r}}]),e}();t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(9))&&r.__esModule?r:{default:r},a=function(){function e(){d(this,e)}return c(e,null,[{key:"getNalunits",value:function(t){if(t.length-t.position<4)return[];var n=t.dataview,r=t.position;return 1===n.getInt32(r)||0===n.getInt16(r)&&1===n.getInt8(r+2)?e.getAnnexbNals(t):e.getAvccNals(t)}},{key:"getAnnexbNals",value:function(t){for(var n=[],r=e.getHeaderPositionAnnexB(t),i=r.pos,a=i;i<t.length-4;){var o=t.buffer.slice(i,i+r.headerLength);r.pos===t.position&&t.skip(r.headerLength),a=(r=e.getHeaderPositionAnnexB(t)).pos;var s={header:o,body:new Uint8Array(t.buffer.slice(i+o.byteLength,a))};e.analyseNal(s),n.push(s),t.skip(a-t.position),i=a}return n}},{key:"getAvccNals",value:function(t){for(var n=[];t.position<t.length-4;){var r=t.dataview.getInt32();if(!(t.length-t.position>=r))break;var i=t.buffer.slice(t.position,t.position+4);t.skip(4);var a=t.buffer.slice(t.position,t.position+r);t.skip(r);var o={header:i,body:a};e.analyseNal(o),n.push(o)}return n}},{key:"analyseNal",value:function(e){switch(31&e.body[0]){case 1:e.ndr=!0;break;case 5:e.idr=!0;break;case 6:break;case 7:e.sps=i.default.parseSPS(e.body);break;case 8:e.pps=!0}}},{key:"getHeaderPositionAnnexB",value:function(e){for(var t=e.position,n=0;3!==n&&4!==n&&t<e.length-4;)0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:1===e.dataview.getInt8(t+2)?n=3:t++:t++;return t===e.length-4&&(0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)&&(n=4):(t++,0===e.dataview.getInt16(t)&&1===e.dataview.getInt8(t)?n=3:t=e.length)),{pos:t,headerLength:n}}},{key:"getAvcc",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength+11);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;var r=6;return n.set(new Uint8Array([e.byteLength>>>8&255,255&e.byteLength]),r),r+=2,n.set(e,r),n[r+=e.byteLength]=1,r++,n.set(new Uint8Array([t.byteLength>>>8&255,255&t.byteLength]),r),r+=2,n.set(t,r),n}}]),e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(t){d(this,e),this.TAG="Golomb",this._buffer=t,this._bufferIndex=0,this._totalBytes=t.byteLength,this._totalBits=8*t.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}return c(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0,!1),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}},{key:"readBits",value:function(e){if(e<=this._currentWordBitsLeft){var t=this._currentWord>>>32-e;return this._currentWord<<=e,this._currentWordBitsLeft-=e,t}var n=this._currentWordBitsLeft?this._currentWord:0;this._currentWordBitsLeft;var r=e-this._currentWordBitsLeft;this._fillCurrentWord();var i=Math.min(r,this._currentWordBitsLeft),a=this._currentWord>>>32-i;return this._currentWord<<=i,this._currentWordBitsLeft-=i,n<<i|a}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=(r=n(40))&&r.__esModule?r:{default:r},o=i.EVENTS.REMUX_EVENTS,s=function(){function e(){d(this,e),this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}return c(e,[{key:"init",value:function(){this.before(o.REMUX_MEDIA,this.doFix.bind(this))}},{key:"reset",value:function(){this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}},{key:"doFix",value:function(){var e=this.getFirstSample(),t=e.isFirstAudioSamples,n=e.isFirstVideoSamples;this.removeInvalidSamples(),this.recordSamplesCount(),this._firstVideoSample&&this.fixRefSampleDuration(this.videoTrack.meta,this.videoTrack.samples),this._firstAudioSample&&this.fixRefSampleDuration(this.audioTrack.meta,this.audioTrack.samples),this.doFixVideo(n),this.doFixAudio(t)}},{key:"doFixVideo",value:function(e){var t=this.videoTrack,n=t.samples,r=t.meta;if((!r.frameRate||!1!==r.frameRate.fixed)&&n&&n.length&&this._firstVideoSample){var i,a=n[0],o=a.dts,s=n.length;if(e&&this._firstAudioSample){var l=this._firstVideoSample.dts,u=l-this._firstAudioSample.dts;if(u>2*r.refSampleDuration)for(var d=Math.floor(u/r.refSampleDuration),c=0;c<d;c++){var f=Object.assign({},a);f.dts=l-(c+1)*r.refSampleDuration,f.pts=f.dts+f.cts,n.unshift(f),this.filledVideoSamples.push({dts:f.dts,size:f.data.byteLength})}}if(this.nextVideoDts){i=o-this.nextVideoDts;var p=Math.abs(i);if(i>2*r.refSampleDuration)for(var h=Math.floor(i/r.refSampleDuration),g=0;g<h;g++){var y=Object.assign({},n[0]),v=o-(g+1)*r.refSampleDuration;y.dts=v>this.nextVideoDts?v:this.nextVideoDts,y.pts=y.dts+y.cts,this.videoTrack.samples.unshift(y),this.filledVideoSamples.push({dts:y.dts,size:y.data.byteLength})}else p<=10&&p>0&&(n[0].dts=this.nextVideoDts,n[0].originDts=n[0].dts,n[0].cts=void 0!==n[0].cts?n[0].cts:n[0].pts-n[0].dts,n[0].pts=n[0].dts+n[0].cts)}var m=n[n.length-1].dts,x=n.length>=2?m-n[n.length-2].dts:r.refSampleDuration;this.lastVideoSamplesLen=s,this.nextVideoDts=m+x,this.lastVideoDts=m;for(var b=0,_=n.length;b<_;b++){var k=n[b],w=n[b+1];if(!w)break;var E=w.dts-k.dts;if(E>2*r.refSampleDuration)for(var S=Math.floor(E/r.refSampleDuration),T=0;T<S;){var A=Object.assign({},w);A.dts=k.dts+(T+1)*r.refSampleDuration,A.pts=A.dts+A.cts,A<w.dts&&(n.splice(b,0,A),this.filledVideoSamples.push({dts:A.dts,size:A.data.byteLength})),T++,b++}}this.videoTrack.samples=n}}},{key:"doFixAudio",value:function(t){var n=this.audioTrack,r=n.samples,i=n.meta;if(r&&r.length){var o,s=r.length,l=a.default.getSilentFrame(i.codec,i.channelCount),u=this._firstAudioSample;if(this._firstVideoSample&&t){var d=this._firstVideoSample.pts?this._firstVideoSample.pts:this._firstVideoSample.dts+this._firstVideoSample.cts;if(u.dts-d>i.refSampleDuration)for(var c=Math.floor((u.dts-d)/i.refSampleDuration),f=0;f<c;f++){var p={data:l,datasize:l.byteLength,dts:u.dts-(f+1)*i.refSampleDuration,filtered:0};r.unshift(p),this.filledAudioSamples.push({dts:p.dts,size:p.data.byteLength})}}var h=r[0].dts;if(this.nextAudioDts){o=h-this.nextAudioDts;var g=Math.abs(o);if(g>i.refSampleDuration&&1===s&&1===this.lastAudioSamplesLen&&(i.refSampleDurationFixed=void 0),o>2*i.refSampleDuration)if(1===s&&1===this.lastAudioSamplesLen)i.refSampleDurationFixed=void 0!==i.refSampleDurationFixed?i.refSampleDurationFixed+o:i.refSampleDuration+o;else for(var y=Math.floor(o/i.refSampleDuration),v=0;v<y;v++){var m=h-(v+1)*i.refSampleDuration,x=Object.assign({},r[0],{dts:m>this.nextAudioDts?m:this.nextAudioDts});this.filledAudioSamples.push({dts:x.dts,size:x.data.byteLength}),this.audioTrack.samples.unshift(x)}else g<=10&&g>0&&(r[0].dts=this.nextAudioDts,r[0].pts=this.nextAudioDts)}var b=r[r.length-1].dts,_=r.length>=2?b-r[r.length-2].dts:i.refSampleDuration;this.lastAudioSamplesLen=s,this.nextAudioDts=i.refSampleDurationFixed?b+i.refSampleDurationFixed:b+_,this.lastAudioDts=b;for(var k=0,w=r.length;k<w;k++){var E=r[k],S=r[k+1];if(!S)break;var T=S.dts-E.dts;r[k].duration=T}this.audioTrack.samples=e.sortAudioSamples(r)}}},{key:"getFirstSample",value:function(){var t=this.videoTrack.samples,n=this.audioTrack.samples,r=!1,i=!1;return!this._firstVideoSample&&t.length&&(this._firstVideoSample=e.findFirstVideoSample(t),r=!0),!this._firstAudioSample&&n.length&&(this._firstAudioSample=e.findFirstAudioSample(n),i=!0),{isFirstVideoSamples:r,isFirstAudioSamples:i}}},{key:"fixRefSampleDuration",value:function(e,t){var n="video"===e.type,r=n?this.allVideoSamplesCount:this.allAudioSamplesCount,i=n?this._firstVideoSample.dts:this._firstAudioSample.dts,a=n?this.filledVideoSamples.length:this.filledAudioSamples.length;if(!e.refSampleDuration||e.refSampleDuration<=0||Number.isNaN(e.refSampleDuration)){if(t.length>=1){var o=t[t.length-1].dts;e.refSampleDuration=Math.floor((o-i)/(r+a-1))}}else if(e.refSampleDuration&&t.length>=10){var s=(t[t.length-1].dts-t[0].dts)/(t.length-1);e.refSampleDuration=Math.floor(Math.abs(e.refSampleDuration-s)<=5?e.refSampleDuration:s)}}},{key:"recordSamplesCount",value:function(){var e=this.audioTrack,t=this.videoTrack;this.allAudioSamplesCount+=e.samples.length,this.allVideoSamplesCount+=t.samples.length}},{key:"removeInvalidSamples",value:function(){var e=this,t=this._firstVideoSample,n=this._firstAudioSample;this.audioTrack.samples=this.audioTrack.samples.filter(function(t){return t.dts>=n.dts&&(void 0===e.lastAudioDts||t.dts>e.lastAudioDts)}),this.videoTrack.samples=this.videoTrack.samples.filter(function(n){return n.dts>=t.dts&&(void 0===e.lastVideoDts||n.dts>e.lastVideoDts)})}},{key:"tracks",get:function(){return this._context.getInstance("TRACKS")}},{key:"audioTrack",get:function(){return this.tracks?this.tracks.audioTrack:null}},{key:"videoTrack",get:function(){return this.tracks?this.tracks.videoTrack:null}}],[{key:"sortAudioSamples",value:function(e){return 1===e.length?e:e.sort(function(e,t){return e.dts-t.dts})}},{key:"findFirstAudioSample",value:function(t){return t&&0!==t.length?e.sortAudioSamples(t)[0]:null}},{key:"findFirstVideoSample",value:function(e){if(!e.length)return null;for(var t=e.sort(function(e,t){return e.dts-t.dts}),n=0,r=t.length;n<r;n++)if(t[n].isKeyframe)return t[n]}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){d(this,e)}return c(e,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){d(this,e),this.mimetype="",this.init=null,this.data=[]};t.default=function(){function e(){d(this,e),this.sources={}}return c(e,[{key:"getSource",value:function(e){return this.sources[e]}},{key:"createSource",value:function(e){return this.sources[e]=new r,this.sources[e]}},{key:"clear",value:function(){this.sources={}}},{key:"destroy",value:function(){this.sources={}}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(t){d(this,e),this._baseURL="",this._list={},this._ts={},this.version=0,this.sequence=-1,this.targetduration=0,this.duration=0,this.fragLength=0,this._lastget=void 0,this._audoclear=t.autoclear||!1}return c(e,[{key:"push",value:function(e,t){this._ts[e]||(this._ts[e]={duration:t,downloaded:!1,downloading:!1,start:this.duration},this._list[this.duration]=e,this.duration+=t,this.fragLength+=1)}},{key:"deleteFrag",value:function(e){this._ts[e]&&(this._ts[e].start>this._lastget.time&&(this._lastget={duration:this._ts[e].duration,time:this._ts[e].start,downloaded:!1,downloading:!1,url:e}),delete this._list[this._ts[e].start],delete this._ts[e],this.fragLength-=1)}},{key:"pushM3U8",value:function(e,t){if(!e)throw new Error("No m3u8 data received.");if(this.version=e.version,this.targetduration=e.targetduration,e.encrypt&&!this.encrypt&&(this.encrypt=e.encrypt),!(e.sequence>this.sequence))throw new Error("Old m3u8 file received, ".concat(e.sequence));this.sequence=e.sequence;for(var n=[],r=0;r<e.frags.length;r++){var i=e.frags[r];this._ts[i.url]||(n.push(i.url),this.push(i.url,i.duration))}if(n.length<1)throw new Error("Can not read ts file list.");if(t)for(var a=this.getTsList(),o=0;o<a.length;o++)n.indexOf(a[o])<0&&this.deleteFrag(a[o])}},{key:"getTsList",value:function(){return Object.keys(this._ts)}},{key:"downloaded",value:function(e,t){var n=this._ts[e];n&&(n.downloaded=t)}},{key:"downloading",value:function(e,t){var n=this._ts[e];n&&(n.downloading=t)}},{key:"getTsByName",value:function(e){return this._ts[e]}},{key:"getTs",value:function(e){var t,n=Object.keys(this._list);if(void 0===e&&(e=this._lastget?this._lastget.time+this._lastget.duration:0),!(n.length<1||e>=this.duration)){n.sort(function(e,t){return parseFloat(e)-parseFloat(t)});for(var r=0;r<n.length&&e>=parseInt(n[r]);r++){var i=this._list[n[r]];t={url:i,downloaded:this._ts[i].downloaded,downloading:this._ts[i].downloading,time:parseInt(n[r]),duration:parseInt(this._ts[i].duration)},this.autoclear&&(delete this._ts[this._lastget.url],delete this._list[this._lastget.time]),this._lastget=t}return t}}},{key:"clear",value:function(){this._baseURL="",this._list={},this._ts={},this.version=0,this.sequence=-1,this.targetduration=0,this.duration=0}},{key:"clearDownloaded",value:function(){for(var e=0,t=Object.keys(this._ts).length;e<t;e++){var n=this._ts[Object.keys(this._ts)[e]];n.downloaded=!1,n.downloading=!1}}},{key:"destroy",value:function(){this._baseURL="",this._list={},this._ts={},this.version=0,this.sequence=-1,this.targetduration=0,this.duration=0,this.fragLength=0,this._lastget=void 0,this._audoclear=!1}},{key:"list",get:function(){return this._list}},{key:"baseURL",set:function(e){this.baseURL!==e&&(this.clear(),this._baseURL=e)},get:function(){return this._baseURL}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=n(2),o=n(3),s=(r=n(44))&&r.__esModule?r:{default:r},l=i.EVENTS.DEMUX_EVENTS,u=function(){function e(){d(this,e),this._firstFragmentLoaded=!1,this._trackNum=0,this._hasScript=!1}return c(e,[{key:"init",value:function(){this.on(l.DEMUX_START,this.doParseFlv.bind(this))}},{key:"doParseFlv",value:function(){if(this._firstFragmentLoaded){if(this.loaderBuffer.length<11)return;var e,t=1e5;do{e=this._parseFlvTag()}while(e&&t-- >0);this.emit(l.DEMUX_COMPLETE)}else{if(this.loaderBuffer.length<13)return;var n=this.loaderBuffer.shift(13);this.parseFlvHeader(n),this.doParseFlv()}}},{key:"parseFlvHeader",value:function(t){if(e.isFlvFile(t)){this._firstFragmentLoaded=!0;var n=e.getPlayType(t[4]);n.hasVideo&&this.initVideoTrack(),n.hasAudio&&this.initAudioTrack()}else this.emit(l.DEMUX_ERROR,new Error("invalid flv file")),this.doParseFlv();this.doParseFlv()}},{key:"initVideoTrack",value:function(){this._trackNum++;var e=new o.VideoTrack;e.meta=new i.VideoTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.videoTrack=e}},{key:"initAudioTrack",value:function(){this._trackNum++;var e=new o.AudioTrack;e.meta=new i.AudioTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.audioTrack=e}},{key:"_parseFlvTag",value:function(){if(this.loaderBuffer.length<11)return null;var e=this._parseFlvTagHeader();return e&&this._processChunk(e),e}},{key:"_parseFlvTagHeader",value:function(){var e=0,t={},n=this.loaderBuffer.toInt(e,1);if(e+=1,t.filtered=(32&n)>>>5,t.tagType=31&n,t.datasize=this.loaderBuffer.toInt(e,3),e+=3,8!==t.tagType&&9!==t.tagType&&11!==t.tagType&&18!==t.tagType||0!==this.loaderBuffer.toInt(8,3))return this.loaderBuffer&&this.loaderBuffer.length>0&&this.loaderBuffer.shift(1),this.emit(l.DEMUX_ERROR,this.TAG,new Error("tagType "+t.tagType),!1),null;if(this.loaderBuffer.length<t.datasize+15)return null;this.loaderBuffer.shift(4);var r=this.loaderBuffer.toInt(0,3);this.loaderBuffer.shift(3);var i=this.loaderBuffer.shift(1)[0];return i>0&&(r+=16777216*i),t.dts=r,this.loaderBuffer.shift(3),t}},{key:"_processChunk",value:function(e){switch(e.tagType){case 18:this._parseScriptData(e);break;case 8:this._parseAACData(e);break;case 9:this._parseHevcData(e);break;case 11:this.loaderBuffer.shift(3);break;default:this.loaderBuffer.shift(1)}}},{key:"_parseScriptData",value:function(e){var t=this.tracks.audioTrack,n=this.tracks.videoTrack,r=this.loaderBuffer.shift(e.datasize),i=(new s.default).resolve(r,r.length),a=this._context.onMetaData=i?i.onMetaData:void 0;if(this._context.mediaInfo.duration=a.duration,this._context.mediaInfo.hasVideo=a.hasVideo,this._context.mediaInfo.hsaAudio=a.hasAudio,this._datasizeValidator(e.datasize)&&(this.emit(l.MEDIA_INFO),this._hasScript=!0),t&&!t.hasSpecificConfig){var o=t.meta;switch(a.audiosamplerate&&(o.sampleRate=a.audiosamplerate),a.audiochannels&&(o.channelCount=a.audiochannels),a.audiosamplerate){case 44100:o.sampleRateIndex=4;break;case 22050:o.sampleRateIndex=7;break;case 11025:o.sampleRateIndex=10}}if(n&&!n.hasSpecificConfig){var u=n.meta;if("number"==typeof a.framerate){var d=Math.floor(1e3*a.framerate);if(d>0){var c=d/1e3;u.frameRate||(u.frameRate={}),u.frameRate.fixed=!0,u.frameRate.fps=c,u.frameRate.fps_num=d,u.frameRate.fps_den=1e3}}}}},{key:"_aacSequenceHeaderParser",value:function(e){var t={hasSpecificConfig:!0};t.objectType=e[1]>>>3,t.sampleRateIndex=(7&e[1])<<1|e[2]>>>7,t.audiosamplerate=this._switchAudioSampleRate(t.sampleRateIndex),t.channelCount=(120&e[2])>>>3,t.frameLength=(4&e[2])>>>2,t.dependsOnCoreCoder=(2&e[2])>>>1,t.extensionFlagIndex=1&e[2],t.codec="mp4a.40.".concat(t.objectType);var n,r,i=window.navigator.userAgent.toLowerCase(),a=t.sampleRateIndex;return-1!==i.indexOf("firefox")?t.sampleRateIndex>=6?(t.objectType=5,r=new Array(4),n=a-3):(t.objectType=2,r=new Array(2),n=a):-1!==i.indexOf("android")?(t.objectType=2,r=new Array(2),n=a):(t.objectType=5,n=t.sampleRateIndex,r=new Array(4),t.sampleRateIndex>=6?n=t.sampleRateIndex-3:1===t.channelCount&&(t.objectType=2,r=new Array(2),n=t.sampleRateIndex)),r[0]=t.objectType<<3,r[0]|=(15&t.sampleRateIndex)>>>1,r[1]=(15&t.sampleRateIndex)<<7,r[1]|=(15&t.channelCount)<<3,5===t.objectType&&(r[1]|=(15&n)>>>1,r[2]=(1&n)<<7,r[2]|=8,r[3]=0),t.config=r,t}},{key:"_parseAACData",value:function(e){var t=this.tracks.audioTrack;if(t){var n=t.meta;n||(n=new i.AudioTrackMeta);var r=this.loaderBuffer.shift(1)[0];e.data=this.loaderBuffer.shift(e.datasize-1);var a=(240&r)>>>4;t.format=a,10!==a&&this.emit(l.DEMUX_ERROR,new Error("invalid audio format: ".concat(a))),10!==a||this._hasAudioSequence||(n.sampleRate=this._switchAudioSamplingFrequency(r),n.sampleRateIndex=(12&r)>>>2,n.frameLenth=(2&r)>>>1,n.channelCount=1&r,n.refSampleDuration=Math.floor(1024/n.audioSampleRate*n.timescale));var o=n.audioSampleRate,s=n.sampleRateIndex,u=n.refSampleDuration;delete e.tagType;var d=this._datasizeValidator(e.datasize);if(0===e.data[0]){var c=this._aacSequenceHeaderParser(e.data);o=c.audiosamplerate||n.audioSampleRate,s=c.sampleRateIndex||n.sampleRateIndex,u=Math.floor(1024/o*n.timescale),n.channelCount=c.channelCount,n.sampleRate=o,n.sampleRateIndex=s,n.refSampleDuration=u,n.duration=this._context.mediaInfo.duration*n.timescale,n.config=c.config;var f=this._context.mediaInfo.audio;f.codec=c.codec,f.channelCount=c.channelCount,f.sampleRate=o,f.sampleRateIndex=c.audioSampleRateIndex,this._hasScript&&!this._hasAudioSequence?this.emit(l.METADATA_PARSED,"audio"):this._hasScript&&this._hasAudioSequence&&this.emit(l.AUDIO_METADATA_CHANGE),this._hasAudioSequence=!0}else e.data=e.data.slice(1,e.data.length),t.samples.push(e);d||this.emit(l.DEMUX_ERROR,this.TAG,new Error("TAG length error at "+e.datasize),!1)}}},{key:"_parseHevcData",value:function(e){var t=this.loaderBuffer.shift(1)[0];e.frameType=(240&t)>>>4,e.isKeyframe=1===e.frameType;var n=15&t;if(this.tracks.videoTrack.codecID=n,e.avcPacketType=this.loaderBuffer.shift(1)[0],e.cts=this.loaderBuffer.toInt(0,3),this.loaderBuffer.shift(3),12===n){var r=this.loaderBuffer.shift(e.datasize-5);if(e.data=r,0!==Number.parseInt(e.avcPacketType)){this._datasizeValidator(e.datasize)||this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1);var i={},a=0;for(i.cts=e.cts,i.dts=e.dts;e.data.length>a;){var o=e.data.slice(Number.parseInt(a),4+a);i.size=o[3],i.size+=256*o[2],i.size+=256*o[1]*256,i.size+=256*o[0]*256*256,a+=4,i.data=e.data.slice(Number.parseInt(a),i.size+a),a+=i.size,this.tracks.videoTrack.samples.push(i),this.emit(l.METADATA_PARSED,"video")}}else 0===Number.parseInt(e.avcPacketType)&&(this._datasizeValidator(e.datasize)?this.emit(l.METADATA_PARSED,"video"):this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1))}else if(7===n){var s=this.loaderBuffer.shift(e.datasize-5);if(0===s[4]&&0===s[5]&&0===s[6]&&1===s[7]){for(var u=0,d=0;d<4;d++)u=256*u+s[d];u-=4,(s=s.slice(4,s.length))[3]=u%256,u=(u-s[3])/256,s[2]=u%256,u=(u-s[2])/256,s[1]=u%256,s[0]=(u-s[1])/256}if(e.data=s,0===e.avcPacketType)this._avcSequenceHeaderParser(e.data),this._datasizeValidator(e.datasize)&&(this._hasScript&&!this._hasVideoSequence?this.emit(l.METADATA_PARSED,"video"):this._hasScript&&this._hasVideoSequence&&this.emit(l.VIDEO_METADATA_CHANGE),this._hasVideoSequence=!0);else{if(!this._datasizeValidator(e.datasize))return void this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1);this.tracks.videoTrack.samples.push(e)}}else this.emit(l.DEMUX_ERROR,this.TAG,new Error("video codeid is ".concat(n)),!1),e.data=this.loaderBuffer.shift(e.datasize-1),this._datasizeValidator(e.datasize)||this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1),this.tracks.videoTrack.samples.push(e),this.emit(l.DEMUX_COMPLETE);delete e.tagType}},{key:"_avcSequenceHeaderParser",value:function(e){var t=this.tracks.videoTrack;if(t){var n=0;t.meta||(t.meta=new i.VideoTrackMeta);var r=t.meta;r.configurationVersion=e[0],r.avcProfileIndication=e[1],r.profileCompatibility=e[2],r.avcLevelIndication=e[3]/10,r.nalUnitLength=1+(3&e[4]);var o=31&e[5];n=6;for(var s={},l=0;l<o;l++){var u=255*e[n]+e[n+1];n+=2;for(var d=new Uint8Array(u),c=0;c<u;c++)d[c]=e[n+c];for(var f="avc1.",p=1;p<4;p++){var h=d[p].toString(16);h.length<2&&(h="0"+h),f+=h}r.codec=f,n+=u,this.tracks.videoTrack.meta.sps=d,s=a.SpsParser.parseSPS(d)}var g=e[n];n++;for(var y=0;y<g;y++){var v=255*e[n]+e[n+1];n+=2;for(var m=new Uint8Array(v),x=0;x<v;x++)m[x]=e[n+x];n+=v,this.tracks.videoTrack.meta.pps=m}Object.assign(r,a.SpsParser.toVideoMeta(s));var b=this._context.mediaInfo.video;b.codec=r.codec,b.profile=r.profile,b.level=r.level,b.chromaFormat=r.chromaFormat,b.frameRate=r.frameRate,b.parRatio=r.parRatio,b.width=b.width===r.presentWidth?b.width:r.presentWidth,b.height=b.height===r.presentHeight?b.width:r.presentHeight,r.duration=this._context.mediaInfo.duration*r.timescale,r.avcc=new Uint8Array(e.length),r.avcc.set(e),t.meta=r}}},{key:"_switchAudioSampleRate",value:function(e){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][e]}},{key:"_switchAudioSamplingFrequency",value:function(e){return[5500,11025,22050,44100,48e3][(12&e)>>>2]}},{key:"_switchAudioChannel",value:function(e){return[1,2][1&e]}},{key:"_datasizeValidator",value:function(e){var t=this.loaderBuffer.toInt(0,4);return this.loaderBuffer.shift(4),t===e+11}},{key:"loaderBuffer",get:function(){var e=this._context.getInstance("LOADER_BUFFER");if(e)return e;this.emit(l.DEMUX_ERROR,new Error("\u627e\u4e0d\u5230 loaderBuffer \u5b9e\u4f8b"))}},{key:"tracks",get:function(){return this._context.getInstance("TRACKS")}},{key:"logger",get:function(){return this._context.getInstance("LOGGER")}}],[{key:"isFlvFile",value:function(e){return!(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])}},{key:"getPlayType",value:function(e){var t={hasVideo:!1,hasAudio:!1};return!0&e&&(t.hasVideo=!0),!0&e&&(t.hasAudio=!0),t}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={NUMBER:0,BOOLEAN:1,STRING:2,OBJECT:3,MIX_ARRAY:8,OBJECT_END:9,STRICT_ARRAY:10,DATE:11,LONE_STRING:12};t.default=function(){function e(){d(this,e),this.offset=0,this.readOffset=this.offset}return c(e,[{key:"resolve",value:function(e,t){if(t<3)throw new Error("not enough data for metainfo");var n={},r=this.parseValue(e),i=this.parseValue(e,t-r.bodySize);return n[r.data]=i.data,this.resetStatus(),n}},{key:"resetStatus",value:function(){this.offset=0,this.readOffset=this.offset}},{key:"parseString",value:function(e){var t=new DataView(e,this.readOffset).getUint16(0,!r.isLe),n="";n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"";var i=t+2;return this.readOffset+=i,{data:n,bodySize:t+2}}},{key:"parseDate",value:function(e,t){var n=new DataView(e,this.readOffset,t),i=n.getFloat64(0,!r.isLe);return i+=60*n.getInt16(8,!r.isLe)*1e3,this.readOffset+=10,{data:new Date(i),bodySize:10}}},{key:"parseObject",value:function(e,t){var n=this.parseString(e,t),r=this.parseValue(e,t-n.bodySize);return{data:{name:n.data,value:r.data},bodySize:n.bodySize+r.bodySize,isObjEnd:r.isObjEnd}}},{key:"parseLongString",value:function(e){var t=new DataView(e,this.readOffset).getUint32(0,!r.isLe),n="";return n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"",this.readOffset+=t+4,{data:n,bodySize:t+4}}},{key:"parseValue",value:function(e,t){var n=new ArrayBuffer;n=e instanceof ArrayBuffer?e:e.buffer;var a=i.NUMBER,o=i.BOOLEAN,s=i.STRING,l=i.OBJECT,u=i.MIX_ARRAY,d=i.OBJECT_END,c=i.STRICT_ARRAY,f=i.DATE,p=i.LONE_STRING,h=new DataView(n,this.readOffset,t),g=!1,y=h.getUint8(0),v=1;this.readOffset+=1;var m=null;switch(y){case a:m=h.getFloat64(1,!r.isLe),this.readOffset+=8,v+=8;break;case o:m=!!h.getUint8(1),this.readOffset+=1,v+=1;break;case s:var x=this.parseString(n);m=x.data,v+=x.bodySize;break;case l:m={};var b=0;for(16777215&h.getUint32(t-4,!r.isLe)&&(b=3);v<t-4;){var _=this.parseObject(n,t-v-b);if(_.isObjectEnd)break;m[_.data.name]=_.data.value,v+=_.bodySize}v<=t-3&&9==(16777215&h.getUint32(v-1,!r.isLe))&&(this.readOffset+=3,v+=3);break;case u:m={},v+=4,this.readOffset+=4;var k=0;for(9==(16777215&h.getUint32(t-4,!r.isLe))&&(k=3);v<t-8;){var w=this.parseObject(n,t-v-k);if(w.isObjectEnd)break;m[w.data.name]=w.data.value,v+=w.bodySize}v<=t-3&&9==(16777215&h.getUint32(v-1,!r.isLe))&&(v+=3,this.readOffset+=3);break;case d:m=null,g=!0;break;case c:m=[];var E=h.getUint32(1,!r.isLe);v+=4,this.readOffset+=4;for(var S=0;S<E;S++){var T=this.parseValue(n,t-v);m.push(T.data),v+=T.bodySize}break;case f:var A=this.parseDate(n,t-1);m=A.data,v+=A.bodySize;break;case p:var O=this.parseLongString(n,t-1);m=O.data,v+=O.bodySize;break;default:v=t}return{data:m,bodySize:v,isObjEnd:g}}}]),e}()}]))},function(e,t,n){"use strict";var r;window,e.exports=(r=n(0),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){e.exports={Context:n(13).default,EVENTS:n(4).default,WORKER_COMMANDS:n(15).default,sniffer:n(16).default,isLe:n(17).default,UTF8:n(18).default,MediaInfo:n(3).default,MediaSample:n(19).default,MediaSegment:n(20).default,MediaSegmentList:n(21).default,AudioTrackMeta:n(5).AudioTrackMeta,VideoTrackMeta:n(5).VideoTrackMeta,AudioTrackSample:n(6).AudioTrackSample,VideoTrackSample:n(6).VideoTrackSample,Mse:n(22).default,Stream:n(23).default,Buffer:n(24).default,Crypto:n(27).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){d(this,e),this.id=-1,this.sequenceNumber=0,this.samples=[],this.droppedSamples=[],this.length=0}return c(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0}},{key:"distroy",value:function(){this.reset(),this.id=-1}}]),e}();t.default=r,t.AudioTrack=function(e){function t(){var e;return d(this,t),(e=s(this,l(t).call(this))).TAG="AudioTrack",e.type="audio",e}return u(t,e),t}(r),t.VideoTrack=function(e){function t(){var e;return d(this,t),(e=s(this,l(t).call(this))).TAG="VideoTrack",e.type="video",e.dropped=0,e}return u(t,e),c(t,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0,this.dropped=0}}]),t}(r),t.Tracks=function(){function e(){d(this,e),this.audioTrack=null,this.videoTrack=null}return c(e,[{key:"destroy",value:function(){this.audioTrack=null,this.videoTrack=null}}]),e}()},function(e,t){e.exports=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t in e)if(e.hasOwnProperty(t)&&null===e[t])return!1;return!0},i=function(){function e(){d(this,e),this.mimeType=null,this.duration=null,this.hasVideo=null,this.video={codec:null,width:null,height:null,profile:null,level:null,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},chromaFormat:null,parRatio:{width:1,height:1}},this.hasAudio=null,this.audio={codec:null,sampleRate:null,sampleRateIndex:null,channelCount:null}}return c(e,[{key:"isComplete",value:function(){return e.isBaseInfoReady(this)&&e.isVideoReady(this)&&e.isAudioReady(this)}}],[{key:"isBaseInfoReady",value:function(e){return r(e)}},{key:"isVideoReady",value:function(e){return!e.hasVideo||r(e.video)}},{key:"isAudioReady",value:function(e){return!e.hasAudio||r(e.video)}}]),e}();t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={LADER_START:"LOADER_START",LOADER_DATALOADED:"LOADER_DATALOADED",LOADER_COMPLETE:"LOADER_COMPLETE",LOADER_ERROR:"LOADER_ERROR"},i={DEMUX_START:"DEMUX_START",DEMUX_COMPLETE:"DEMUX_COMPLETE",DEMUX_ERROR:"DEMUX_ERROR",METADATA_PARSED:"METADATA_PARSED",VIDEO_METADATA_CHANGE:"VIDEO_METADATA_CHANGE",AUDIO_METADATA_CHANGE:"AUDIO_METADATA_CHANGE",MEDIA_INFO:"MEDIA_INFO"},a={REMUX_METADATA:"REMUX_METADATA",REMUX_MEDIA:"REMUX_MEDIA",MEDIA_SEGMENT:"MEDIA_SEGMENT",REMUX_ERROR:"REMUX_ERROR",INIT_SEGMENT:"INIT_SEGMENT"},o={SOURCE_UPDATE_END:"SOURCE_UPDATE_END"},s={RETRY_TIME_EXCEEDED:"RETRY_TIME_EXCEEDED"},l=Object.assign({},r,i,a,o,s),u=[],d=[];for(var c in l)l.hasOwnProperty(c)&&u.push(l[c]);for(var f in l)l.hasOwnProperty(f)&&d.push(l[f]);t.default={ALLEVENTS:l,HLS_EVENTS:s,REMUX_EVENTS:a,DEMUX_EVENTS:i,MSE_EVENTS:o,LOADER_EVENTS:r,FlvAllowedEvents:u,HlsAllowedEvents:d,CRYTO_EVENTS:{START_DECRYPT:"START_DECRYPT",DECRYPTED:"DECRYPTED"}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTrackMeta=function(){function e(t){d(this,e);var n={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2",config:[41,401,136,0],duration:0,id:2,refSampleDuration:21,sampleRateIndex:3,timescale:1e3,type:"audio"};return t?Object.assign({},n,t):n}return c(e,[{key:"destroy",value:function(){this.init=null}}]),e}(),t.VideoTrackMeta=function(){function e(t){d(this,e);var n={avcc:null,sps:new Uint8Array(0),pps:new Uint8Array(0),chromaFormat:420,codec:"avc1.640020",codecHeight:720,codecWidth:1280,duration:0,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},id:1,level:"3.2",presentHeight:720,presentWidth:1280,profile:"High",refSampleDuration:40,parRatio:{height:1,width:1},timescale:1e3,type:"video"};return t?Object.assign({},n,t):n}return c(e,[{key:"destroy",value:function(){this.init=null,this.sps=null,this.pps=null}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){d(this,e);var n=e.getDefault();return t?Object.assign({},n,t):n}return c(e,null,[{key:"getDefault",value:function(){return{dts:null,pts:null,data:new Uint8Array}}}]),e}();t.AudioTrackSample=r;var i=function(){function e(t){d(this,e);var n=e.getDefault();return t?Object.assign({},n,t):n}return c(e,null,[{key:"getDefault",value:function(){return{dts:null,pts:null,isKeyframe:!1,originDts:null,data:new Uint8Array}}}]),e}();t.VideoTrackSample=i},function(e,t,n){e.exports={Nalunit:n(30).default,SpsParser:n(8).default,Compatibility:n(32).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(31))&&r.__esModule?r:{default:r},a=function(){function e(){d(this,e)}return c(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),i=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(r[i]=t[a],i++);return new Uint8Array(r.buffer,0,i)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),r=new i.default(n);r.readByte();var a=r.readByte();r.readByte();var o=r.readByte();r.readUEG();var s=e.getProfileString(a),l=e.getLevelString(o),u=1,d=420,c=8;if((100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a||138===a||144===a)&&(3===(u=r.readUEG())&&r.readBits(1),u<=3&&(d=[0,420,422,444][u]),c=r.readUEG()+8,r.readUEG(),r.readBits(1),r.readBool()))for(var f=3!==u?8:12,p=0;p<f;p++)r.readBool()&&(p<6?e._skipScalingList(r,16):e._skipScalingList(r,64));r.readUEG();var h=r.readUEG();if(0===h)r.readUEG();else if(1===h){r.readBits(1),r.readSEG(),r.readSEG();for(var g=r.readUEG(),y=0;y<g;y++)r.readSEG()}r.readUEG(),r.readBits(1);var v=r.readUEG(),m=r.readUEG(),x=r.readBits(1);0===x&&r.readBits(1),r.readBits(1);var b=0,_=0,k=0,w=0;r.readBool()&&(b=r.readUEG(),_=r.readUEG(),k=r.readUEG(),w=r.readUEG());var E=1,S=1,T=0,A=!0,O=0,D=0;if(r.readBool()){if(r.readBool()){var R=r.readByte();R>0&&R<16?(E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][R-1],S=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][R-1]):255===R&&(E=r.readByte()<<8|r.readByte(),S=r.readByte()<<8|r.readByte())}if(r.readBool()&&r.readBool(),r.readBool()&&(r.readBits(4),r.readBool()&&r.readBits(24)),r.readBool()&&(r.readUEG(),r.readUEG()),r.readBool()){var C=r.readBits(32),L=r.readBits(32);A=r.readBool(),T=(O=L)/(D=2*C)}}var M=1;1===E&&1===S||(M=E/S);var P=0,B=0;0===u?(P=1,B=2-x):(P=3===u?1:2,B=(1===u?2:1)*(2-x));var U=16*(v+1),I=16*(m+1)*(2-x);U-=(b+_)*P,I-=(k+w)*B;var j=Math.ceil(U*M);return r.destroy(),r=null,{profile_string:s,level_string:l,bit_depth:c,chroma_format:d,chroma_format_string:e.getChromaFormatString(d),frame_rate:{fixed:A,fps:T,fps_den:D,fps_num:O},par_ratio:{width:E,height:S},codec_size:{width:U,height:I},present_size:{width:j,height:I}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=(n+e.readSEG()+256)%256),n=0===r?n:r}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}},{key:"toVideoMeta",value:function(e){var t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;var n=t.frameRate.fps_den,r=t.frameRate.fps_num;t.refSampleDuration=Math.floor(t.timescale*(n/r))}}]),e}();t.default=a},function(e,t,n){e.exports={Track:n(1).default,Tracks:n(1).Tracks,AudioTrack:n(1).AudioTrack,VideoTrack:n(1).VideoTrack,XgBuffer:n(10).XgBuffer,RemuxBuffer:n(10).RemuxBuffer,PreSource:n(34).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XgBuffer=function(){function e(t){d(this,e),this.length=t||0,this.historyLen=t||0,this.array=[],this.offset=0}return c(e,[{key:"push",value:function(e){this.array.push(e),this.length+=e.byteLength,this.historyLen+=e.byteLength}},{key:"shift",value:function(e){if(this.array.length<1)return new Uint8Array(0);if(void 0===e)return this._shiftBuffer();if(this.offset+e===this.array[0].length){var t=this.array[0].slice(this.offset,this.offset+e);return this.offset=0,this.array.shift(),this.length-=e,t}if(this.offset+e<this.array[0].length){var n=this.array[0].slice(this.offset,this.offset+e);return this.offset+=e,this.length-=e,n}for(var r=new Uint8Array(e),i=0;this.array.length>0&&e>0;){if(this.offset+e<this.array[0].length){var a=this.array[0].slice(this.offset,this.offset+e);r.set(a,i),this.offset+=e,this.length-=e,e=0;break}var o=this.array[0].length-this.offset;r.set(this.array[0].slice(this.offset,this.array[0].length),i),this.array.shift(),this.offset=0,i+=o,this.length-=o,e-=o}return r}},{key:"clear",value:function(){this.array=[],this.length=0,this.offset=0}},{key:"destroy",value:function(){this.clear(),this.historyLen=0}},{key:"_shiftBuffer",value:function(){return this.length-=this.array[0].length,this.offset=0,this.array.shift()}},{key:"toInt",value:function(e,t){for(var n=0,r=this.offset+e;r<this.offset+t+e;)r<this.array[0].length?n=256*n+this.array[0][r]:this.array[1]&&(n=256*n+this.array[1][r-this.array[0].length]),r++;return n}}]),e}(),t.RemuxBuffer=function(){function e(){d(this,e),this.video=[],this.audio=[]}return c(e,[{key:"destroy",value:function(){this.video=[],this.audio=[]}}]),e}()},function(e,t,n){e.exports=n(12)},function(e,t,n){var r=f(n(2)),i=n(0),a=f(n(28));function f(e){return e&&e.__esModule?e:{default:e}}var p=i.EVENTS.FlvAllowedEvents,h=function(e){function t(e){var n;return d(this,t),(n=s(this,l(t).call(this,e))).context=new i.Context(p),n.initEvents(),n}return u(t,e),c(t,[{key:"start",value:function(){var e=this.context.registry("FLV_CONTROLLER",a.default)(this);this.flv=e,this.context.init(),o(l(t.prototype),"start",this).call(this,e.mse.url)}},{key:"initEvents",value:function(){this.on("timeupdate",this.handleTimeUpdate.bind(this)),this.on("seeking",this.handleSeek.bind(this)),this.once("destroy",this._destroy.bind(this))}},{key:"handleTimeUpdate",value:function(){this.loadData(),function(e,t){if(!e.config.isLive&&e.duration-e.currentTime<2){var n=e.getBufferedRange();e.currentTime-n[1]<.1&&(e.emit("ended"),t.mse.endOfStream())}}(this,this.flv)}},{key:"handleSeek",value:function(){var e=this.currentTime,t=this.getBufferedRange();(e>t[1]||e<t[0])&&this.flv.seek(this.currentTime)}},{key:"_destroy",value:function(){this.context.destroy(),this.context=null,this.flv=null}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentTime,t=this.getBufferedRange();t[1]-e<(this.config.preloadTime||15)-5&&this.flv.loadNext(t[1]+1)}},{key:"src",get:function(){return this.currentSrc},set:function(e){var t=this;this.player.config.url=e,this.paused?this.start(e):(this.pause(),this.once("pause",function(){t.start(e)}),this.once("canplay",function(){t.play()})),this.once("canplay",function(){t.currentTime=0})}}]),t}(r.default);e.exports=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(3))&&r.__esModule?r:{default:r},f=n(14),p="__TO__";t.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this._emitter=new f.EventEmitter,this._instanceMap={},this._clsMap={},this._inited=!1,this.mediaInfo=new i.default,this.allowedEvents=t,this._hooks={}}return c(e,[{key:"getInstance",value:function(e){return this._instanceMap[e]||null}},{key:"initInstance",value:function(e){if(this._clsMap[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=a(this._clsMap[e],n);return this._instanceMap[e]=i,i.init&&i.init(),i}throw new Error("".concat(e,"\u672a\u5728context\u4e2d\u6ce8\u518c"))}},{key:"init",value:function(e){if(!this._inited){for(var t in this._clsMap)this._clsMap.hasOwnProperty(t)&&!this._instanceMap[t]&&this.initInstance(t,e);this._inited=!0}}},{key:"registry",value:function(e,t){var n=this,r=this._emitter,i=this._isMessageNameValid.bind(this),a=this;return this._clsMap[e]=function(t){function n(){var t,r;d(this,n);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return(r=s(this,(t=l(n)).call.apply(t,[this].concat(o)))).listeners={},r.onceListeners={},r.TAG=e,r._context=a,r}return u(n,t),c(n,[{key:"on",value:function(t,n){return i(t),this.listeners[t]?this.listeners[t].push(n):this.listeners[t]=[n],r.on("".concat(t).concat(p).concat(e),n),r.on(t,n)}},{key:"before",value:function(e,t){i(e),a._hooks[e]?a._hooks[e].push(t):a._hooks[e]=[t]}},{key:"once",value:function(t,n){return i(t),this.onceListeners[t]?this.onceListeners[t].push(n):this.onceListeners[t]=[n],r.once("".concat(t).concat(p).concat(e),n),r.once(t,n)}},{key:"emit",value:function(e){i(e);var t=a._hooks?a._hooks[e]:null;if(t)for(var n=0,o=t.length;n<o;n++)(0,t[n])();for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return r.emit.apply(r,[e].concat(l))}},{key:"emitTo",value:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return i(t),r.emit.apply(r,["".concat(t).concat(p).concat(e)].concat(a))}},{key:"off",value:function(e,t){return i(e),r.off(e,t)}},{key:"removeListeners",value:function(){var t=Object.prototype.hasOwnProperty.bind(this.listeners);for(var n in this.listeners)if(t(n))for(var i=this.listeners[n]||[],a=0;a<i.length;a++){var o=i[a];r.off(n,o),r.off("".concat(n).concat(p).concat(e),o)}for(var s in this.onceListeners)if(t(s))for(var l=this.onceListeners[s]||[],u=0;u<l.length;u++){var d=l[u];r.off(s,d),r.off("".concat(s).concat(p).concat(e),d)}}},{key:"destroy",value:function(){if(this.removeListeners(),this.listeners={},delete a._instanceMap[e],o(l(n.prototype),"destroy",this))return o(l(n.prototype),"destroy",this).call(this)}}]),n}(t),function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.initInstance.apply(n,[e].concat(r))}}},{key:"destroyInstances",value:function(){var e=this;Object.keys(this._instanceMap).forEach(function(t){e._instanceMap[t].destroy&&e._instanceMap[t].destroy()})}},{key:"destroy",value:function(){this._emitter=null,this.allowedEvents=[],this._clsMap=null,this._context=null,this._hooks=null,this.destroyInstances()}},{key:"_isMessageNameValid",value:function(e){if(!this.allowedEvents.indexOf(e)<0)throw new Error("unregistered message name: ".concat(e))}}]),e}()},function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a,o,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var u=l.length,d=h(l,u);for(n=0;n<u;++n)a(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,c(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,c(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_COMOMANDS={ON:"on",ONCE:"once",OFF:"off",EMIT:"emit",DESTROY:"destroy"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),i={get device(){var e=i.os;return e.isPc?"pc":e.isTablet?"tablet":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(function(n){return t[n].test(e)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:o,isAndroid:r,isPc:!o&&!r&&!n,isSymbian:n,isWindowsPhone:t,isFireFox:i}},get isLe(){return r}};t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){d(this,e)}return c(e,null,[{key:"decode",value:function(t){for(var n=[],r=t,i=0,a=t.length;i<a;)if(r[i]<128)n.push(String.fromCharCode(r[i])),++i;else{if(r[i]<192);else if(r[i]<224){if(e._checkContinuation(r,i,1)){var o=(31&r[i])<<6|63&r[i+1];if(o>=128){n.push(String.fromCharCode(65535&o)),i+=2;continue}}}else if(r[i]<240){if(e._checkContinuation(r,i,2)){var s=(15&r[i])<<12|(63&r[i+1])<<6|63&r[i+2];if(s>=2048&&55296!=(63488&s)){n.push(String.fromCharCode(65535&s)),i+=3;continue}}}else if(r[i]<248&&e._checkContinuation(r,i,3)){var l=(7&r[i])<<18|(63&r[i+1])<<12|(63&r[i+2])<<6|63&r[i+3];if(l>65536&&l<1114112){l-=65536,n.push(String.fromCharCode(l>>>10|55296)),n.push(String.fromCharCode(1023&l|56320)),i+=4;continue}}n.push(String.fromCharCode(65533)),++i}return n.join("")}},{key:"_checkContinuation",value:function(e,t,n){var r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){var n=this;d(this,e);var r=e.getDefaultInf();if(!t||"[object Object]"!==Object.prototype.toString.call(t))return r;var a=Object.assign({},r,t);Object.entries(a).forEach(function(e){var t=i(e,2),r=t[0],a=t[1];n[r]=a})}return c(e,null,[{key:"getDefaultInf",value:function(){return{dts:null,pts:null,duration:null,position:null,isRAP:!1,originDts:null}}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){d(this,e),this.startDts=-1,this.endDts=-1,this.startPts=-1,this.endPts=-1,this.originStartDts=-1,this.originEndDts=-1,this.randomAccessPoints=[],this.firstSample=null,this.lastSample=null}return c(e,[{key:"addRAP",value:function(e){e.isRAP=!0,this.randomAccessPoints.push(e)}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(t){d(this,e),this._type=t,this._list=[],this._lastAppendLocation=-1}return c(e,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,r=0,i=0,a=n,o=0;if(e<t[0].originDts)return-1;for(;i<=a;){if((r=i+Math.floor((a-i)/2))===n||e>t[r].lastSample.originDts&&e<t[r+1].originDts){o=r;break}t[r].originDts<e?i=r+1:a=r-1}return o}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=this._lastAppendLocation,r=0;-1!==n&&n<t.length&&e.originStartDts>=t[n].lastSample.originDts&&(n===t.length-1||n<t.length-1&&e.originStartDts<t[n+1].originStartDts)?r=n+1:t.length>0&&(r=this._searchNearestSegmentBefore(e.originStartDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,e)}},{key:"getLastSegmentBefore",value:function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}},{key:"getLastSampleBefore",value:function(e){var t=this.getLastSegmentBefore(e);return null!==t?t.lastSample:null}},{key:"getLastRAPBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].randomAccessPoints;0===n.length&&t>0;)t--,n=this._list[t].randomAccessPoints;return n.length>0?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){d(this,e),this.configs=Object.assign({},t),this.container=this.configs.container,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=this.configs.preloadTime||1,this.onSourceOpen=this.onSourceOpen.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onUpdateEnd=this.onUpdateEnd.bind(this),this.onWaiting=this.onWaiting.bind(this)}return c(e,[{key:"init",value:function(){this.mediaSource=new self.MediaSource,this.mediaSource.addEventListener("sourceopen",this.onSourceOpen),this.container.src=URL.createObjectURL(this.mediaSource),this.url=this.container.src,this.container.addEventListener("timeupdate",this.onTimeUpdate),this.container.addEventListener("waiting",this.onWaiting)}},{key:"onTimeUpdate",value:function(){this.emit("TIME_UPDATE",this.container)}},{key:"onWaiting",value:function(){this.emit("WAITING",this.container)}},{key:"onSourceOpen",value:function(){this.addSourceBuffers()}},{key:"onUpdateEnd",value:function(){this.emit("SOURCE_UPDATE_END"),this.doAppend()}},{key:"addSourceBuffers",value:function(){if("open"===this.mediaSource.readyState){var e,t=this._context.getInstance("PRE_SOURCE_BUFFER"),n=this._context.getInstance("TRACKS");t=t.sources;for(var r=!1,i=0,a=Object.keys(t).length;i<a;i++){var o=Object.keys(t)[i];if("audio"===o?e=n.audioTrack:"video"===o&&(e=n.videoTrack),e){var s="audio"===o?21:40;e.meta&&e.meta.refSampleDuration&&(s=e.meta.refSampleDuration),t[o].data.length>=this.preloadTime/s&&(r=!0)}}if(r){if(Object.keys(this.sourceBuffers).length>0)return;for(var l=0,u=Object.keys(t).length;l<u;l++){var d=Object.keys(t)[l],c=t[d],f="video"===d?"video/mp4;codecs="+c.mimetype:"audio/mp4;codecs="+c.mimetype,p=this.mediaSource.addSourceBuffer(f);this.sourceBuffers[d]=p,p.addEventListener("updateend",this.onUpdateEnd),this.doAppend()}}}}},{key:"doAppend",value:function(){var e=this._context.getInstance("PRE_SOURCE_BUFFER");if(e)for(var t=0;t<Object.keys(this.sourceBuffers).length;t++){var n=Object.keys(this.sourceBuffers)[t],r=this.sourceBuffers[n];if(!r.updating){var i=e.sources[n];if(i&&!i.inited)r.appendBuffer(i.init.buffer.buffer),i.inited=!0;else if(i){var a=i.data.shift();a&&r.appendBuffer(a.buffer.buffer)}}}}},{key:"endOfStream",value:function(){var e=this.mediaSource,t=e.readyState,n=e.activeSourceBuffers;if("open"===t&&0===n.length)try{this.mediaSource.endOfStream()}catch(t){}}},{key:"remove",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<Object.keys(this.sourceBuffers).length;n++){var r=this.sourceBuffers[Object.keys(this.sourceBuffers)[n]];r.updating||r.remove(t,e)}}},{key:"removeBuffers",value:function(){for(var t=this,n=[],r=function(r){var i=void 0,a=t.sourceBuffers[Object.keys(t.sourceBuffers)[r]];a.removeEventListener("updateend",t.onUpdateEnd),a.updating?i=new Promise(function(t){a.addEventListener("updateend",function n(){var r=3;setTimeout(function n(){a.updating?r>0?(setTimeout(n,200),r--):t():(e.clearBuffer(a),t())},200),a.removeEventListener("updateend",n)})}):(e.clearBuffer(a),i=Promise.resolve()),n.push(i)},i=0;i<Object.keys(this.sourceBuffers).length;i++)r(i);return Promise.all(n)}},{key:"destroy",value:function(){var e=this;return this.removeBuffers().then(function(){for(var t=0;t<Object.keys(e.sourceBuffers).length;t++){var n=e.sourceBuffers[Object.keys(e.sourceBuffers)[t]];e.mediaSource.removeSourceBuffer(n),delete e.sourceBuffers[Object.keys(e.sourceBuffers)[t]]}e.container.removeEventListener("timeupdate",e.onTimeUpdate),e.container.removeEventListener("waiting",e.onWaiting),e.mediaSource.removeEventListener("sourceopen",e.onSourceOpen),e.endOfStream(),window.URL.revokeObjectURL(e.url),e.url=null,e.configs={},e.container=null,e.mediaSource=null,e.sourceBuffers={},e.preloadTime=1})}}],[{key:"clearBuffer",value:function(e){for(var t=e.buffered,n=.1,r=0,i=t.length;r<i;r++)n=t.end(r);try{e.remove(0,n)}catch(e){}}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){if(d(this,e),!(t instanceof ArrayBuffer))throw new Error("data is invalid");this.buffer=t,this.dataview=new DataView(t),this.dataview.position=0}return c(e,[{key:"back",value:function(e){this.position-=e}},{key:"skip",value:function(t){for(var n=Math.floor(t/4),r=t%4,i=0;i<n;i++)e.readByte(this.dataview,4);r>0&&e.readByte(this.dataview,r)}},{key:"readUint8",value:function(){return e.readByte(this.dataview,1)}},{key:"readUint16",value:function(){return e.readByte(this.dataview,2)}},{key:"readUint24",value:function(){return e.readByte(this.dataview,3)}},{key:"readUint32",value:function(){return e.readByte(this.dataview,4)}},{key:"readUint64",value:function(){return e.readByte(this.dataview,8)}},{key:"readInt8",value:function(){return e.readByte(this.dataview,1,!0)}},{key:"readInt16",value:function(){return e.readByte(this.dataview,2,!0)}},{key:"readInt32",value:function(){return e.readByte(this.dataview,4,!0)}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}},{key:"length",get:function(){return this.buffer.byteLength}},{key:"position",set:function(e){this.dataview.position=e},get:function(){return this.dataview.position}}],[{key:"readByte",value:function(e,t,n){var r;switch(t){case 1:r=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:r=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");r=e.getUint8(e.position)<<16,r|=e.getUint8(e.position+1)<<8,r|=e.getUint8(e.position+2);break;case 4:r=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new Error("not supported for readBody 8");r=e.getUint32(e.position)<<32,r|=e.getUint32(e.position+4);break;default:r=""}return e.position+=t,r}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(25))&&r.__esModule?r:{default:r};t.default=function(){function e(t){d(this,e),this.buffer=t||new Uint8Array(0)}return c(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e.buffer=(0,i.default)(Uint8Array,e.buffer,t)})}}],[{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}},{key:"readAsInt",value:function(e){var t="";return e.forEach(function(e){t+=function(e){return e.toString(16).padStart(2,"0")}(e)}),parseInt(t,16)}}]),e}()},function(e,t,n){var r,i=(r=n(26))&&r.__esModule?r:{default:r};e.exports=i.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=l.value;t+=d.length}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}var c=new e(t),f=0,p=!0,h=!1,g=void 0;try{for(var y,v=r[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var m=y.value;c.set(m,f),f+=m.length}}catch(e){h=!0,g=e}finally{try{!p&&v.return&&v.return()}finally{if(h)throw g}}return c}},function(e,t,n){var r;Object.defineProperty(t,"__esModule",{value:!0});var i=((r=n(4))&&r.__esModule?r:{default:r}).default.CRYTO_EVENTS;t.default=function(){function e(t){d(this,e),this.inputBuffer=t.inputbuffer,this.outputBuffer=t.outputbuffer,this.key=t.key,this.iv=t.iv,this.method=t.method,this.crypto=window.crypto||window.msCrypto}return c(e,[{key:"init",value:function(){this.on(i.START_DECRYPT,this.decript.bind(this))}},{key:"decript",value:function(){var e=this;this.aeskey?this.decriptData():this.crypto.subtle.importKey("raw",this.key.buffer,{name:"AES-CBC"},!1,["encrypt","decrypt"]).then(function(t){e.aeskey=t,e.decriptData()})}},{key:"decriptData",value:function(){var e=this,t=this._context.getInstance(this.inputBuffer),n=this._context.getInstance(this.outputBuffer),r=t.shift();r&&this.crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv.buffer},this.aeskey,r).then(function(t){n.push(new Uint8Array(t)),e.emit(i.DECRYPTED),e.decriptData(r)})}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(29)),i=f(n(36)),a=n(39),o=n(9),s=n(0),l=n(7),u=f(n(2));function f(e){return e&&e.__esModule?e:{default:e}}var p=s.EVENTS.REMUX_EVENTS,h=s.EVENTS.DEMUX_EVENTS,g=s.EVENTS.LOADER_EVENTS,y="FLVController",v=function(){function e(){d(this,e)}return c(e,[{key:"warn",value:function(){}}]),e}(),m=function(){function e(t){d(this,e),this.TAG=y,this._player=t,this.state={initSegmentArrived:!1,range:{start:0,end:""},rangeSupport:!0}}return c(e,[{key:"init",value:function(){var e=this;this._context.registry("FETCH_LOADER",a.FetchLoader),this._context.registry("LOADER_BUFFER",o.XgBuffer),this._context.registry("FLV_DEMUXER",r.default),this._context.registry("TRACKS",o.Tracks),this._context.registry("MP4_REMUXER",i.default.Mp4Remuxer),this._context.registry("PRE_SOURCE_BUFFER",o.PreSource),this._context.registry("COMPATIBILITY",l.Compatibility),this._context.registry("LOGGER",v),this.mse=this._context.registry("MSE",s.Mse)({container:this._player.video}),this.initListeners(),setTimeout(function(){e.loadMeta()},0)}},{key:"initListeners",value:function(){this.on(g.LOADER_DATALOADED,this._handleLoaderDataLoaded.bind(this)),this.on(g.LOADER_ERROR,this._handleNetworkError.bind(this)),this.on(h.MEDIA_INFO,this._handleMediaInfo.bind(this)),this.on(h.METADATA_PARSED,this._handleMetadataParsed.bind(this)),this.on(h.DEMUX_COMPLETE,this._handleDemuxComplete.bind(this)),this.on(h.DEMUX_ERROR,this._handleDemuxError.bind(this)),this.on(p.INIT_SEGMENT,this._handleAppendInitSegment.bind(this)),this.on(p.MEDIA_SEGMENT,this._handleMediaSegment.bind(this))}},{key:"_handleMediaInfo",value:function(){var e=this;this._context.onMetaData||this.emit(h.DEMUX_ERROR,new Error("failed to get mediainfo"));var t=this._context.getInstance("LOADER_BUFFER"),n=this._context.getInstance("FETCH_LOADER");this.isSeekable&&(n.cancel(),this.state.range={start:0,end:t.historyLen-1},setTimeout(function(){e.loadNext(0)}))}},{key:"_handleLoaderDataLoaded",value:function(){this.emitTo("FLV_DEMUXER",h.DEMUX_START)}},{key:"_handleMetadataParsed",value:function(e){this.emit(p.REMUX_METADATA,e)}},{key:"_handleDemuxComplete",value:function(){this.emit(p.REMUX_MEDIA)}},{key:"_handleAppendInitSegment",value:function(){this.state.initSegmentArrived=!0,this.mse.addSourceBuffers()}},{key:"_handleMediaSegment",value:function(){this.mse.addSourceBuffers(),this.mse.doAppend()}},{key:"_handleNetworkError",value:function(e,t){this._player.emit("error",new u.default.Errors("network",this._player.config.url)),this._onError(g.LOADER_ERROR,e,t,!0)}},{key:"_handleDemuxError",value:function(e,t,n){void 0===n&&(n=!1),this._player.emit("error",new u.default.Errors("parse",this._player.config.url)),this._onError(g.LOADER_ERROR,e,t,n)}},{key:"_onError",value:function(e,t,n,r){var i={errorType:e,errorDetails:"[".concat(t,"]: ").concat(n.message),errorFatal:r||!1};this._player.emit("FLV_ERROR",i)}},{key:"seek",value:function(e){if(this._context.onMetaData){if(this.isSeekable){this._context.getInstance("LOADER_BUFFER").clear();var t=this._player.config.preloadTime,n=void 0===t?15:t,r=this.getSeekRange(e,n);this.state.range=r,this.loadData()}}else this.loadMeta()}},{key:"loadNext",value:function(e){this._context.onMetaData&&(this.loader.loading||this.getNextRange(e)&&this.loadData())}},{key:"loadData",value:function(){var e=this.state.range,t=e.start,n=e.end;this.emit(g.LADER_START,this._player.config.url,{headers:{method:"get",Range:"bytes=".concat(t,"-").concat(n)}})}},{key:"loadMeta",value:function(){var e=this;this.loader.load(this._player.config.url,{headers:{Range:"bytes=0-"}}).catch(function(){e.state.rangeSupport=!1,e.loadFallback()})}},{key:"loadFallback",value:function(){var e=this;this.loader.load(this._player.config.url).catch(function(){e._player.emit("error",new u.default.Errors("network",e._player.config.url))})}},{key:"getSeekRange",value:function(t,n){var r=this._context.onMetaData.keyframes,i=this._context.mediaInfo.duration,a=t,o=t+n,s=e.findFilePosition(a,r);return o>=i||a>=i?{start:s,end:""}:{start:s,end:e.findFilePosition(o,r)}}},{key:"getNextRange",value:function(e){if(""!==this.state.range.end){var t=this.getSeekRange(e,this.config.preloadTime||15),n=t.end;return n<=this.state.range.end&&""!==n?void 0:(this.state.range={start:this.state.range.end+1,end:n},!0)}}},{key:"destroy",value:function(){this._player=null,this.mse=null,this.state={initSegmentArrived:!1,range:{start:0,end:""},rangeSupport:!0}}},{key:"isSeekable",get:function(){return!!this.state.rangeSupport&&(!this._context||!this._context.mediaInfo.isComplete()||null!==this._context.mediaInfo.keyframes&&void 0!==this._context.mediaInfo.keyframes)}},{key:"config",get:function(){return this._player.config}},{key:"loader",get:function(){return this._context.getInstance("FETCH_LOADER")}}],[{key:"findFilePosition",value:function(e,t){for(var n=0,r=t.times.length;n<r;n++){var i=t.times[n],a=n+1<r?t.times[n+1]:Number.MAX_SAFE_INTEGER;if(i<=e&&e<=a)return t.filepositions[n]}return""}}]),e}();t.default=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=n(7),o=n(9),s=(r=n(35))&&r.__esModule?r:{default:r},l=i.EVENTS.DEMUX_EVENTS,u=function(){function e(){d(this,e),this._firstFragmentLoaded=!1,this._trackNum=0,this._hasScript=!1}return c(e,[{key:"init",value:function(){this.on(l.DEMUX_START,this.doParseFlv.bind(this))}},{key:"doParseFlv",value:function(){if(this._firstFragmentLoaded){if(this.loaderBuffer.length<11)return;var e,t=1e5;do{e=this._parseFlvTag()}while(e&&t-- >0);this.emit(l.DEMUX_COMPLETE)}else{if(this.loaderBuffer.length<13)return;var n=this.loaderBuffer.shift(13);this.parseFlvHeader(n),this.doParseFlv()}}},{key:"parseFlvHeader",value:function(t){if(e.isFlvFile(t)){this._firstFragmentLoaded=!0;var n=e.getPlayType(t[4]);n.hasVideo&&this.initVideoTrack(),n.hasAudio&&this.initAudioTrack()}else this.emit(l.DEMUX_ERROR,new Error("invalid flv file")),this.doParseFlv();this.doParseFlv()}},{key:"initVideoTrack",value:function(){this._trackNum++;var e=new o.VideoTrack;e.meta=new i.VideoTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.videoTrack=e}},{key:"initAudioTrack",value:function(){this._trackNum++;var e=new o.AudioTrack;e.meta=new i.AudioTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.audioTrack=e}},{key:"_parseFlvTag",value:function(){if(this.loaderBuffer.length<11)return null;var e=this._parseFlvTagHeader();return e&&this._processChunk(e),e}},{key:"_parseFlvTagHeader",value:function(){var e=0,t={},n=this.loaderBuffer.toInt(e,1);if(e+=1,t.filtered=(32&n)>>>5,t.tagType=31&n,t.datasize=this.loaderBuffer.toInt(e,3),e+=3,8!==t.tagType&&9!==t.tagType&&11!==t.tagType&&18!==t.tagType||0!==this.loaderBuffer.toInt(8,3))return this.loaderBuffer&&this.loaderBuffer.length>0&&this.loaderBuffer.shift(1),this.emit(l.DEMUX_ERROR,this.TAG,new Error("tagType "+t.tagType),!1),null;if(this.loaderBuffer.length<t.datasize+15)return null;this.loaderBuffer.shift(4);var r=this.loaderBuffer.toInt(0,3);this.loaderBuffer.shift(3);var i=this.loaderBuffer.shift(1)[0];return i>0&&(r+=16777216*i),t.dts=r,this.loaderBuffer.shift(3),t}},{key:"_processChunk",value:function(e){switch(e.tagType){case 18:this._parseScriptData(e);break;case 8:this._parseAACData(e);break;case 9:this._parseHevcData(e);break;case 11:this.loaderBuffer.shift(3);break;default:this.loaderBuffer.shift(1)}}},{key:"_parseScriptData",value:function(e){var t=this.tracks.audioTrack,n=this.tracks.videoTrack,r=this.loaderBuffer.shift(e.datasize),i=(new s.default).resolve(r,r.length),a=this._context.onMetaData=i?i.onMetaData:void 0;if(this._context.mediaInfo.duration=a.duration,this._context.mediaInfo.hasVideo=a.hasVideo,this._context.mediaInfo.hsaAudio=a.hasAudio,this._datasizeValidator(e.datasize)&&(this.emit(l.MEDIA_INFO),this._hasScript=!0),t&&!t.hasSpecificConfig){var o=t.meta;switch(a.audiosamplerate&&(o.sampleRate=a.audiosamplerate),a.audiochannels&&(o.channelCount=a.audiochannels),a.audiosamplerate){case 44100:o.sampleRateIndex=4;break;case 22050:o.sampleRateIndex=7;break;case 11025:o.sampleRateIndex=10}}if(n&&!n.hasSpecificConfig){var u=n.meta;if("number"==typeof a.framerate){var d=Math.floor(1e3*a.framerate);if(d>0){var c=d/1e3;u.frameRate||(u.frameRate={}),u.frameRate.fixed=!0,u.frameRate.fps=c,u.frameRate.fps_num=d,u.frameRate.fps_den=1e3}}}}},{key:"_aacSequenceHeaderParser",value:function(e){var t={hasSpecificConfig:!0};t.objectType=e[1]>>>3,t.sampleRateIndex=(7&e[1])<<1|e[2]>>>7,t.audiosamplerate=this._switchAudioSampleRate(t.sampleRateIndex),t.channelCount=(120&e[2])>>>3,t.frameLength=(4&e[2])>>>2,t.dependsOnCoreCoder=(2&e[2])>>>1,t.extensionFlagIndex=1&e[2],t.codec="mp4a.40.".concat(t.objectType);var n,r,i=window.navigator.userAgent.toLowerCase(),a=t.sampleRateIndex;return-1!==i.indexOf("firefox")?t.sampleRateIndex>=6?(t.objectType=5,r=new Array(4),n=a-3):(t.objectType=2,r=new Array(2),n=a):-1!==i.indexOf("android")?(t.objectType=2,r=new Array(2),n=a):(t.objectType=5,n=t.sampleRateIndex,r=new Array(4),t.sampleRateIndex>=6?n=t.sampleRateIndex-3:1===t.channelCount&&(t.objectType=2,r=new Array(2),n=t.sampleRateIndex)),r[0]=t.objectType<<3,r[0]|=(15&t.sampleRateIndex)>>>1,r[1]=(15&t.sampleRateIndex)<<7,r[1]|=(15&t.channelCount)<<3,5===t.objectType&&(r[1]|=(15&n)>>>1,r[2]=(1&n)<<7,r[2]|=8,r[3]=0),t.config=r,t}},{key:"_parseAACData",value:function(e){var t=this.tracks.audioTrack;if(t){var n=t.meta;n||(n=new i.AudioTrackMeta);var r=this.loaderBuffer.shift(1)[0];e.data=this.loaderBuffer.shift(e.datasize-1);var a=(240&r)>>>4;t.format=a,10!==a&&this.emit(l.DEMUX_ERROR,new Error("invalid audio format: ".concat(a))),10!==a||this._hasAudioSequence||(n.sampleRate=this._switchAudioSamplingFrequency(r),n.sampleRateIndex=(12&r)>>>2,n.frameLenth=(2&r)>>>1,n.channelCount=1&r,n.refSampleDuration=Math.floor(1024/n.audioSampleRate*n.timescale));var o=n.audioSampleRate,s=n.sampleRateIndex,u=n.refSampleDuration;delete e.tagType;var d=this._datasizeValidator(e.datasize);if(0===e.data[0]){var c=this._aacSequenceHeaderParser(e.data);o=c.audiosamplerate||n.audioSampleRate,s=c.sampleRateIndex||n.sampleRateIndex,u=Math.floor(1024/o*n.timescale),n.channelCount=c.channelCount,n.sampleRate=o,n.sampleRateIndex=s,n.refSampleDuration=u,n.duration=this._context.mediaInfo.duration*n.timescale,n.config=c.config;var f=this._context.mediaInfo.audio;f.codec=c.codec,f.channelCount=c.channelCount,f.sampleRate=o,f.sampleRateIndex=c.audioSampleRateIndex,this._hasScript&&!this._hasAudioSequence?this.emit(l.METADATA_PARSED,"audio"):this._hasScript&&this._hasAudioSequence&&this.emit(l.AUDIO_METADATA_CHANGE),this._hasAudioSequence=!0}else e.data=e.data.slice(1,e.data.length),t.samples.push(e);d||this.emit(l.DEMUX_ERROR,this.TAG,new Error("TAG length error at "+e.datasize),!1)}}},{key:"_parseHevcData",value:function(e){var t=this.loaderBuffer.shift(1)[0];e.frameType=(240&t)>>>4,e.isKeyframe=1===e.frameType;var n=15&t;if(this.tracks.videoTrack.codecID=n,e.avcPacketType=this.loaderBuffer.shift(1)[0],e.cts=this.loaderBuffer.toInt(0,3),this.loaderBuffer.shift(3),12===n){var r=this.loaderBuffer.shift(e.datasize-5);if(e.data=r,0!==Number.parseInt(e.avcPacketType)){this._datasizeValidator(e.datasize)||this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1);var i={},a=0;for(i.cts=e.cts,i.dts=e.dts;e.data.length>a;){var o=e.data.slice(Number.parseInt(a),4+a);i.size=o[3],i.size+=256*o[2],i.size+=256*o[1]*256,i.size+=256*o[0]*256*256,a+=4,i.data=e.data.slice(Number.parseInt(a),i.size+a),a+=i.size,this.tracks.videoTrack.samples.push(i),this.emit(l.METADATA_PARSED,"video")}}else 0===Number.parseInt(e.avcPacketType)&&(this._datasizeValidator(e.datasize)?this.emit(l.METADATA_PARSED,"video"):this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1))}else if(7===n){var s=this.loaderBuffer.shift(e.datasize-5);if(0===s[4]&&0===s[5]&&0===s[6]&&1===s[7]){for(var u=0,d=0;d<4;d++)u=256*u+s[d];u-=4,(s=s.slice(4,s.length))[3]=u%256,u=(u-s[3])/256,s[2]=u%256,u=(u-s[2])/256,s[1]=u%256,s[0]=(u-s[1])/256}if(e.data=s,0===e.avcPacketType)this._avcSequenceHeaderParser(e.data),this._datasizeValidator(e.datasize)&&(this._hasScript&&!this._hasVideoSequence?this.emit(l.METADATA_PARSED,"video"):this._hasScript&&this._hasVideoSequence&&this.emit(l.VIDEO_METADATA_CHANGE),this._hasVideoSequence=!0);else{if(!this._datasizeValidator(e.datasize))return void this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1);this.tracks.videoTrack.samples.push(e)}}else this.emit(l.DEMUX_ERROR,this.TAG,new Error("video codeid is ".concat(n)),!1),e.data=this.loaderBuffer.shift(e.datasize-1),this._datasizeValidator(e.datasize)||this.emit(l.DEMUX_ERROR,this.TAG,new Error("invalid video tag datasize: ".concat(e.datasize)),!1),this.tracks.videoTrack.samples.push(e),this.emit(l.DEMUX_COMPLETE);delete e.tagType}},{key:"_avcSequenceHeaderParser",value:function(e){var t=this.tracks.videoTrack;if(t){var n=0;t.meta||(t.meta=new i.VideoTrackMeta);var r=t.meta;r.configurationVersion=e[0],r.avcProfileIndication=e[1],r.profileCompatibility=e[2],r.avcLevelIndication=e[3]/10,r.nalUnitLength=1+(3&e[4]);var o=31&e[5];n=6;for(var s={},l=0;l<o;l++){var u=255*e[n]+e[n+1];n+=2;for(var d=new Uint8Array(u),c=0;c<u;c++)d[c]=e[n+c];for(var f="avc1.",p=1;p<4;p++){var h=d[p].toString(16);h.length<2&&(h="0"+h),f+=h}r.codec=f,n+=u,this.tracks.videoTrack.meta.sps=d,s=a.SpsParser.parseSPS(d)}var g=e[n];n++;for(var y=0;y<g;y++){var v=255*e[n]+e[n+1];n+=2;for(var m=new Uint8Array(v),x=0;x<v;x++)m[x]=e[n+x];n+=v,this.tracks.videoTrack.meta.pps=m}Object.assign(r,a.SpsParser.toVideoMeta(s));var b=this._context.mediaInfo.video;b.codec=r.codec,b.profile=r.profile,b.level=r.level,b.chromaFormat=r.chromaFormat,b.frameRate=r.frameRate,b.parRatio=r.parRatio,b.width=b.width===r.presentWidth?b.width:r.presentWidth,b.height=b.height===r.presentHeight?b.width:r.presentHeight,r.duration=this._context.mediaInfo.duration*r.timescale,r.avcc=new Uint8Array(e.length),r.avcc.set(e),t.meta=r}}},{key:"_switchAudioSampleRate",value:function(e){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][e]}},{key:"_switchAudioSamplingFrequency",value:function(e){return[5500,11025,22050,44100,48e3][(12&e)>>>2]}},{key:"_switchAudioChannel",value:function(e){return[1,2][1&e]}},{key:"_datasizeValidator",value:function(e){var t=this.loaderBuffer.toInt(0,4);return this.loaderBuffer.shift(4),t===e+11}},{key:"loaderBuffer",get:function(){var e=this._context.getInstance("LOADER_BUFFER");if(e)return e;this.emit(l.DEMUX_ERROR,new Error("\u627e\u4e0d\u5230 loaderBuffer \u5b9e\u4f8b"))}},{key:"tracks",get:function(){return this._context.getInstance("TRACKS")}},{key:"logger",get:function(){return this._context.getInstance("LOGGER")}}],[{key:"isFlvFile",value:function(e){return!(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])}},{key:"getPlayType",value:function(e){var t={hasVideo:!1,hasAudio:!1};return!0&e&&(t.hasVideo=!0),!0&e&&(t.hasAudio=!0),t}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(8))&&r.__esModule?r:{default:r},a=function(){function e(){d(this,e)}return c(e,null,[{key:"getNalunits",value:function(t){if(t.length-t.position<4)return[];var n=t.dataview,r=t.position;return 1===n.getInt32(r)||0===n.getInt16(r)&&1===n.getInt8(r+2)?e.getAnnexbNals(t):e.getAvccNals(t)}},{key:"getAnnexbNals",value:function(t){for(var n=[],r=e.getHeaderPositionAnnexB(t),i=r.pos,a=i;i<t.length-4;){var o=t.buffer.slice(i,i+r.headerLength);r.pos===t.position&&t.skip(r.headerLength),a=(r=e.getHeaderPositionAnnexB(t)).pos;var s={header:o,body:new Uint8Array(t.buffer.slice(i+o.byteLength,a))};e.analyseNal(s),n.push(s),t.skip(a-t.position),i=a}return n}},{key:"getAvccNals",value:function(t){for(var n=[];t.position<t.length-4;){var r=t.dataview.getInt32();if(!(t.length-t.position>=r))break;var i=t.buffer.slice(t.position,t.position+4);t.skip(4);var a=t.buffer.slice(t.position,t.position+r);t.skip(r);var o={header:i,body:a};e.analyseNal(o),n.push(o)}return n}},{key:"analyseNal",value:function(e){switch(31&e.body[0]){case 1:e.ndr=!0;break;case 5:e.idr=!0;break;case 6:break;case 7:e.sps=i.default.parseSPS(e.body);break;case 8:e.pps=!0}}},{key:"getHeaderPositionAnnexB",value:function(e){for(var t=e.position,n=0;3!==n&&4!==n&&t<e.length-4;)0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:1===e.dataview.getInt8(t+2)?n=3:t++:t++;return t===e.length-4&&(0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)&&(n=4):(t++,0===e.dataview.getInt16(t)&&1===e.dataview.getInt8(t)?n=3:t=e.length)),{pos:t,headerLength:n}}},{key:"getAvcc",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength+11);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;var r=6;return n.set(new Uint8Array([e.byteLength>>>8&255,255&e.byteLength]),r),r+=2,n.set(e,r),n[r+=e.byteLength]=1,r++,n.set(new Uint8Array([t.byteLength>>>8&255,255&t.byteLength]),r),r+=2,n.set(t,r),n}}]),e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(t){d(this,e),this.TAG="Golomb",this._buffer=t,this._bufferIndex=0,this._totalBytes=t.byteLength,this._totalBits=8*t.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}return c(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0,!1),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}},{key:"readBits",value:function(e){if(e<=this._currentWordBitsLeft){var t=this._currentWord>>>32-e;return this._currentWord<<=e,this._currentWordBitsLeft-=e,t}var n=this._currentWordBitsLeft?this._currentWord:0;this._currentWordBitsLeft;var r=e-this._currentWordBitsLeft;this._fillCurrentWord();var i=Math.min(r,this._currentWordBitsLeft),a=this._currentWord>>>32-i;return this._currentWord<<=i,this._currentWordBitsLeft-=i,n<<i|a}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=(r=n(33))&&r.__esModule?r:{default:r},o=i.EVENTS.REMUX_EVENTS,s=function(){function e(){d(this,e),this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}return c(e,[{key:"init",value:function(){this.before(o.REMUX_MEDIA,this.doFix.bind(this))}},{key:"reset",value:function(){this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}},{key:"doFix",value:function(){var e=this.getFirstSample(),t=e.isFirstAudioSamples,n=e.isFirstVideoSamples;this.removeInvalidSamples(),this.recordSamplesCount(),this._firstVideoSample&&this.fixRefSampleDuration(this.videoTrack.meta,this.videoTrack.samples),this._firstAudioSample&&this.fixRefSampleDuration(this.audioTrack.meta,this.audioTrack.samples),this.doFixVideo(n),this.doFixAudio(t)}},{key:"doFixVideo",value:function(e){var t=this.videoTrack,n=t.samples,r=t.meta;if((!r.frameRate||!1!==r.frameRate.fixed)&&n&&n.length&&this._firstVideoSample){var i,a=n[0],o=a.dts,s=n.length;if(e&&this._firstAudioSample){var l=this._firstVideoSample.dts,u=l-this._firstAudioSample.dts;if(u>2*r.refSampleDuration)for(var d=Math.floor(u/r.refSampleDuration),c=0;c<d;c++){var f=Object.assign({},a);f.dts=l-(c+1)*r.refSampleDuration,f.pts=f.dts+f.cts,n.unshift(f),this.filledVideoSamples.push({dts:f.dts,size:f.data.byteLength})}}if(this.nextVideoDts){i=o-this.nextVideoDts;var p=Math.abs(i);if(i>2*r.refSampleDuration)for(var h=Math.floor(i/r.refSampleDuration),g=0;g<h;g++){var y=Object.assign({},n[0]),v=o-(g+1)*r.refSampleDuration;y.dts=v>this.nextVideoDts?v:this.nextVideoDts,y.pts=y.dts+y.cts,this.videoTrack.samples.unshift(y),this.filledVideoSamples.push({dts:y.dts,size:y.data.byteLength})}else p<=10&&p>0&&(n[0].dts=this.nextVideoDts,n[0].originDts=n[0].dts,n[0].cts=void 0!==n[0].cts?n[0].cts:n[0].pts-n[0].dts,n[0].pts=n[0].dts+n[0].cts)}var m=n[n.length-1].dts,x=n.length>=2?m-n[n.length-2].dts:r.refSampleDuration;this.lastVideoSamplesLen=s,this.nextVideoDts=m+x,this.lastVideoDts=m;for(var b=0,_=n.length;b<_;b++){var k=n[b],w=n[b+1];if(!w)break;var E=w.dts-k.dts;if(E>2*r.refSampleDuration)for(var S=Math.floor(E/r.refSampleDuration),T=0;T<S;){var A=Object.assign({},w);A.dts=k.dts+(T+1)*r.refSampleDuration,A.pts=A.dts+A.cts,A<w.dts&&(n.splice(b,0,A),this.filledVideoSamples.push({dts:A.dts,size:A.data.byteLength})),T++,b++}}this.videoTrack.samples=n}}},{key:"doFixAudio",value:function(t){var n=this.audioTrack,r=n.samples,i=n.meta;if(r&&r.length){var o,s=r.length,l=a.default.getSilentFrame(i.codec,i.channelCount),u=this._firstAudioSample;if(this._firstVideoSample&&t){var d=this._firstVideoSample.pts?this._firstVideoSample.pts:this._firstVideoSample.dts+this._firstVideoSample.cts;if(u.dts-d>i.refSampleDuration)for(var c=Math.floor((u.dts-d)/i.refSampleDuration),f=0;f<c;f++){var p={data:l,datasize:l.byteLength,dts:u.dts-(f+1)*i.refSampleDuration,filtered:0};r.unshift(p),this.filledAudioSamples.push({dts:p.dts,size:p.data.byteLength})}}var h=r[0].dts;if(this.nextAudioDts){o=h-this.nextAudioDts;var g=Math.abs(o);if(g>i.refSampleDuration&&1===s&&1===this.lastAudioSamplesLen&&(i.refSampleDurationFixed=void 0),o>2*i.refSampleDuration)if(1===s&&1===this.lastAudioSamplesLen)i.refSampleDurationFixed=void 0!==i.refSampleDurationFixed?i.refSampleDurationFixed+o:i.refSampleDuration+o;else for(var y=Math.floor(o/i.refSampleDuration),v=0;v<y;v++){var m=h-(v+1)*i.refSampleDuration,x=Object.assign({},r[0],{dts:m>this.nextAudioDts?m:this.nextAudioDts});this.filledAudioSamples.push({dts:x.dts,size:x.data.byteLength}),this.audioTrack.samples.unshift(x)}else g<=10&&g>0&&(r[0].dts=this.nextAudioDts,r[0].pts=this.nextAudioDts)}var b=r[r.length-1].dts,_=r.length>=2?b-r[r.length-2].dts:i.refSampleDuration;this.lastAudioSamplesLen=s,this.nextAudioDts=i.refSampleDurationFixed?b+i.refSampleDurationFixed:b+_,this.lastAudioDts=b;for(var k=0,w=r.length;k<w;k++){var E=r[k],S=r[k+1];if(!S)break;var T=S.dts-E.dts;r[k].duration=T}this.audioTrack.samples=e.sortAudioSamples(r)}}},{key:"getFirstSample",value:function(){var t=this.videoTrack.samples,n=this.audioTrack.samples,r=!1,i=!1;return!this._firstVideoSample&&t.length&&(this._firstVideoSample=e.findFirstVideoSample(t),r=!0),!this._firstAudioSample&&n.length&&(this._firstAudioSample=e.findFirstAudioSample(n),i=!0),{isFirstVideoSamples:r,isFirstAudioSamples:i}}},{key:"fixRefSampleDuration",value:function(e,t){var n="video"===e.type,r=n?this.allVideoSamplesCount:this.allAudioSamplesCount,i=n?this._firstVideoSample.dts:this._firstAudioSample.dts,a=n?this.filledVideoSamples.length:this.filledAudioSamples.length;if(!e.refSampleDuration||e.refSampleDuration<=0||Number.isNaN(e.refSampleDuration)){if(t.length>=1){var o=t[t.length-1].dts;e.refSampleDuration=Math.floor((o-i)/(r+a-1))}}else if(e.refSampleDuration&&t.length>=10){var s=(t[t.length-1].dts-t[0].dts)/(t.length-1);e.refSampleDuration=Math.floor(Math.abs(e.refSampleDuration-s)<=5?e.refSampleDuration:s)}}},{key:"recordSamplesCount",value:function(){var e=this.audioTrack,t=this.videoTrack;this.allAudioSamplesCount+=e.samples.length,this.allVideoSamplesCount+=t.samples.length}},{key:"removeInvalidSamples",value:function(){var e=this,t=this._firstVideoSample,n=this._firstAudioSample;this.audioTrack.samples=this.audioTrack.samples.filter(function(t){return t.dts>=n.dts&&(void 0===e.lastAudioDts||t.dts>e.lastAudioDts)}),this.videoTrack.samples=this.videoTrack.samples.filter(function(n){return n.dts>=t.dts&&(void 0===e.lastVideoDts||n.dts>e.lastVideoDts)})}},{key:"tracks",get:function(){return this._context.getInstance("TRACKS")}},{key:"audioTrack",get:function(){return this.tracks?this.tracks.audioTrack:null}},{key:"videoTrack",get:function(){return this.tracks?this.tracks.videoTrack:null}}],[{key:"sortAudioSamples",value:function(e){return 1===e.length?e:e.sort(function(e,t){return e.dts-t.dts})}},{key:"findFirstAudioSample",value:function(t){return t&&0!==t.length?e.sortAudioSamples(t)[0]:null}},{key:"findFirstVideoSample",value:function(e){if(!e.length)return null;for(var t=e.sort(function(e,t){return e.dts-t.dts}),n=0,r=t.length;n<r;n++)if(t[n].isKeyframe)return t[n]}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){d(this,e)}return c(e,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){d(this,e),this.mimetype="",this.init=null,this.data=[]};t.default=function(){function e(){d(this,e),this.sources={}}return c(e,[{key:"getSource",value:function(e){return this.sources[e]}},{key:"createSource",value:function(e){return this.sources[e]=new r,this.sources[e]}},{key:"clear",value:function(){this.sources={}}},{key:"destroy",value:function(){this.sources={}}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={NUMBER:0,BOOLEAN:1,STRING:2,OBJECT:3,MIX_ARRAY:8,OBJECT_END:9,STRICT_ARRAY:10,DATE:11,LONE_STRING:12};t.default=function(){function e(){d(this,e),this.offset=0,this.readOffset=this.offset}return c(e,[{key:"resolve",value:function(e,t){if(t<3)throw new Error("not enough data for metainfo");var n={},r=this.parseValue(e),i=this.parseValue(e,t-r.bodySize);return n[r.data]=i.data,this.resetStatus(),n}},{key:"resetStatus",value:function(){this.offset=0,this.readOffset=this.offset}},{key:"parseString",value:function(e){var t=new DataView(e,this.readOffset).getUint16(0,!r.isLe),n="";n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"";var i=t+2;return this.readOffset+=i,{data:n,bodySize:t+2}}},{key:"parseDate",value:function(e,t){var n=new DataView(e,this.readOffset,t),i=n.getFloat64(0,!r.isLe);return i+=60*n.getInt16(8,!r.isLe)*1e3,this.readOffset+=10,{data:new Date(i),bodySize:10}}},{key:"parseObject",value:function(e,t){var n=this.parseString(e,t),r=this.parseValue(e,t-n.bodySize);return{data:{name:n.data,value:r.data},bodySize:n.bodySize+r.bodySize,isObjEnd:r.isObjEnd}}},{key:"parseLongString",value:function(e){var t=new DataView(e,this.readOffset).getUint32(0,!r.isLe),n="";return n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"",this.readOffset+=t+4,{data:n,bodySize:t+4}}},{key:"parseValue",value:function(e,t){var n=new ArrayBuffer;n=e instanceof ArrayBuffer?e:e.buffer;var a=i.NUMBER,o=i.BOOLEAN,s=i.STRING,l=i.OBJECT,u=i.MIX_ARRAY,d=i.OBJECT_END,c=i.STRICT_ARRAY,f=i.DATE,p=i.LONE_STRING,h=new DataView(n,this.readOffset,t),g=!1,y=h.getUint8(0),v=1;this.readOffset+=1;var m=null;switch(y){case a:m=h.getFloat64(1,!r.isLe),this.readOffset+=8,v+=8;break;case o:m=!!h.getUint8(1),this.readOffset+=1,v+=1;break;case s:var x=this.parseString(n);m=x.data,v+=x.bodySize;break;case l:m={};var b=0;for(16777215&h.getUint32(t-4,!r.isLe)&&(b=3);v<t-4;){var _=this.parseObject(n,t-v-b);if(_.isObjectEnd)break;m[_.data.name]=_.data.value,v+=_.bodySize}v<=t-3&&9==(16777215&h.getUint32(v-1,!r.isLe))&&(this.readOffset+=3,v+=3);break;case u:m={},v+=4,this.readOffset+=4;var k=0;for(9==(16777215&h.getUint32(t-4,!r.isLe))&&(k=3);v<t-8;){var w=this.parseObject(n,t-v-k);if(w.isObjectEnd)break;m[w.data.name]=w.data.value,v+=w.bodySize}v<=t-3&&9==(16777215&h.getUint32(v-1,!r.isLe))&&(v+=3,this.readOffset+=3);break;case d:m=null,g=!0;break;case c:m=[];var E=h.getUint32(1,!r.isLe);v+=4,this.readOffset+=4;for(var S=0;S<E;S++){var T=this.parseValue(n,t-v);m.push(T.data),v+=T.bodySize}break;case f:var A=this.parseDate(n,t-1);m=A.data,v+=A.bodySize;break;case p:var O=this.parseLongString(n,t-1);m=O.data,v+=O.bodySize;break;default:v=t}return{data:m,bodySize:v,isObjEnd:g}}}]),e}()},function(e,t,n){e.exports={Mp4Remuxer:n(37).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=(r=n(38))&&r.__esModule?r:{default:r},o=i.EVENTS.REMUX_EVENTS,s=function(){function e(){d(this,e),this._dtsBase=0,this._isDtsBaseInited=!1,this._audioNextDts=null,this._videoNextDts=null,this._videoSegmentList=new i.MediaSegmentList("video"),this._audioSegmentList=new i.MediaSegmentList("audio");var t=i.sniffer.browser;this._fillSilenceFrame="ie"===t,this.videoAllDuration=0,this.audioAllDuration=0}return c(e,[{key:"init",value:function(){this.on(o.REMUX_MEDIA,this.remux.bind(this)),this.on(o.REMUX_METADATA,this.onMetaDataReady.bind(this))}},{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._videoNextDts=null,this._audioNextDts=null,this._videoSegmentList.clear(),this._audioSegmentList.clear(),this._videoSegmentList=null,this._audioSegmentList=null}},{key:"remux",value:function(){var e=this._context.getInstance("TRACKS"),t=e.audioTrack,n=e.videoTrack;!this._isDtsBaseInited&&this.calcDtsBase(t,n),this._remuxVideo(n),this._remuxAudio(t)}},{key:"seek",value:function(){this._videoNextDts=null,this._audioNextDts=null,this._videoSegmentList.clear(),this._audioSegmentList.clear()}},{key:"onMetaDataReady",value:function(e){var t,n,r=new i.Buffer,s=a.default.ftyp();if("audio"===e){var l=this._context.getInstance("TRACKS"),u=l.audioTrack;n=u}else{var d=this._context.getInstance("TRACKS"),c=d.videoTrack;n=c}t=a.default.moov({type:e,meta:n.meta}),r.write(s,t);var f=this._context.getInstance("PRE_SOURCE_BUFFER"),p=f.getSource(e);p||(p=f.createSource(e)),p.mimetype=n.meta.codec,p.init=r,this.emit(o.INIT_SEGMENT,e)}},{key:"calcDtsBase",value:function(e,t){if(e.samples.length||t.samples.length){var n=1/0,r=1/0;e.samples&&e.samples.length&&(n=e.samples[0].dts),t.samples&&t.samples.length&&(r=t.samples[0].dts),this._dtsBase=Math.min(n,r),this._isDtsBaseInited=!0}}},{key:"_remuxVideo",value:function(e){var t=e;if(e.samples&&e.samples.length){for(var n=t.samples,r=-1,s=[],l={samples:[]};n.length;){var u=n.shift(),d=u.isKeyframe,c=void 0,f=void 0,p=u.dts-this._dtsBase;-1===r&&(r=p),void 0!==u.pts&&(c=(f=u.pts-this._dtsBase)-p),void 0!==u.cts&&(f=u.cts+p,c=u.cts);var h={buffer:[],size:0};l.samples.push(h),h.buffer.push(u.data),h.size+=u.data.byteLength;var g=0;g=n.length>=1?n[0].dts-this._dtsBase-p:s.length>=1?s[s.length-1].duration:this.videoMeta.refSampleDuration,this.videoAllDuration+=g,s.push({dts:p,cts:c,pts:f,data:u.data,size:u.data.byteLength,isKeyframe:d,duration:g,flags:{isLeading:0,dependsOn:d?2:1,isDependedOn:d?1:0,hasRedundancy:0,isNonSync:d?0:1},originDts:p,type:"video"})}var y=new i.Buffer,v=a.default.moof({id:t.meta.id,time:r,samples:s}),m=a.default.mdat(l);y.write(v,m),t.samples=[],t.length=0;var x=this._context.getInstance("PRE_SOURCE_BUFFER"),b=x.getSource("video");b||(b=x.createSource("video")),b.data.push(y),this.emit(o.MEDIA_SEGMENT,"video")}}},{key:"_remuxAudio",value:function(e){var t=e.samples,n=-1,r=[],s={samples:[]};if(t&&t.length){for(var l=!1;t.length;){var u=t.shift(),d=u.data,c=u.dts-this._dtsBase,f=c;l||(n=c,l=!0);var p=0;p=this.audioMeta.refSampleDurationFixed?this.audioMeta.refSampleDurationFixed:t.length>=1?t[0].dts-this._dtsBase-c:r.length>=1?r[r.length-1].duration:this.audioMeta.refSampleDuration,this.audioAllDuration+=p;var h={dts:c,pts:c,cts:0,size:d.byteLength,duration:u.duration?u.duration:p,flags:{isLeading:0,dependsOn:2,isDependedOn:1,hasRedundancy:0,isNonSync:0},isKeyframe:!0,originDts:f,type:"audio"},g={buffer:[],size:0};g.buffer.push(d),g.size+=d.byteLength,s.samples.push(g),r.push(h)}var y=new i.Buffer,v=a.default.moof({id:e.meta.id,time:n,samples:r}),m=a.default.mdat(s);y.write(v,m),e.samples=[],e.length=0;var x=this._context.getInstance("PRE_SOURCE_BUFFER"),b=x.getSource("audio");b||(b=x.createSource("audio")),b.data.push(y),this.emit(o.MEDIA_SEGMENT,"audio",y)}}},{key:"initSilentAudio",value:function(t,n){var r=e.getSilentFrame(this._audioMeta.channelCount);return{dts:t,pts:t,cts:0,duration:n,unit:r,size:r.byteLength,originDts:t,type:"video"}}},{key:"videoMeta",get:function(){return this._context.getInstance("TRACKS").videoTrack.meta}},{key:"audioMeta",get:function(){return this._context.getInstance("TRACKS").audioTrack.meta}}],[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){d(this,e)}return c(e,null,[{key:"size",value:function(e){return r.Buffer.writeUint32(e)}},{key:"initBox",value:function(t,n){for(var i=new r.Buffer,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return i.write.apply(i,[e.size(t),e.type(n)].concat(o)),i.buffer}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"ftyp",value:function(){return e.initBox(24,"ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))}},{key:"moov",value:function(t){var n,r=t.type,i=t.meta,a=8,o=e.mvhd(i.duration,i.timescale);n="video"===r?e.videoTrak(i):e.audioTrak(i);var s=e.mvex(i.duration,i.timescale||1e3,i.id);return[o,n,s].forEach(function(e){a+=e.byteLength}),e.initBox(a,"moov",o,n,s)}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.initBox(8+r.length,"mvhd",new Uint8Array(r))}},{key:"videoTrak",value:function(t){var n=8,r=e.tkhd({id:1,duration:t.duration,timescale:t.timescale||1e3,width:t.presentWidth,height:t.presentHeight,type:"video"}),i=e.mdia({type:"video",timescale:t.timescale||1e3,duration:t.duration,avcc:t.avcc,parRatio:t.parRatio,width:t.presentWidth,height:t.presentHeight});return[r,i].forEach(function(e){n+=e.byteLength}),e.initBox(n,"trak",r,i)}},{key:"audioTrak",value:function(t){var n=8,r=e.tkhd({id:2,duration:t.duration,timescale:t.timescale||1e3,width:0,height:0,type:"audio"}),i=e.mdia({type:"audio",timescale:t.timescale||1e3,duration:t.duration,channelCount:t.channelCount,samplerate:t.sampleRate,config:t.config});return[r,i].forEach(function(e){n+=e.byteLength}),e.initBox(n,"trak",r,i)}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration,i=t.width,a=t.height,o=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,a>>>8&255,255&a,0,0]);return e.initBox(8+o.byteLength,"tkhd",o)}},{key:"edts",value:function(t){var n=new r.Buffer,i=t.duration,a=t.mediaTime;return n.write(e.size(36),e.type("edts")),n.write(e.size(28),e.type("elst")),n.write(new Uint8Array([0,0,0,1,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,1])),n.buffer}},{key:"mdia",value:function(t){var n=8,r=e.mdhd(t.timescale,t.duration),i=e.hdlr(t.type),a=e.minf(t);return[r,i,a].forEach(function(e){n+=e.byteLength}),e.initBox(n,"mdia",r,i,a)}},{key:"mdhd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1?arguments[1]:void 0,r=new Uint8Array([0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,85,196,0,0]);return e.initBox(12+r.byteLength,"mdhd",e.extension(0,0),r)}},{key:"hdlr",value:function(t){var n=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===t&&(n.splice(8,4,115,111,117,110),n.splice(24,13,83,111,117,110,100,72,97,110,100,108,101,114,0)),e.initBox(8+n.length,"hdlr",new Uint8Array(n))}},{key:"minf",value:function(t){var n=8,r="video"===t.type?e.vmhd():e.smhd(),i=e.dinf(),a=e.stbl(t);return[r,i,a].forEach(function(e){n+=e.byteLength}),e.initBox(n,"minf",r,i,a)}},{key:"vmhd",value:function(){return e.initBox(20,"vmhd",new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}},{key:"smhd",value:function(){return e.initBox(16,"smhd",new Uint8Array([0,0,0,0,0,0,0,0]))}},{key:"dinf",value:function(){var t=new r.Buffer;return t.write(e.size(36),e.type("dinf"),e.size(28),e.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),t.buffer}},{key:"stbl",value:function(t){var n=8,r=e.stsd(t),i=e.stts(),a=e.stsc(),o=e.stsz(),s=e.stco();return[r,i,a,o,s].forEach(function(e){n+=e.byteLength}),e.initBox(n,"stbl",r,i,a,o,s)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?e.mp4a(t):e.avc1(t),e.initBox(16+n.byteLength,"stsd",e.extension(0,0),new Uint8Array([0,0,0,1]),n)}},{key:"mp4a",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.samplerate>>8&255,255&t.samplerate,0,0]),r=e.esds(t.config);return e.initBox(8+n.byteLength+r.byteLength,"mp4a",n,r)}},{key:"esds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[43,146,8,0],n=t.length,i=new r.Buffer,a=new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(t).concat([6,1,2]));return i.write(e.size(8+a.byteLength),e.type("esds"),a),i.buffer}},{key:"avc1",value:function(t){var n=new r.Buffer,i=t.width,a=t.height,o=t.parRatio.height,s=t.parRatio.width,l=t.avcc,u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>8&255,255&i,a>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),c=new Uint8Array([o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s]);return n.write(e.size(40+u.byteLength+l.byteLength+d.byteLength),e.type("avc1"),u,e.size(8+l.byteLength),e.type("avcC"),l,e.size(20),e.type("btrt"),d,e.size(16),e.type("pasp"),c),n.buffer}},{key:"stts",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stts",t)}},{key:"stsc",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stsc",t)}},{key:"stco",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0]);return e.initBox(16,"stco",t)}},{key:"stsz",value:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return e.initBox(20,"stsz",t)}},{key:"mvex",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=arguments.length>2?arguments[2]:void 0,i=new r.Buffer,a=r.Buffer.writeUint32(t);return i.write(e.size(56),e.type("mvex"),e.size(16),e.type("mehd"),e.extension(0,0),a,e.trex(n)),i.buffer}},{key:"trex",value:function(t){var n=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.initBox(8+n.byteLength,"trex",n)}},{key:"moof",value:function(t){var n=8,r=e.mfhd(),i=e.traf(t);return[r,i].forEach(function(e){n+=e.byteLength}),e.initBox(n,"moof",r,i)}},{key:"mfhd",value:function(){var t=r.Buffer.writeUint32(e.sequence);return e.sequence+=1,e.initBox(16,"mfhd",e.extension(0,0),t)}},{key:"traf",value:function(t){var n=8,r=e.tfhd(t.id),i=e.tfdt(t.time),a=e.sdtp(t),o=e.trun(t,a.byteLength);return[r,i,o,a].forEach(function(e){n+=e.byteLength}),e.initBox(n,"traf",r,i,o,a)}},{key:"tfhd",value:function(t){var n=r.Buffer.writeUint32(t);return e.initBox(16,"tfhd",e.extension(0,0),n)}},{key:"tfdt",value:function(t){return e.initBox(16,"tfdt",e.extension(0,0),r.Buffer.writeUint32(t))}},{key:"trun",value:function(t,n){var i=new r.Buffer,a=r.Buffer.writeUint32(t.samples.length),o=r.Buffer.writeUint32(92+16*t.samples.length+n);return i.write(e.size(20+16*t.samples.length),e.type("trun"),new Uint8Array([0,0,15,1]),a,o),t.samples.forEach(function(e){var t=e.flags;i.write(new Uint8Array([e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,e.size>>>24&255,e.size>>>16&255,e.size>>>8&255,255&e.size,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.isNonSync,0,0,e.cts>>>24&255,e.cts>>>16&255,e.cts>>>8&255,255&e.cts]))}),i.buffer}},{key:"sdtp",value:function(t){var n=new r.Buffer;return n.write(e.size(12+t.samples.length),e.type("sdtp"),e.extension(0,0)),t.samples.forEach(function(e){var t=e.flags,r=t.isLeading<<6|t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;n.write(new Uint8Array([r]))}),n.buffer}},{key:"mdat",value:function(t){var n=new r.Buffer,i=8;t.samples.forEach(function(e){i+=e.size}),n.write(e.size(i),e.type("mdat"));var a=new Uint8Array(i),o=0;return a.set(n.buffer,o),o+=8,t.samples.forEach(function(e){e.buffer.forEach(function(e){a.set(e,o),o+=e.byteLength})}),a}}]),e}();i.type=function(e){return new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])},i.sequence=1,t.default=i},function(e,t,n){e.exports={FetchLoader:n(40).default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).EVENTS.LOADER_EVENTS;t.default=function(){function t(e){d(this,t),this.configs=Object.assign({},e),this.url=null,this.status=0,this.error=null,this._reader=null,this._canceled=!1,this._destroyed=!1,this.readtype=this.configs.readtype,this.buffer=this.configs.buffer||"LOADER_BUFFER",this._loaderTaskNo=0}return c(t,[{key:"init",value:function(){this.on(r.LADER_START,this.load.bind(this))}},{key:"load",value:function(e,t){var n=this;this.url=e,this._canceled=!1;var i=this.getParams(t);return n.loading=!0,fetch(this.url,i).then(function(e){if(e.ok)return n.status=e.status,n._onFetchResponse(e);n.loading=!1,n.emit(r.LOADER_ERROR,n.TAG,new Error("invalid response."))}).catch(function(e){throw n.loading=!1,n.emit(r.LOADER_ERROR,n.TAG,e),new Error(e.message)})}},{key:"_onFetchResponse",value:function(e){var t=this,n=this._context.getInstance(this.buffer);this._loaderTaskNo++;var i=this._loaderTaskNo;if(!0===e.ok)switch(this.readtype){case 2:e.json().then(function(e){t.loading=!1,t._canceled||t._destroyed||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 1:e.text().then(function(e){t.loading=!1,t._canceled||t._destroyed||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 3:e.arrayBuffer().then(function(e){t.loading=!1,t._canceled||t._destroyed||(n?(n.push(new Uint8Array(e)),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 0:default:return this._onReader(e.body.getReader(),i)}}},{key:"_onReader",value:function(e,t){var n=this._context.getInstance(this.buffer);if(!n&&this._reader||this._destroyed)try{this._reader.cancel()}catch(e){}if(this._reader=e,!1!==this.loading){var i=this;this._reader&&this._reader.read().then(function(a){if(a.done)return i.loading=!1,i.status=0,void i.emit(r.LOADER_COMPLETE,n);if(!i._canceled&&!i._destroyed)return n.push(a.value),i.emit(r.LOADER_DATALOADED,n),i._onReader(e,t);if(i._reader)try{i._reader.cancel()}catch(e){}}).catch(function(e){i.loading=!1,i.emit(r.LOADER_ERROR,i.TAG,e)})}}},{key:"getParams",value:function(e){var t=Object.assign({},e),n=new Headers,r={method:"GET",headers:n,mode:"cors",cache:"default"};if("object"==typeof this.configs.headers){var i=this.configs.headers;for(var a in i)i.hasOwnProperty(a)&&n.append(a,i[a])}if("object"==typeof t.headers){var o=t.headers;for(var s in o)o.hasOwnProperty(s)&&n.append(s,o[s])}return!1===t.cors&&(r.mode="same-origin"),t.withCredentials&&(r.credentials="include"),r}},{key:"cancel",value:function(){if(this._reader){try{this._reader.cancel()}catch(e){}this._reader=null,this.loading=!1,this._canceled=!0}}},{key:"destroy",value:function(){this._destroyed=!0,this.cancel()}}],[{key:"type",get:function(){return"loader"}}]),t}()}]))}]))},1940:function(e,t,n){var r=n(1941),i=n(1942),a=n(1943);e.exports=function(e,t){return r(e)||i(e,t)||a()}},1941:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},1942:function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},1943:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},1944:function(e,t,n){var r=n(1503);function i(t,n,a){return!function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=i=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a}:e.exports=i=Reflect.construct,i.apply(null,arguments)}e.exports=i},1945:function(e,t,n){n(1378);var r=n(1946);function i(t,n,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},1946:function(e,t,n){var r=n(1378);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}}}]);
//# sourceMappingURL=19.13141ec7.chunk.js.map