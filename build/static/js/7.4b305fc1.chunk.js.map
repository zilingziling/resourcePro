{"version":3,"sources":["../node_modules/antd/es/icon/style/index.js","views/login/index.js"],"names":["__webpack_require__","e","then","t","bind","FormItem","antd_es_form__WEBPACK_IMPORTED_MODULE_18__","Item","Login","inject","observer","state","backgrounds","background","text","URL","modalVisible","pingtaivalue","pingtaiArr","userData","appInput","target","value","_this","setState","onPingtaiChange","window","sessionStorage","setItem","itemtype","itemLabel","props","UserStore","headerTitle","getItem","hideModal","handleSubmit","preventDefault","data","Object","assign","form","validateFields","err","values","login","_callee","arr","D_project_resource_project_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default","a","wrap","_context","prev","next","UpLogin","Username","SparkMD5","hash","password","Verification","loginType","sent","code","platform","map","v","label","name","id","type","loginSuccess","length","msg","t0","console","log","stop","userStore","updateStatus","token","userType","userId","JSON","stringify","openPlatform","location","isLoig","history","push","pathname","tiem","validation","_callee2","numbers","url","_context2","Math","floor","random","parseInt","this","getFieldDecorator","react__WEBPACK_IMPORTED_MODULE_19___default","createElement","className","onSubmit","style","marginBottom","rules","required","message","marginTop","antd_es_icon__WEBPACK_IMPORTED_MODULE_9__","antd_es_input__WEBPACK_IMPORTED_MODULE_7__","onBlur","onFocus","onChange","prefix","color","placeholder","src","onClick","initialValue","antd_es_radio__WEBPACK_IMPORTED_MODULE_5__","Group","antd_es_button__WEBPACK_IMPORTED_MODULE_3__","htmlType","antd_es_modal__WEBPACK_IMPORTED_MODULE_1__","title","maskClosable","visible","onCancel","footer","key","disabled","width","size","Component","Logins","create"],"mappings":"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","file":"static/js/7.4b305fc1.chunk.js","sourcesContent":["import '../../style/index.less';\nimport './index.less';","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { Button, Form, Input, Icon, Radio, Modal } from 'antd';\r\n\r\nimport SparkMD5 from 'spark-md5';\r\nimport { UpLogin, validation } from './../../api/login';\r\nimport { observer, inject } from 'mobx-react';\r\n\r\nimport('./index.less');\r\nconst FormItem = Form.Item;\r\n\r\n@inject('UserStore', 'homeStore', 'routerStore')\r\n@observer\r\nclass Login extends Component {\r\n\tstate = {\r\n\t\tbackgrounds: {\r\n\t\t\tbackground: null,//'#ffaf67'\r\n\t\t\ttext: null\r\n\t\t},\r\n\t\tURL: '',\r\n\t\tmodalVisible: false,\r\n\t\tpingtaivalue: null,\r\n\t\tpingtaiArr: [],\r\n\t\tuserData: null\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.validation();\r\n\t}\r\n\trender() {\r\n\t\tconst { getFieldDecorator } = this.props.form;\r\n\t\treturn (\r\n\t\t\t<div className=\"login\">\r\n\t\t\t\t<div className=\"login-body\">\r\n\t\t\t\t\t<div className=\"login-body-window\">\r\n\t\t\t\t\t\t<div className=\"login-body-window-title\">\r\n\t\t\t\t\t\t\t<p className=\"login-body-window-p\">登录</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Form className=\"login-form\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t\t<FormItem style={{ marginBottom: '1rem' }}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('Username', {\r\n\t\t\t\t\t\t\t\t\trules: [{ required: true, message: <div style={{ marginTop: '10px' }}><Icon type=\"exclamation-circle\" /> 请输入正确的身份证号码!</div> }],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tonBlur={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tonFocus={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"login-form-input\"\r\n\t\t\t\t\t\t\t\t\t\tprefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"请输入身份证号码\" />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</FormItem>\r\n\r\n\t\t\t\t\t\t\t<FormItem style={{ marginBottom: '1rem' }}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('password', {\r\n\t\t\t\t\t\t\t\t\trules: [{ required: true, message: <div style={{ marginTop: '10px' }}><Icon type=\"exclamation-circle\" />请输入您的密码!</div> }],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tonBlur={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tonFocus={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"login-form-input\"\r\n\t\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\t\tprefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"请输入密码\" />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</FormItem>\r\n\r\n\t\t\t\t\t\t\t<FormItem style={{ marginBottom: '1rem' }}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('Verification', {\r\n\t\t\t\t\t\t\t\t\trules: [{ required: true, message: <div style={{ marginTop: '10px' }}><Icon type=\"exclamation-circle\" />请输入您的验证码!</div> }],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tonBlur={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tonFocus={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.appInput}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"login-form-Verif\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入验证码\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tclassName=\"login-form-Verif-imgs\"\r\n\t\t\t\t\t\t\t\t\tsrc={this.state.URL}\r\n\t\t\t\t\t\t\t\t\tonClick={this.validation}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t<FormItem style={{ marginBottom: '1rem' }}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('loginType', {\r\n\t\t\t\t\t\t\t\t\trules: [{ required: true, message: <div style={{ marginTop: '10px' }}><Icon type=\"exclamation-circle\" />请输入您的用户类型!</div> }],\r\n\t\t\t\t\t\t\t\t\tinitialValue: 'checker'\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Radio.Group >\r\n\t\t\t\t\t\t\t\t\t\t<Radio value=\"checker\">审核员</Radio>\r\n\t\t\t\t\t\t\t\t\t\t<Radio value=\"student\">学生</Radio>\r\n\t\t\t\t\t\t\t\t\t</Radio.Group>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</FormItem>\r\n\r\n\t\t\t\t\t\t\t<FormItem className=\"login-form-item\" >\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tstyle={this.state.backgrounds}\r\n\t\t\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"login-form-button\">登录\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>{this.state.text}</span>\r\n\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tclassName=\"pingtai-choice\"\r\n\t\t\t\t\ttitle=\"选择需要登陆的平台\"\r\n\t\t\t\t\tmaskClosable={false}\r\n\t\t\t\t\tvisible={this.state.modalVisible}\r\n\t\t\t\t\tonCancel={this.hideModal}\r\n\t\t\t\t\tfooter={null}>\r\n\t\t\t\t\t<Radio.Group onChange={this.onPingtaiChange.bind(this)} value={this.state.pingtaivalue}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.pingtaiArr.map(v => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Radio itemLabel={v.label} itemtype={v.type} key={v.value} value={v.value}>{v.label}</Radio>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Radio.Group>\r\n\t\t\t\t\t<div className=\"pingtai-choice_button\">\r\n\t\t\t\t\t\t<Button onClick={this.loginSuccess} disabled={this.state.pingtaivalue === null} style={{ width: '200px' }} type=\"primary\" size='default'>确定</Button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\tappInput = (e) => {\r\n\t\tif (e.target.value !== '') {\r\n\t\t\tthis.setState({ text: null });\r\n\t\t}\r\n\t}\r\n\tonPingtaiChange = e => {\r\n\t\twindow.sessionStorage.setItem(\"platformType\", e.target.itemtype || '');\r\n\t\twindow.sessionStorage.setItem(\"platformName\", e.target.itemLabel || '');\r\n\t\twindow.sessionStorage.setItem(\"loginPlatformType\", e.target.itemtype || '');\r\n\t\twindow.sessionStorage.setItem(\"loginPlatformName\", e.target.itemLabel || '');\r\n\t\tthis.props.UserStore.headerTitle = window.sessionStorage.getItem(\"loginPlatformName\");\r\n\t\tthis.setState({\r\n\t\t\tpingtaivalue: e.target.value,\r\n\t\t});\r\n\t}\r\n\thideModal = () => {\r\n\t\tthis.setState({ modalVisible: false })\r\n\t}\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet data = Object.assign({}, this.state.backgrounds, { background: '#fda029' });\r\n\t\tthis.setState({ backgrounds: data });\r\n\t\tthis.props.form.validateFields((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tthis.login(values);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ text: null });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tlogin = async (values) => {\r\n\t\ttry {\r\n\t\t\tlet data = await UpLogin(values.Username, SparkMD5.hash(values.password), values.Verification, values.loginType);\r\n\t\t\tif (data.code === 0) {\r\n\t\t\t\tlet arr = data.platform.map(v => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlabel: v.name, value: v.id, type: v.code\r\n\t\t\t\t\t}\r\n\t\t\t\t}) || []\r\n\t\t\t\tthis.setState({ pingtaiArr: arr, userData: data })\r\n\t\t\t\tif (values.loginType === 'student') {\r\n\t\t\t\t\twindow.sessionStorage.setItem(\"platformType\", 'student');\r\n\t\t\t\t\twindow.sessionStorage.setItem(\"loginPlatformType\", 'student');\r\n\t\t\t\t\twindow.sessionStorage.setItem(\"platformName\", '弈简互动教学资源平台');\r\n\t\t\t\t\twindow.sessionStorage.setItem(\"loginPlatformName\", '弈简互动教学资源平台');\r\n\t\t\t\t\tthis.props.UserStore.headerTitle = window.sessionStorage.getItem(\"loginPlatformName\");\r\n\t\t\t\t\tthis.setState({ pingtaivalue: '' }, () => {\r\n\t\t\t\t\t\tthis.loginSuccess()\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.platform.length > 1) {\r\n\t\t\t\t\t\tthis.setState({ modalVisible: true })\r\n\t\t\t\t\t} else if (data.platform.length === 1) {\r\n\t\t\t\t\t\twindow.sessionStorage.setItem(\"platformType\", data.platform[0].code || '');\r\n\t\t\t\t\t\twindow.sessionStorage.setItem(\"loginPlatformType\", data.platform[0].code || '');\r\n\t\t\t\t\t\twindow.sessionStorage.setItem(\"platformName\", data.platform[0].name || '');\r\n\t\t\t\t\t\twindow.sessionStorage.setItem(\"loginPlatformName\", data.platform[0].name || '');\r\n\t\t\t\t\t\tthis.props.UserStore.headerTitle = window.sessionStorage.getItem(\"loginPlatformName\");\r\n\t\t\t\t\t\tthis.setState({ pingtaivalue: data.platform[0].id }, () => {\r\n\t\t\t\t\t\t\tthis.loginSuccess()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ text: data.msg });\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n\tloginSuccess = () => {\r\n\t\tthis.setState({ modalVisible: false })\r\n\t\tlet data = this.state.userData;\r\n\t\tconsole.log(data)\r\n\t\tthis.props.userStore.updateStatus(true, data.token, data.name, data.userType, data.userId, this.state.pingtaivalue, JSON.stringify(this.state.pingtaiArr), data.openPlatform);\r\n\t\tif (this.props.location.isLoig === false) {\r\n\t\t\tthis.props.history.push({\r\n\t\t\t\tpathname: '/index',\r\n\t\t\t});\r\n\t\t} else if (this.props.location.isLoig) {\r\n\t\t\tlet tiem = this.props.location.state;\r\n\t\t\tthis.props.userStore.updateStatus(true, data.token, data.name, data.userType, data.userId, this.state.pingtaivalue, JSON.stringify(this.state.pingtaiArr), data.openPlatform);\r\n\t\t\tthis.props.history.push({\r\n\t\t\t\tpathname: '/video',\r\n\t\t\t\tstate: tiem\r\n\t\t\t});\r\n\t\t} else if (typeof (this.props.location.state) === 'undefined') {\r\n\t\t\tthis.props.userStore.updateStatus(true, data.token, data.name, data.userType, data.userId, this.state.pingtaivalue, JSON.stringify(this.state.pingtaiArr), data.openPlatform);\r\n\t\t\tthis.props.history.push({\r\n\t\t\t\tpathname: '/index',\r\n\t\t\t});\r\n\t\t} else if (this.props.location.isLoig === 0) {\r\n\t\t\tthis.props.userStore.updateStatus(true, data.token, data.name, data.userType, data.userId, this.state.pingtaivalue, JSON.stringify(this.state.pingtaiArr), data.openPlatform);\r\n\t\t\tconsole.log(this.props.location);\r\n\t\t\tthis.props.history.push({\r\n\t\t\t\tpathname: this.props.location.state,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tvalidation = async () => {\r\n\t\ttry {\r\n\t\t\tconst numbers = Math.floor(Math.random() * 10);\r\n\t\t\tconst url = await validation();\r\n\t\t\tthis.setState({ URL: url + '?' + parseInt(numbers) });\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const Logins = Form.create()(Login);\r\n\r\n\r\nexport default Logins;\r\n"],"sourceRoot":""}